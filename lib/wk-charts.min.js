angular.module("wk.chart",["wk.chart.templates"]),angular.module("wk.chart").constant("d3OrdinalScales",["ordinal","category10","category20","category20b","category20c"]),angular.module("wk.chart").constant("wkChartMargins",{top:10,left:50,bottom:40,right:20,topBottomMargin:{axis:25,label:18},leftRightMargin:{axis:40,label:20},minMargin:8,"default":{top:8,left:8,bottom:8,right:10},axis:{top:25,bottom:25,left:40,right:40},label:{top:18,bottom:18,left:20,right:20},dataLabelPadding:{hor:5,vert:5}}),angular.module("wk.chart").constant("d3Shapes",["circle","cross","triangle-down","triangle-up","square","diamond"]),angular.module("wk.chart").constant("axisConfig",{labelFontSize:"1.6em",x:{axisPositions:["top","bottom"],axisOffset:{bottom:"height"},axisPositionDefault:"bottom",direction:"horizontal",measure:"width",labelPositions:["outside","inside"],labelPositionDefault:"outside",labelOffset:{top:"1em",bottom:"-0.8em"}},y:{axisPositions:["left","right"],axisOffset:{right:"width"},axisPositionDefault:"left",direction:"vertical",measure:"height",labelPositions:["outside","inside"],labelPositionDefault:"outside",labelOffset:{left:"1.2em",right:"1.2em"}}}),angular.module("wk.chart").constant("d3Animation",{duration:3e3}),angular.module("wk.chart").constant("maxTicks",200),angular.module("wk.chart").constant("templateDir","templates/"),angular.module("wk.chart").constant("formatDefaults",{date:"%d.%m.%Y",number:",.2f"}),angular.module("wk.chart").constant("barConfig",{paddingLeft:.1,paddingRight:.1,outerPaddingLeft:0,outerPaddingRight:0}),function(){function e(e,t,r){var n=e.translate(),a=Math.atan2(t[1]-n[1],t[0]-n[0])-Math.atan2(r[1]-n[1],r[0]-n[0]);return[Math.cos(a/2),0,0,Math.sin(a/2)]}function t(e,t){var r=(e.translate(),e.invert(t));return r&&isFinite(r[0])&&isFinite(r[1])&&i(r)}function r(e){var t=.5*e[0]*s,r=.5*e[1]*s,n=.5*e[2]*s,a=Math.sin(t),o=Math.cos(t),i=Math.sin(r),l=Math.cos(r),c=Math.sin(n),u=Math.cos(n);return[o*l*u+a*i*c,a*l*u-o*i*c,o*i*u+a*l*c,o*l*c-a*i*u]}function n(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=t[0],l=t[1],c=t[2],s=t[3];return[r*i-n*l-a*c-o*s,r*l+n*i+a*s-o*c,r*c-n*s+a*i+o*l,r*s+n*c-a*l+o*i]}function a(e,t){if(e&&t){var r=c(e,t),n=Math.sqrt(l(r,r)),a=.5*Math.acos(Math.max(-1,Math.min(1,l(e,t)))),o=Math.sin(a)/n;return n&&[Math.cos(a),r[2]*o,-r[1]*o,r[0]*o]}}function o(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*u,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*u,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*u]}function i(e){var t=e[0]*s,r=e[1]*s,n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function l(e,t){for(var r=0,n=e.length,a=0;n>r;++r)a+=e[r]*t[r];return a}function c(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}var s=Math.PI/180,u=180/Math.PI;d3.geo.zoom=function(){var i,l,c=d3.dispatch("zoomstart","zoom","zoomend"),s=d3.behavior.zoom().on("zoomstart",function(){var d=d3.mouse(this),f=r(i.rotate()),y=t(i,d);y&&(l=y),u.call(s,"zoom",function(){i.scale(d3.event.scale);var r=d3.mouse(this),s=a(l,t(i,r));i.rotate(o(f=s?n(f,s):n(e(i,d,r),f))),d=r,c.zoom.apply(this,arguments)}),c.zoomstart.apply(this,arguments)}).on("zoomend",function(){u.call(s,"zoom",null),c.zoomend.apply(this,arguments)}),u=s.on;return s.projection=function(e){return arguments.length?s.scale((i=e).scale()):i},d3.rebind(s,c,"on")}}(),function(){var e=function(t,r){var n=t.nodeType;if(3==n)r.push(t.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==n){if(r.push("<",t.tagName),t.hasAttributes())for(var a=t.attributes,o=0,i=a.length;i>o;++o){var l=a.item(o);r.push(" ",l.name,"='",l.value,"'")}if(t.hasChildNodes()){r.push(">");for(var c=t.childNodes,o=0,i=c.length;i>o;++o)e(c.item(o),r);r.push("</",t.tagName,">")}else r.push("/>")}else{if(8!=n)throw"Error serializing XML. Unhandled node of type: "+n;r.push("<!--",t.nodeValue,"-->")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var t=[],r=this.firstChild;r;)e(r,t),r=r.nextSibling;return t.join("")},set:function(e){for(;this.firstChild;)this.removeChild(this.firstChild);try{var t=new DOMParser;t.async=!1,sXML="<svg xmlns='http://www.w3.org/2000/svg'>"+e+"</svg>";for(var r=t.parseFromString(sXML,"text/xml").documentElement,n=r.firstChild;n;)this.appendChild(this.ownerDocument.importNode(n,!0)),n=n.nextSibling}catch(a){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}})}(),angular.module("wk.chart").factory("dataManagerFactory",["$log",function(e){var t,r;return r=function(e,t,r){var n,a,o,i,l,c,s,u,d,f,y,h;if(l=0,i=0,y=e.length-1,f=t.length-1,d=Math.max(y,f),h=[],c=0,r){for(;y>=l&&f>=i;){for((u=t.indexOf(e[l]))>=0?(h.push({iOld:l,iNew:u,key:e[l]}),c=l,l++):(h.push({deleted:!0,iOld:l,key:e[l],atBorder:0===i,lowBorder:0===i}),l++);e.indexOf(t[i])<0&&f>=i;)h.push({added:!0,iPred:c,predKey:e[c],iNew:Math.min(i,f),key:t[i],atBorder:0===l,lowBorder:0===l}),i++;i++}for(;y>=l;)(u=t.indexOf(e[l]))>=0?(h.push({iOld:l,iNew:u,key:e[l]}),c=l,l++):(h.push({deleted:!0,iOld:l,key:e[l],atBorder:!0,highBorder:!0}),l++);for(;f>=i;)e.indexOf(t[i])<0?(h.push({added:!0,iPred:c,predKey:e[c],iNew:Math.min(i,f),key:t[i],atBorder:!0,highBorder:!0}),i++):i++}else{for(;y>=l&&f>=i;)e[l]===t[i]?(h.push({iOld:l,iNew:Math.min(i,f),key:e[l]}),c=l,l++,i++):e.indexOf(t[i],l)>=0?(h.push({deleted:!0,iOld:l,key:e[l],atBorder:0===i,lowBorder:0===i}),l++):(h.push({added:!0,iPred:c,predKey:e[c],iNew:Math.min(i,f),key:t[i],atBorder:0===l,lowBorder:0===l}),i++);for(;y>=l;)h.push({deleted:!0,iOld:l,key:e[l],atBorder:!0,highBorder:!0}),l++;for(;f>=i;)h.push({added:!0,iPred:c,predKey:e[c],iNew:Math.min(i,f),key:t[i],atBorder:!0,highBorder:!0}),i++}for(o=h.length-1,n=!0,s=t.length-1;o>=0;)a=h[o],a.deleted?(a.iSucc=s,a.succKey=t[s]):(s=a.iNew,n=!1),o--;return h},t=function(){var e,t,n,a,o,i,l,c,s,u,d,f,y,h,g;return t=[],e=[],i=[],o=[],l=void 0,f=void 0,u=[],c=[],s=[],d=void 0,n=!0,a=!1,g={},g.data=function(n,a){return t=e,i=o,s=c,c=f.layerKeys(n),e=_.clone(n),o=l.value(n),"time"===l.scaleType()&&(o=o.map(function(e){return+e})),u=r(i,o,a),d=r(s,c),g},g.isInitial=function(){return 0===t.length},h=function(r){return function(){var r,a,o,l,c,s,d;for(d=[],c=i[0],r=!0,s=void 0,o=void 0,l=0,a=function(e){return n?c:e.key};l<u.length;)o=u[l],void 0!==o.iOld?(d.push({added:!1,key:o.key,targetKey:o.key,data:t[o.iOld],targetData:t[o.iOld],newData:e[o.iNew]}),c=o.key,s=o.iOld,r=!1):d.push({added:!0,atBorder:o.atBorder,lowBorder:o.lowBorder,highBorder:o.highBorder,targetKey:o.atBorder&&!n?o.key:c,key:o.key,data:o.atBorder?e[o.iNew]:t[s],targetData:e[o.iNew],newData:e[o.iNew]}),l++;return d}}(this),g.animationStartLayers=function(){var e;return e=h(),d.map(function(t){return{layerKey:void 0===t.iOld?c[t.iNew]:t.key,added:t.added,values:e.map(function(e){return{key:e.key,targetKey:e.targetKey,layerKey:t.key,layerAdded:t.added,added:e.added,atBorder:e.atBorder,lowBorder:e.lowBorder,highBorder:e.highBorder,value:f.layerValue(e.data,t.key),targetValue:t.added?f.layerValue(e.newData,t.key)||0:f.layerValue(e.targetData,t.key)||0,data:e.data}})}})},y=function(r){return function(){var r,a,i,l,c,s,d;for(d=[],c=o[o.length-1],s=void 0,r=!0,l=u.length-1,a=function(e){return n?c:e.key};l>=0;)i=u[l],void 0!==i.iNew?(d.unshift({deleted:!1,key:i.key,targetKey:i.key,data:e[i.iNew],targetData:e[i.iNew],oldData:t[i.iOld]}),c=i.key,s=i.iNew,r=!1):d.unshift({deleted:!0,atBorder:i.atBorder,lowBorder:i.lowBorder,highBorder:i.highBorder,targetKey:i.atBorder&&!n?i.key:c,key:i.key,data:e[s],targetData:t[i.iOld],oldData:t[i.iOld]}),l--;return d}}(this),g.animationEndLayers=function(){var e;return e=y(),d.map(function(t){return{layerKey:t.key,deleted:t.deleted,values:e.map(function(e){return{key:e.key,targetKey:e.targetKey,layerKey:t.key,layerDeleted:t.deleted,deleted:e.deleted,atBorder:e.atBorder,lowBorder:e.lowBorder,highBorder:e.highBorder,value:e.deleted&&e.atBorder?f.layerValue(e.targetData,t.key):f.layerValue(e.data,t.key),targetValue:t.deleted?f.layerValue(e.oldData,t.key)||0:f.layerValue(e.targetData,t.key)||0,data:e.targetData}})}})},g.keyScale=function(e){return 0===arguments.length?l:(l=e,n=e.isOrdinal(),g)},g.valueScale=function(e){return 0===arguments.length?f:(f=e,a="rangeX"===e.kind()||"rangeY"===e.kind(),g)},g}}]),angular.module("wk.chart.templates",[]).run(["$templateCache",function(e){e.put("legend.html",'\n<div ng-style="legendStyle" ng-show="showLegend" class="wk-chart-legend">\n  <div ng-show="title" class="legend-title">{{title}}</div>\n  <ul class="list-unstyled">\n    <li ng-repeat="legendRow in legendRows track by legendRow.value" class="wk-chart-legend-item">\n      <svg ng-if="!legendRow.path" class="wk-chart-legend-svg-box">\n        <rect ng-style="legendRow.color" x="0" y="0" width="50" height="50"></rect>\n      </svg>\n      <svg ng-if="legendRow.path" style="width:15px;height:17px;">\n        <path ng-attr-d="{{legendRow.path}}" transform="translate(8,9)"></path>\n      </svg><span> &nbsp;{{legendRow.value}}</span>\n    </li>\n  </ul>\n</div>'),e.put("patterns.html",'\n<pattern id="largeDotsPattern" x="0" y="0" width="12" height="12" patternUnits="userSpaceOnUse">\n  <circle cx="5" cy="5" r="5" fill="#ffffff"></circle>\n</pattern>\n<mask id="largeDots">\n  <rect x="0" y="0" width="100%" height="100%" fill="url(#largeDotsPattern)" class="wk-chart-patter-mask"></rect>\n</mask>\n<pattern id="smallDotsPattern" x="0" y="0" width="5" height="5" patternUnits="userSpaceOnUse">\n  <circle cx="2" cy="2" r="2" fill="#ffffff"></circle>\n</pattern>\n<mask id="smallDots">\n  <rect x="0" y="0" width="100%" height="100%" fill="url(#smallDotsPattern)" class="wk-chart-patter-mask"></rect>\n</mask>\n<pattern id="stripesPattern" x="0" y="0" width="4" height="4" patternUnits="userSpaceOnUse" patternTransform="rotate(45)">\n  <rect width="2" height="100%" fill="#ffffff"> </rect>\n</pattern>\n<mask id="stripes">\n  <rect x="0" y="0" width="100%" height="100%" fill="url(#stripesPattern)" class="wk-chart-patter-mask"></rect>\n</mask>\n<linearGradient id="lgrad-1f77b4" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#1f77b4;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#15537d;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-1f77b4" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#1f77b4;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#15537d;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-aec7e8" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#aec7e8;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#798ba2;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-aec7e8" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#aec7e8;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#798ba2;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-ff7f0e" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#ff7f0e;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#b25809;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-ff7f0e" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#ff7f0e;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#b25809;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-ffbb78" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#ffbb78;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#b28254;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-ffbb78" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#ffbb78;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#b28254;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-2ca02c" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#2ca02c;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#1e701e;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-2ca02c" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#2ca02c;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#1e701e;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-98df8a" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#98df8a;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#6a9c60;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-98df8a" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#98df8a;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#6a9c60;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-d62728" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#d62728;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#951b1c;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-d62728" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#d62728;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#951b1c;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-ff9896" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#ff9896;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#b26a69;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-ff9896" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#ff9896;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#b26a69;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-9467bd" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#9467bd;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#674884;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-9467bd" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#9467bd;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#674884;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-c5b0d5" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#c5b0d5;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#897b95;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-c5b0d5" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#c5b0d5;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#897b95;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-8c564b" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#8c564b;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#623c34;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-8c564b" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#8c564b;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#623c34;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-c49c94" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#c49c94;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#896d67;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-c49c94" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#c49c94;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#896d67;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-e377c2" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#e377c2;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#9e5387;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-e377c2" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#e377c2;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#9e5387;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-f7b6d2" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#f7b6d2;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#ac7f93;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-f7b6d2" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#f7b6d2;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#ac7f93;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-7f7f7f" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#7f7f7f;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#585858;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-7f7f7f" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#7f7f7f;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#585858;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-c7c7c7" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#c7c7c7;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#8b8b8b;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-c7c7c7" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#c7c7c7;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#8b8b8b;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-bcbd22" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#bcbd22;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#838417;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-bcbd22" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#bcbd22;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#838417;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-dbdb8d" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#dbdb8d;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#999962;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-dbdb8d" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#dbdb8d;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#999962;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-17becf" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#17becf;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#108590;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-17becf" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#17becf;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#108590;stop-opacity:1"></stop>\n</radialGradient>\n<linearGradient id="lgrad-9edae5" x1="0%" y1="100%" x2="100%" y2="0%">\n  <stop offset="0%" style="stop-color:#9edae5;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#6e98a0;stop-opacity:1"></stop>\n</linearGradient>\n<radialGradient id="rgrad-9edae5" cx="50%" cy="50%" r="75%">\n  <stop offset="0%" style="stop-color:#9edae5;stop-opacity:1"></stop>\n  <stop offset="100%" style="stop-color:#6e98a0;stop-opacity:1"></stop>\n</radialGradient>'),e.put("toolTip.html",'\n<div ng-style="tooltipStyle" ng-hide="ttHide" class="wk-chart-tooltip">\n  <table class="table table-condensed table-bordered">\n    <thead ng-show="headerValue">\n      <tr>\n        <th colspan="2">{{headerName}}</th>\n        <th>{{headerValue}}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="(name,value) in layers track by name">\n        <!--td(ng-style="value.color", ng-class="value.class")\n        svg(ng-if="value.path", style="width:15px;height:17px;")\n            path(ng-attr-d="{{value.path}}",transform="translate(8,9)")\n        -->\n        <td class="wk-chart-tt-svg-box">\n          <svg ng-if="!value.path" class="wk-chart-svg-box">\n            <rect ng-style="value.color" x="0" y="0" width="50" height="50"></rect>\n          </svg>\n          <svg ng-if="value.path" style="width:15px;height:17px;">\n            <path ng-attr-d="{{value.path}}" transform="translate(8,9)"></path>\n          </svg>\n        </td>\n        <td>{{name}}</td>\n        <td>{{value.value}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>')}]),angular.module("wk.chart").provider("wkChartLocale",function(){var e,t;return e="en_US",t={de_DE:d3.locale({decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, der %e. %B %Y, %X",date:"%e.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),en_US:d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},this.setLocale=function(r){if(_.has(t,r))return e=r;throw"unknowm locale '"+r+"' using 'en-US' instead"},this.addLocaleDefinition=function(e,r){return t[e]=d3.locale(r)},this.$get=["$log",function(r){return t[e]}],this}),function(){this.ResizeSensor=function(e,t){function r(){this.q=[],this.add=function(e){this.q.push(e)};var e,t;this.call=function(){for(e=0,t=this.q.length;t>e;e++)this.q[e].call()}}function n(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function a(e,t){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(t)}else e.resizedAttached=new r,e.resizedAttached.add(t);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="wk-chart-resize-sensor";var a="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0;";e.resizeSensor.style.cssText=a,e.resizeSensor.innerHTML='<div class="wk-chart-resize-sensor-expand" style="'+a+'"><div style="'+o+'"></div></div><div class="wk-chart-resize-sensor-shrink" style="'+a+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),{fixed:1,absolute:1}[n(e,"position")]||(e.style.position="relative");var i,l,c=e.resizeSensor.childNodes[0],s=c.childNodes[0],u=e.resizeSensor.childNodes[1],d=(u.childNodes[0],function(){s.style.width=c.offsetWidth+10+"px",s.style.height=c.offsetHeight+10+"px",c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=e.offsetWidth,l=e.offsetHeight});d();var f=function(){e.resizedAttached.call()},y=function(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r)};y(c,"scroll",function(){(e.offsetWidth>i||e.offsetHeight>l)&&f(),d()}),y(u,"scroll",function(){(e.offsetWidth<i||e.offsetHeight<l)&&f(),d()})}if("[object Array]"===Object.prototype.toString.call(e)||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements)for(var o=0,i=e.length;i>o;o++)a(e[o],t);else a(e,t)}}(),angular.module("wk.chart").provider("wkChartScales",function(){var e,t,r,n,a,o,i,l,c,s;return e=["red","orange","yellow","green","blue"],t=void 0,c=function(){var e,t;return e=d3.scale.ordinal(),t=function(e){return 0===arguments.length?t:e},t.invert=function(e){return e},t.domain=d3.scale.domain,t.range=d3.scale.domain,t},l=function(){var e,t,r;return t=d3.scale.ordinal(),e=function(e){var r,n,a,o,i,l;for(r=0,o=t.range().length-1,l=[],n=a=0,i=e.length;i>=0?i>=a:a>=i;n=i>=0?++a:--a)l.push(r=(31*r+e.charAt(n))%o);return l},r=function(n){return arguments?t(e(n)):r},r.range=function(e){return arguments?(t.domain(d3.range(e.length)),t.range(e)):t.range()},r.domain=t.domain,r.rangePoint=t.rangePoints,r.rangeBands=t.rangeBands,r.rangeRoundBands=t.rangeRoundBands,r.rangeBand=t.rangeBand,r.rangeExtent=t.rangeExtent,r.hash=function(t){return arguments?(e=t,r):e},r},i=function(){var e,r,n;return e=d3.scale.ordinal(),r=t||e,n=function(e){return arguments?r.apply(n,[e,n.domain()]):n},n.mapFn=function(e){return arguments?(_.isFunction(e)&&(r=e),n):r},n.domain=e.domain,n.range=e.range,n.rangePoint=e.rangePoints,n.rangeBands=e.rangeBands,n.rangeRoundBands=e.rangeRoundBands,n.rangeBand=e.rangeBand,n.rangeExtent=e.rangeExtent,n},s=function(){var e,t,r,n,a,o,i,l,c,s,u;return s=d3.scale.ordinal(),o=0,i=0,n=0,a=0,t=[],r=void 0,e=!1,l=[],c=0,u=function(t){return arguments?e?s(t):l[r.get(t)]:u},u.range=function(t){return 0===arguments.length?e?s.range():l:s.range(t)},u.domain=function(e){var n,a,o,i;if(0===arguments.length)return t;for(s.domain(e),t=[],r=d3.map(),n=-1,a=e.length,o=[];++n<a;)o.push(r.has(i=e[n])?void 0:r.set(i,t.push(i)-1));return o},u.rangePoint=s.rangePoints,u.rangeBands=function(r,d,f){var y,h,g,p,v,m,k,w,b;if(s.rangeBands.apply(this,arguments),arguments.length=1){for(e=!1,y=r[1]<r[0],y?(w=r[1],b=r[0]):(w=r[0],b=r[1]),h=(b-w)/(t.length+n+a),c=h*(1-o-i),v=y?i+a:o+n,m=w+h*v,l=[],g=p=0,k=t.length-1;k>=0?k>=p:p>=k;g=k>=0?++p:--p)l[g]=m+g*h;return y&&l.reverse(),u}},u.rangeRoundBands=s.rangeRoundBands,u.rangeBand=function(){return e?s.rangeBand():c},u.rangeExtent=s.rangeExtent,u.copy=s.copy,u.padding=function(e,t){return o=e,i=2===arguments.length?t:o},u.outerPadding=function(e,t){return n=e,a=2===arguments.length?t:n},u},a=function(){return d3.scale.ordinal().range(e)},r=function(){return d3.scale.ordinal().range(d3.scale.category20().range().map(function(e){return"url(#lgrad-"+e.replace("#","")+")"}))},n=function(){return d3.scale.ordinal().range(d3.scale.category20().range().map(function(e){return"url(#rgrad-"+e.replace("#","")+")"}))},o=function(){return l().range(e)},this.colors=function(t){return e=t},this.customMapFn=function(e){var t;return _.isFunction(e)?t=e:void 0},this.$get=["$log",function(e){return{hashed:l,customCategory:a,customCategoryHashed:o,customScale:i,category20Linear:r,category20Radial:n,ordinalIdentity:c,ordinalPadding:s}}],this}),function(){function e(e){var t=document.querySelectorAll("svg image"),r=t.length;0==r&&e();for(var n=0;n<t.length;n++)!function(t){if(t.getAttribute("xlink:href")){var n=t.getAttribute("xlink:href").value;if(/^http/.test(n)&&!new RegExp("^"+window.location.host).test(n))throw new Error("Cannot render embedded images linking to external hosts.")}var a=document.createElement("canvas"),o=a.getContext("2d"),i=new Image;i.src=t.getAttribute("xlink:href"),i.onload=function(){a.width=i.width,a.height=i.height,o.drawImage(i,0,0),t.setAttribute("xlink:href",a.toDataURL("image/png")),r--,0==r&&e()}}(t[n])}function t(e){for(var t="",r=document.styleSheets,n=0;n<r.length;n++){var a=r[n].cssRules;if(null!=a)for(var o=0;o<a.length;o++){var i=a[o];"undefined"!=typeof i.style&&(t+=i.selectorText+" { "+i.style.cssText+" }\n")}}var l=document.createElement("style");l.setAttribute("type","text/css"),l.innerHTML="<![CDATA[\n"+t+"\n]]>";var c=document.createElement("defs");return c.appendChild(l),c}var r="undefined"!=typeof exports&&exports||this,n='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';r.svgAsDataUri=function(a,o,i){o=o||1,e(function(){var e=document.createElement("div"),l=a.cloneNode(!0),c=parseInt(l.getAttribute("width")||l.style.width||r.getComputedStyle(a).getPropertyValue("width")),s=parseInt(l.getAttribute("height")||l.style.height||r.getComputedStyle(a).getPropertyValue("height")),u="http://www.w3.org/2000/xmlns/";l.setAttribute("version","1.1"),l.setAttributeNS(u,"xmlns","http://www.w3.org/2000/svg"),l.setAttributeNS(u,"xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("width",c*o),l.setAttribute("height",s*o),l.setAttribute("viewBox","0 0 "+c+" "+s),e.appendChild(l),l.insertBefore(t(l),l.firstChild);var d=n+e.innerHTML,f="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(d)));i&&i(f)})},r.saveSvgAsPng=function(e,t,n){r.svgAsDataUri(e,n,function(e){var r=new Image;r.src=e,r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var a=document.createElement("a");a.download=t,a.href=e.toDataURL("image/png"),document.body.appendChild(a),a.click()}})}}(),angular.module("wk.chart").provider("wkChartTemplates",function(){var e,t,r;return r="toolTip.html",e="legend.html",t="patterns.html",this.setTooltipTemplate=function(e){return r=e},this.setLegendTemplate=function(t){return e=t},this.setSVGDefsUrl=function(e){return t=e},this.$get=["$log","$templateCache",function(n,a){return{tooltipTemplate:function(){return a.get(r)},legendTemplate:function(){return a.get(e)},svgDefTemplate:function(){return a.get(t)}}}],this}),angular.module("wk.chart").service("timing",["$log",function(e){var t,r,n;return n={},r=0,t=0,this.init=function(){return r=Date.now()},this.start=function(e){var t;return t=n[e],t||(t=n[e]={name:e,start:0,total:0,callCnt:0,active:!1}),t.start=Date.now(),t.active=!0},this.stop=function(e){var a;return(a=n[e])&&(a.active=!1,a.total+=Date.now()-a.start,a.callCnt+=1),t=Date.now()-r},this.report=function(){var r,a;for(r in n)a=n[r],a.avg=a.total/a.callCnt;return e.info(n),e.info("Elapsed Time (ms)",t),n},this.clear=function(){return n={}},this}]),angular.module("wk.chart").factory("dataLabelFactory",["$log","wkChartMargins",function(e,t){var r,n;return n=0,r=function(){var e,r,n,a,o,i,l,c,s,u;return e=!1,o=void 0,s=void 0,a=void 0,c=void 0,r=void 0,i=void 0,n=void 0,l={"font-size":"1.3em"},u=function(t,a,l,c){var u,d,f,y;return u=o.scale().rangeBand(),y=t.select("g.wk-chart-data-label"),d=t.select("text"),y.empty()?(y=t.append("g").attr("class","wk-chart-data-label").style("opacity",0).attr("transform",function(e){var t,r;return t=e.added||e.deleted?0:u/2,r=i+(o.isHorizontal()?Math.min(s.scale()(0),s.scale()(e.targetValue)):Math.max(s.scale()(0),s.scale()(e.targetValue))),"translate("+(o.isHorizontal()?t+","+r:r+","+t)+")"}),f=y.append("rect").attr("class","wk-chart-data-label-bg"),d=y.append("text").attr(r)):(d=y.select("text"),f=y.select("rect.wk-chart-data-label-bg")),d.text(function(e){return s.formatValue(e.targetValue)}).style(l),(a?y.transition().duration(n):y).attr("transform",function(e){var t,r;return t=e.added||e.deleted?0:u/2,r=i+(o.isHorizontal()?Math.min(s.scale()(0),s.scale()(e.targetValue)):Math.max(s.scale()(0),s.scale()(e.targetValue))),"translate("+(o.isHorizontal()?t+","+r:r+","+t)+")"}).style("opacity",function(t){return t.added||t.deleted||!e?0:1}),y.each(function(e){var t;return t=this.getBBox(),d3.select(this).select("rect.wk-chart-data-label-bg").attr(t)}),f.style(c)},u.active=function(t){return 0===arguments.length?e:(e=t,u)},u.keyScale=function(e){return 0===arguments.length?o:(o=e,o.isHorizontal()?(a="x",c="y",r={"text-anchor":"middle"},i=-t.dataLabelPadding.vert):(a="y",c="x",r={"text-anchor":"start",dy:"0.35em"},i=t.dataLabelPadding.hor),u)},u.valueScale=function(e){return 0===arguments.length?s:(s=e,u)},u.duration=function(e){return 0===arguments.length?n:(n=e,u)},u.style=function(e){return 0===arguments.length?l:(l=e,u)},u}}]),angular.module("wk.chart").factory("layeredData",["$log",function(e){var t;return t=function(){var e,t,r,n,a,o,i,l,c;return t=[],r=[],l=void 0,e=!1,a=1/0,n=-(1/0),i=1/0,o=-(1/0),c=function(){},c.data=function(e){return arguments.length(Is(0))?t:(t=e,c)},c.layerKeys=function(e){return 0===arguments.length?r:(r=e,
c)},c.x=function(e){return 0===arguments.length?l:(l=e,c)},c.calcTotal=function(t){return 0===arguments.length?e:(e=t,c)},c.min=function(){return a},c.max=function(){return n},c.minTotal=function(){return i},c.maxTotal=function(){return o},c.extent=function(){return[c.min(),c.max()]},c.totalExtent=function(){return[c.minTotal(),c.maxTotal()]},c.columns=function(t){var s,u,d,f,y,h,g,p,v,m,k,w,b,x;if(1===arguments.length){for(k=[],a=1/0,n=-(1/0),i=1/0,o=-(1/0),u=d=0,h=r.length;h>d;u=++d)f=r[u],k[u]={key:f,value:[],min:1/0,max:-(1/0)};for(u=v=0,g=t.length;g>v;u=++v){for(s=t[u],w=0,x="string"==typeof l?s[l]:l(s),m=0,p=k.length;p>m;m++)y=k[m],b=+s[y.key],y.value.push({x:x,value:b,key:y.key}),y.max<b&&(y.max=b),y.min>b&&(y.min=b),b>n&&(n=b),a>b&&(a=b),e&&(w+=+b);e&&(w>o&&(o=w),i>w&&(i=w))}return{min:a,max:n,totalMin:i,totalMax:o,data:k}}return c},c.rows=function(e){return 1===arguments.length?e.map(function(e){return{x:e[l],layers:layerKeys.map(function(t){return{key:t,value:e[t],x:e[l]}})}}):c},c}}]),angular.module("wk.chart").factory("markerFactory",["$log","d3Animation",function(e,t){var r,n;return n=0,r=function(){var e,r,a,o,i,l,c,s,u,d,f,y;return d=void 0,f=void 0,r=void 0,e=!1,u=0,i=0,a=t.duration,l=!1,c=void 0,s=void 0,o=n++,y=function(t,n){var l,c,y;return s=t,e?(l=t.selectAll(".wk-chart-marker-"+o).data(function(e){return e.values},function(e,t){return t}),l.enter().append("circle").attr("class","wk-chart-marker-"+o).style("fill",r).attr("r",5).style("pointer-events","none").style("opacity",i),y=n?l.transition().duration(a):l,y.attr("cx",d).attr("cy",f).style("opacity",function(e){return(e.added||e.deleted||e.layerAdded||e.layerDeleted?0:1)*u}),c=n?l.exit().transition().duration(a):l.exit(),c.remove()):t.selectAll(".wk-chart-marker-"+o).transition().duration(a).style("opacity",0).remove()},y.brush=function(t,r){var n,a,i,u;return e?(l?(n="cy",i=f):(n="cx",i=d),r?(u=function(e,t){return r[0]<=t&&t<=r[1]?i(e):-1e3},s.selectAll(".wk-chart-marker-"+o).attr(n,u).style("opacity",function(e,t){return r[0]<=t&&t<=r[1]?1:0})):(a=c.domain(),s.selectAll(".wk-chart-marker-"+o).attr(n,i).style("opacity",function(e){return a[0]<=e.key&&e.key<=a[1]?1:0}))):void 0},y.active=function(t){return 0===arguments.length?e:(i=!e&&t?0:1,e=t,u=e?1:0,y)},y.x=function(e){return 0===arguments.length?d:(d=e,y)},y.y=function(e){return 0===arguments.length?f:(f=e,y)},y.color=function(e){return 0===arguments.length?r:(r=e,y)},y.opacity=function(e){return 0===arguments.length?u:(u=e,y)},y.duration=function(e){return 0===arguments.length?a:(a=e,y)},y.isVertical=function(e){return 0===arguments.length?l:(l=e,y)},y.keyScale=function(e){return 0===arguments.length?c:(c=e,y)},y}}]),angular.module("wk.chart").directive("svgIcon",["$log",function(e){return{restrict:"E",template:'<svg ng-style="style"><path></path></svg>',scope:{path:"@",width:"@"},link:function(t,r,n){return t.style={height:"20px",width:t.width+"px","vertical-align":"middle"},n.$observe("path",function(e){return e?d3.select(r[0]).select("path").attr("d",e).attr("transform","translate(8,8)"):void 0}),t.$on("$destroy",function(){return e.log("svgIcon scope destroyed")})}}}]),angular.module("wk.chart").factory("tooltipHelperFactory",["$log",function(e){var t,r;return t=0,r=function(){var e,r,n,a,o,i,l,c,s,u,d,f;return c=void 0,d=void 0,l=!1,a=void 0,n=!1,s=void 0,u=void 0,i=void 0,e=[],r=void 0,o=t++,f={},f.keyScale=function(e){return 0===arguments.length?c:(c=e,f)},f.valueScale=function(e){var t;return 0===arguments.length?d:(d=e,t="rangeX"===d.kind()||"rangeY"===d.kind(),f)},f.isStacked=function(e){return 0===arguments.length?l:(l=e,f)},f.colorScale=function(e){return 0===arguments.length?a:(a=e,f)},f.colorByKey=function(e){return 0===arguments.length?n:(n=e,f)},f.layout=function(t){var r,n,a,o,l;if(0===arguments.length)return s;for(s=t,i=[],e=[0,s[0].values.length-1],l=s[0].values,n=a=0,o=l.length;o>a;n=++a)r=l[n],r.deleted||i.push(n);return f},f.brushRange=function(t){return 0===arguments.length?e:e=t},f.value=function(e){return 0===arguments.length?u:(u=e,f)},f.enter=function(e){var t,r,o,i,l,s,u;for(this.headerName=c.axisLabel(),this.headerValue=c.formattedValue(e),i=d.parentScale()?d.parentScale().layerKeys(e):d.layerKeys(e),s=[],r=0,l=i.length;l>r;r++)o=i[r],this.layers[o]={},this.layers[o].value=d.formattedLayerValue(e,o),t="",t=a.property().length>0?a.map(e):a.scale()(n?c.value(e):o),"string"==typeof t?u={fill:t,stroke:t}:(u=t,u.fill=t.color),s.push(this.layers[o].color=u);return s},f.moveData=function(e,t){return f.enter.apply(this,[t])},f.moveMarkers=function(e,t){var n,i,s,u,f,y,h,g,p,v;if(e&&t){if(g=c.value(t),y=d.layerKeys(t),i=y.map(function(e){return{key:e,value:d.layerValue(t,e)}}),l)for(v=0,u=0,h=i.length;h>u;u++)f=i[u],v+=f.value,f.value=v;return r=this.selectAll(".wk-chart-tt-marker-"+o).data(i,function(e){return e.key}),s=r.enter().append("g").attr("class","wk-chart-tt-marker-"+o),s.append("circle").attr("class","wk-chart-tt-marker").attr("r",9).style("fill",function(e){var t;return t=a.scale()(e.key),"string"==typeof t?t:t.color}).style("fill-opacity",.3).style("stroke",function(e){return a.scale()(e.key)}).style("pointer-events","none"),s.append("circle").attr("class","wk-chart-tt-inner-marker").attr("r",4).style("fill",function(e){var t;return t=a.scale()(e.key),"string"==typeof t?t:t.color}).style("fill-opacity",.6).style("stroke","white").style("pointer-events","none"),n=c.isHorizontal()?"cy":"cx",r.select(".wk-chart-tt-marker").attr(n,function(e){return d.scale()(e.value)}),r.select(".wk-chart-tt-inner-marker").attr(n,function(e){return d.scale()(e.value)}),r.exit().remove(),p=c.isOrdinal()?c.scale().rangeBand()/2:0,c.isHorizontal()?(isNaN(c.scale()(g)+p),this.attr("transform","translate("+(c.scale()(g)+p)+")")):this.attr("transform","translate(0,"+(c.scale()(g)+p)+")")}},f}}]),angular.module("wk.chart").service("utils",["$log",function(e){var t;return this.diff=function(e,t,r){var n,a,o,i;for(o=function(e){return t.indexOf(e)<0},i={},n=0;n<e.length;){if(o(e[n]))for(i[e[n]]=void 0,a=n+r;a>=0&&a<e.length;){if(!o(e[a])){i[e[n]]=e[a];break}a+=r}n++}return i},t=0,this.getId=function(){return"Chart"+t++},this.parseList=function(e){var t;return e?(t=e.trim().replace(/^\[|\]$/g,"").split(",").map(function(e){return e.replace(/^[\"|']|[\"|']$/g,"")}),1===t.length?t[0]:t):void 0},this.parseTrueFalse=function(e){return""===e||"true"===e?!0:"false"===e?!1:void 0},this.parsePadding=function(e,t,r){var n;return"false"===e?(t.paddingLeft=t.paddingRight=0,t.outerPaddingLeft=t.outerPaddingRight=0):"true"===e?t=_.clone(r,!0):(n=this.parseList(e),n&&(1===n.length?(t.paddingLeft=t.paddingRight=n[0]/100,t.outerPaddingLeft=t.outerPaddingRight=n[0]/100):2===n.length?(t.paddingLeft=t.paddingRight=n[0]/100,t.outerPaddingLeft=t.outerPaddingRight=n[1]/100):3===n.length?(t.paddingLeft=n[0]/100,t.paddingRight=n[1]/100,t.outerPaddingLeft=t.outerPaddingRight=n[2]/100):4===n.length&&(t.paddingLeft=n[0]/100,t.paddingRight=n[1]/100,t.outerPaddingLeft=n[2]/100,t.outerpaddingRight=n[3]/100)),t)},this.mergeData=function(){var e,t,r,n,a,o,i,l,c,s,u;return c=[],t=[],s={},n={},l=[],e=[],r=void 0,o=void 0,a=function(e){return e},i=function(e){return e},u=function(r){var o,i,d,f,y,h,g,p;for(c=[],s={},i=f=0,h=t.length;h>f;i=++f)o=t[i],c[i]=o,s[a(o)]=i;for(l=[],e=[],n={},t=r,d=p=0,g=t.length;g>p;d=++p)o=t[d],y=a(o),n[y]=d,s.hasOwnProperty(y)&&(l[s[y]]=!0,e[d]=!0);return u},u.key=function(e){return arguments?(a=e,u):a},u.first=function(e){return arguments?(r=e,u):r},u.last=function(e){return arguments?(o=e,u):o},u.added=function(){var r,n,a,o,i;for(i=[],n=a=0,o=t.length;o>a;n=++a)r=t[n],e[n]||i.push(_d);return i},u.deleted=function(){var e,t,r,n,a;for(a=[],e=t=0,r=c.length;r>t;e=++t)n=c[e],l[e]||a.push(c[e]);return a},u.current=function(e){return t[n[e]]},u.prev=function(e){return c[s[e]]},u.addedPred=function(o){var i;for(i=n[a(o)];!e[i];)if(i--<0)return r;return c[s[a(t[i])]]},u.addedPred.left=function(e){return u.addedPred(e).x},u.addedPred.right=function(e){var t;return t=u.addedPred(e),_.has(t,"width")?t.x+t.width:t.x},u.deletedSucc=function(e){var r;for(r=s[a(e)];!l[r];)if(r++>=c.length)return o;return t[n[a(c[r])]]},u},this.mergeSeriesSorted=function(e,t){var r,n,a,o,i,l;for(n=0,r=0,i=e.length-1,o=t.length-1,a=Math.max(i,o),l=[];i>=n&&o>=r;)+e[n]===+t[r]?(l.push([n,Math.min(r,o),e[n]]),n++,r++):+e[n]<+t[r]?(l.push([n,void 0,e[n]]),n++):(l.push([void 0,Math.min(r,o),t[r]]),r++);for(;i>=n;)l.push([n,void 0,e[n]]),n++;for(;o>=r;)l.push([void 0,Math.min(r,o),t[r]]),r++;return l},this.mergeSeriesUnsorted=function(e,t){var r,n,a,o,i,l;for(n=0,r=0,i=e.length-1,o=t.length-1,a=Math.max(i,o),l=[];i>=n&&o>=r;)e[n]===t[r]?(l.push([n,Math.min(r,o),e[n]]),n++,r++):t.indexOf(e[n])<0?(l.push([n,void 0,e[n]]),n++):(l.push([void 0,Math.min(r,o),t[r]]),r++);for(;i>=n;)l.push([n,void 0,e[n]]),n++;for(;o>=r;)l.push([void 0,Math.min(r,o),t[r]]),r++;return l},this}]),angular.module("wk.chart").directive("brush",["$log","behavior",function(e,t){var r;return r=0,{restrict:"A",require:["^chart","^?layout","?x","?y"],scope:{brushExtent:"=",selectedValues:"=",selectedDomain:"=",selectedDomainChange:"&",brushStart:"&",brushEnd:"&"},link:function(t,n,a,o){var i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b;return e.log("brush-scope",t.$id),c=r++,f=o[0].me,h=null!=(g=o[1])?g.me:void 0,m=null!=(p=o[2])?p.me:void 0,w=null!=(v=o[3])?v.me:void 0,k=void 0,b=void 0,u=void 0,i=void 0,s=!m&&!w,l=void 0,e.log("creating brush scope",t.$id),d=f.behavior().brush,y=f||h,d.x(m).y(w),t.$watch("brushExtent",function(e){return _.isArray(e)&&0===e.length?d.clearBrush():d.setExtent(e)}),d.events().on("brushStart."+c,function(){return a.brushStart?(t.brushStart(),_.defer(function(){return t.$apply()})):void 0}),d.events().on("brush."+c,function(e,r,n){return a.selectedValues&&(t.selectedValues=r),a.selectedDomain&&(t.selectedDomain=n),t.selectedDomainChange({domain:n}),_.defer(function(){return t.$apply()})}),d.events().on("brushEnd."+c,function(e,r,n){return a.brushEnd?(t.brushEnd({domain:n}),_.defer(function(){return t.$apply()})):void 0}),f.lifeCycle().on("drawChart.brush",function(e){return d.data(e)}),y.lifeCycle().on("destroy.brush",function(){return d.events().on("."+c,null),f.lifeCycle().on("."+c,null),t.$destroy(),e.log("destroying brush scope",t.$id)})}}}]),angular.module("wk.chart").directive("chart",["$log","chart","$filter",function(e,t,r){var n;return n=0,{restrict:"E",require:"chart",scope:{data:"=",filter:"="},controller:["$scope",function(e){return this.me=t(),this.me.scope(e)}],link:function(t,n,a,o){var i,l,c,s,u,d;return e.log("chart-scope",t.$id),u=o.me,s=!1,d=void 0,n.addClass(u.id()),i=void 0,l=void 0,u.container().element(n[0]),u.lifeCycle().configure(),u.lifeCycle().on("scopeApply.chart",function(){return t.$apply()}),u.lifeCycle().on("editSelected.chart",function(e,r){return attr.editSelected?t.$apply():void 0}),a.$observe("animationDuration",function(e){return e&&_.isNumber(+e)&&+e>=0?u.animationDuration(e):void 0}),a.$observe("header",function(e){return u.title(e?e:void 0)}),a.$observe("headerStyle",function(e){return e?u.titleStyle(t.$eval(e)):void 0}),a.$observe("subHeader",function(e){return u.subTitle(e?e:void 0)}),a.$observe("subHeaderStyle",function(e){return e?u.subTitleStyle(t.$eval(e)):void 0}),a.$observe("backgroundStyle",function(e){return e?u.backgroundStyle(t.$eval(e)):void 0}),t.$watch("filter",function(e){if(e){if(l=e,i)return u.lifeCycle().newData(r("filter")(i,l))}else if(l=void 0,i)return u.lifeCycle().newData(i)}),a.$observe("deepWatch",function(e){return s=void 0!==e&&"false"!==e?!0:!1,d&&d(),d=t.$watch("data",c,s)}),a.$observe("edit",function(e){return u.editMode(""===e||"true"===e?!0:!1)}),c=function(e){if(e){if(i=e,_.isArray(i)&&0===i.length)return;return u.lifeCycle().newData(l?r("filter")(e,l):e)}},d=t.$watch("data",c,s),n.on("$destroy",function(){return d&&d(),u.lifeCycle().on(".chart",null),u.container().element(void 0),e.log("Destroying chart"),u.lifeCycle().destroy(),t.$destroy()})}}}]),angular.module("wk.chart").directive("layout",["$log","layout","container",function(e,t,r){var n;return n=0,{restrict:"AE",require:["layout","^chart"],controller:["$element",function(e){return this.me=t()}],link:function(e,t,r,n){var a,o;return o=n[0].me,a=n[1].me,o.chart(a),t.addClass(o.id()),a.addLayout(o),a.container().addLayout(o),o.container(a.container())}}}]),angular.module("wk.chart").directive("printButton",["$log",function(e){return{require:"chart",restrict:"A",link:function(t,r,n,a){var o,i;return o=a.me,i=function(){var t;return t=d3.select(o.container().element()).select("div.wk-chart"),t.append("button").attr("class","wk-chart-print-button").style({position:"absolute",top:0,right:0}).text("Print").on("click",function(){var r;return e.log("Clicked Print Button"),r=t.select("svg.wk-chart").node(),saveSvgAsPng(r,"print.png",5)})},o.lifeCycle().on("drawChart.print",i)}}}]),angular.module("wk.chart").directive("selection",["$log",function(e){var t;return t=0,{restrict:"A",scope:{selectedDomain:"=",selectedDomainChange:"&"},require:"layout",link:function(r,n,a,o){var i,l,c;return e.log("selection-scope",r.$id),c=o.me,l=void 0,i=t++,r.$watch("selectedDomain",function(e){return _.isArray(e)&&0===e.length?(l.clearSelection(),r.selectedDomainChange({domain:[]})):void 0}),c.lifeCycle().on("configure.selection"+i,function(){return l=c.behavior().selected,l.layout(c),l.active(!0),l.on("selected.selection"+i,function(e){return r.selectedDomain&&(r.selectedDomain=e),r.selectedDomainChange({domain:e}),r.$apply()}),c.lifeCycle().on("destroy.selection"+i,function(){return l.on(".selection"+i,null),c.lifeCycle().on(".selection"+i,null),r.$destroy()})})}}}]),angular.module("wk.chart").directive("tooltips",["$log","behavior",function(e,t){return{restrict:"A",require:"chart",link:function(t,r,n,a){var o;return o=a.me,e.log("tooltips-scope",t.$id),n.$observe("tooltips",function(e){return o.toolTipTemplate(""),void 0===e||""!==e&&"true"!==e?e.length>0&&"false"!==e?(o.toolTipTemplate(e),o.showTooltip(!0)):o.showTooltip(!1):o.showTooltip(!0)}),n.$observe("tooltipStyle",function(e){return e?o.tooltipStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("color",["$log","scale","legend","scaleUtils",function(e,t,r,n){var a;return a=0,{restrict:"E",require:["color","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],scope:{mapFunction:"="},link:function(t,r,a,o){var i,l,c,s,u,d;return s=o[0].me,i=o[1].me,c=null!=(d=o[2])?d.me:void 0,l=void 0,i||c?(u="color",s.kind(u),s.parent(c||i),s.chart(i),s.scaleType("category20"),r.addClass(s.id()),i.addScale(s,c),s.register(),n.observeSharedAttributes(a,s),n.observeLegendAttributes(a,s,c,t),t.$watch("mapFunction",function(e){return e&&_.isFunction(e)?s.scaleMapFn(e):void 0}),i.lifeCycle().on("destroy.color",function(){return t.$destroy()})):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").service("scaleUtils",["$log","wkChartScales","utils",function(e,t,r){var n;return n=function(e){var t;return e?(t=e.trim().replace(/^\[|\]$/g,"").split(",").map(function(e){return e.replace(/^[\"|']|[\"|']$/g,"")}),t=t.map(function(e){return isNaN(e)?e:+e}),1===t.length?t[0]:t):void 0},{observeSharedAttributes:function(a,o){return a.$observe("type",function(r){return void 0!==r?(d3.scale.hasOwnProperty(r)||"time"===r||t.hasOwnProperty(r)?o.scaleType(r):""!==r&&e.error("Error: illegal scale value: "+r+". Using 'linear' scale instead"),o.update()):void 0}),a.$observe("exponent",function(e){return"pow"===o.scaleType()&&_.isNumber(+e)?o.exponent(+e).update():void 0}),a.$observe("property",function(e){return o.property(n(e)).update()}),a.$observe("layerProperty",function(e){return e&&e.length>0?o.layerProperty(e).update():void 0}),a.$observe("range",function(e){var t;return t=n(e),Array.isArray(t)?o.range(t).update():void 0}),a.$observe("dateFormat",function(e){return e&&"time"===o.scaleType()?o.dataFormat(e).update():void 0}),a.$observe("domain",function(t){var r;return t?(e.info("domain",t),r=n(t),Array.isArray(r)?o.domain(r).update():e.error("domain: must be array, or comma-separated list, got",t)):o.domain(void 0).update()}),a.$observe("domainRange",function(e){return e?o.domainCalc(e).update():void 0}),a.$observe("domainMin",function(e){return e?o.domainMin(e):void 0}),a.$observe("domainMax",function(e){return e?o.domainMax(e):void 0}),a.$observe("label",function(e){return void 0!==e?o.axisLabel(e).updateAttrs():void 0}),a.$observe("format",function(e){return void 0!==e?o.format(e):void 0}),a.$observe("reset",function(e){return o.resetOnNewData(r.parseTrueFalse(e))})},observeAxisAttributes:function(e,t,n){return e.$observe("axis",function(e){return t.axisOrient(t.orientation()).showAxis(r.parseTrueFalse(e)).update()}),e.$observe("labelStyle",function(e){return e?t.axisLabelStyle(n.$eval(e)):void 0}),e.$observe("tickFormat",function(e){return void 0!==e?t.tickFormat(d3.format(e)).update():void 0}),e.$observe("ticks",function(e){return void 0!==e&&(t.ticks(+e),t.axis())?t.updateAttrs():void 0}),e.$observe("tickInterval",function(e){return void 0!==e&&(t.tickInterval(e),t.axis())?t.updateAttrs():void 0}),e.$observe("tickLabelStyle",function(e){return e?t.tickLabelStyle(n.$eval(e)):void 0}),e.$observe("tickLabelBackgroundStyle",function(e){return e?t.tickLabelBackgroundStyle(n.$eval(e)):void 0}),e.$observe("grid",function(e){return void 0!==e?t.showGrid(""===e||"true"===e).updateAttrs():void 0}),e.$observe("gridStyle",function(e){return e?t.gridStyle(n.$eval(e)):void 0}),e.$observe("showLabel",function(e){return void 0!==e?t.showLabel(""===e||"true"===e).update(!0):void 0}),e.$observe("reverse",function(e){return void 0!==e?t.reverse(""===e||"true"===e).update():void 0}),e.$observe("rotateTickLabels",function(e){return t.rotateTickLabels(e&&_.isNumber(+e)?+e:void 0),t.update(!0)})},observeLegendAttributes:function(t,r,n,a){return t.$observe("legend",function(t){var a,o;if(void 0!==t){switch(a=r.legend(),a.showValues(!1),t){case"false":a.show(!1);break;case"top-left":case"top-right":case"bottom-left":case"bottom-right":a.position(t).div(void 0).show(!0);break;case"true":case"":a.position("top-right").show(!0).div(void 0);break;default:o=d3.select(t),o.empty()?(e.warn("legend reference does not exist:",t),a.div(void 0).show(!1)):a.div(o).position("top-left").show(!0)}return a.scale(r).layout(n),r.parent()&&a.register(r.parent()),a.redraw()}}),t.$observe("valuesLegend",function(t){var a,o;if(void 0!==t){switch(a=r.legend(),a.showValues(!0),t){case"false":a.show(!1);break;case"top-left":case"top-right":case"bottom-left":case"bottom-right":a.position(t).div(void 0).show(!0);break;case"true":case"":a.position("top-right").show(!0).div(void 0);break;default:o=d3.select(t),o.empty()?(e.warn("legend reference does not exist:",t),a.div(void 0).show(!1)):a.div(o).position("top-left").show(!0)}return a.scale(r).layout(n),r.parent()&&a.register(r.parent()),a.redraw()}}),t.$observe("legendTitle",function(e){return void 0!==e?r.legend().title(e).redraw():void 0}),t.$observe("legendStyle",function(e){return void 0!==e?r.legend().legendStyle(a.$eval(e)).redraw():void 0})}}}]),angular.module("wk.chart").directive("shape",["$log","scale","d3Shapes","scaleUtils",function(e,t,r,n){var a;return a=0,{restrict:"E",require:["shape","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],link:function(t,a,o,i){var l,c,s,u,d;return e.log("shape-scope",t.$id),s=i[0].me,l=i[1].me,c=null!=(d=i[2])?d.me:void 0,l||c?(u="shape",s.kind(u),s.parent(c||l),s.chart(l),s.scaleType("ordinal"),s.scale().range(r),a.addClass(s.id()),l.addScale(s,c),s.register(),n.observeSharedAttributes(o,s),n.observeLegendAttributes(o,s,c,t)):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").directive("size",["$log","scale","scaleUtils",function(e,t,r){var n;return n=0,{restrict:"E",require:["size","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],link:function(t,n,a,o){var i,l,c,s,u;return e.log("size-scope",t.$id),c=o[0].me,i=o[1].me,l=null!=(u=o[2])?u.me:void 0,i||l?(s="size",c.kind(s),c.parent(l||i),c.chart(i),c.scaleType("linear"),c.resetOnNewData(!0),n.addClass(c.id()),i.addScale(c,l),c.register(),r.observeSharedAttributes(a,c),r.observeLegendAttributes(a,c,l,t)):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").directive("x",["$log","scale","scaleUtils",function(e,t,r){var n;return n=0,{restrict:"E",require:["x","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],link:function(t,n,a,o){var i,l,c,s,u;return e.log("x-scope",t.$id),c=o[0].me,i=o[1].me,l=null!=(u=o[2])?u.me:void 0,i||l?(c.orientation(a.hasOwnProperty("top")?"top":"bottom"),s="x",c.kind(s),c.parent(l||i),c.chart(i),c.scaleType("linear"),c.resetOnNewData(!0),c.isHorizontal(!0),c.register(),n.addClass(c.id()),i.addScale(c,l),r.observeSharedAttributes(a,c),r.observeAxisAttributes(a,c,t),r.observeLegendAttributes(a,c,l)):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").directive("rangeX",["$log","scale","scaleUtils",function(e,t,r){var n;return n=0,{restrict:"E",require:["rangeX","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],link:function(t,n,a,o){var i,l,c,s,u;return c=o[0].me,i=o[1].me,l=null!=(u=o[2])?u.me:void 0,i||l?(s="rangeX",c.kind(s),c.parent(l||i),c.chart(i),c.scaleType("linear"),c.resetOnNewData(!0),c.isHorizontal(!0),c.register(),n.addClass(c.id()),i.addScale(c,l),r.observeSharedAttributes(a,c),a.$observe("axis",function(e){return void 0!==e?("false"!==e?"top"===e||"bottom"===e?c.axisOrient(e).showAxis(!0):c.axisOrient("bottom").showAxis(!0):c.showAxis(!1).axisOrient(void 0),c.update(!0)):void 0}),r.observeAxisAttributes(a,c,t),r.observeLegendAttributes(a,c,l),r.observerRangeAttributes(a,c),a.$observe("rotateTickLabels",function(e){return c.rotateTickLabels(e&&_.isNumber(+e)?+e:void 0),c.update(!0)})):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").directive("y",["$log","scale","legend","scaleUtils",function(e,t,r,n){var a;return a=0,{restrict:"E",require:["y","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],link:function(t,r,a,o){var i,l,c,s,u;return e.log("color-scope",t.$id),c=o[0].me,i=o[1].me,l=null!=(u=o[2])?u.me:void 0,i||l?(c.orientation(a.hasOwnProperty("right")?"right":"left"),s="y",c.kind(s),c.parent(l||i),c.chart(i),c.scaleType("linear"),c.isVertical(!0),c.resetOnNewData(!0),r.addClass(c.id()),i.addScale(c,l),c.register(),n.observeSharedAttributes(a,c),n.observeAxisAttributes(a,c,t),n.observeLegendAttributes(a,c,l)):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").directive("rangeY",["$log","scale","legend","scaleUtils",function(e,t,r,n){var a;return a=0,{restrict:"E",require:["rangeY","^chart","?^layout"],controller:["$element",function(e){return this.me=t()}],link:function(t,r,a,o){var i,l,c,s,u;return c=o[0].me,i=o[1].me,l=null!=(u=o[2])?u.me:void 0,i||l?(s="rangeY",c.kind(s),c.parent(l||i),c.chart(i),c.scaleType("linear"),c.isVertical(!0),c.resetOnNewData(!0),r.addClass(c.id()),i.addScale(c,l),c.register(),n.observeSharedAttributes(a,c),a.$observe("axis",function(e){return void 0!==e?("false"!==e?"left"===e||"right"===e?c.axisOrient(e).showAxis(!0):c.axisOrient("left").showAxis(!0):c.showAxis(!1).axisOrient(void 0),c.update(!0)):void 0}),n.observeAxisAttributes(a,c,t),n.observeLegendAttributes(a,c,l),n.observerRangeAttributes(a,c)):void e.error("scale needs to be contained in a chart or layout directive ")}}}]),angular.module("wk.chart").directive("area",["wkArea","$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a,o){return{restrict:"A",require:"layout",controller:function(){},link:function(t,r,n,a){var o;return o=e(),o.layout(a.me),n.$observe("markers",function(e){return o.markers(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("spline",function(e){return o.spline(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("areaStyle",function(e){return e?(o.areaStyle(t.$eval(e)),a.me.lifeCycle().update()):void 0})}}}]),angular.module("wk.chart").directive("areaStacked",["wkAreaStacked","$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a,o){return{restrict:"A",require:"layout",link:function(t,r,n,a){var o;return o=e(),o.layout(a.me),n.$observe("areaStacked",function(e){var t;return t="zero"===e||"silhouette"===e||"expand"===e||"wiggle"===e?e:"zero",o.offset(t),a.me.lifeCycle().update()}),n.$observe("markers",function(e){return o.markers(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("spline",function(e){return o.spline(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("areaStyle",function(e){return e?o.areaStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("areaStackedVertical",["wkAreaStackedVertical","$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o;return o=e(),o.layout(a.me),n.$observe("areaStackedVertical",function(e){var t;return"zero"===e||"silhouette"===e||"expand"===e||"wiggle"===e?(o.offset(e),t=e):(o.offset("zero"),t="zero"),a.me.lifeCycle().update()}),n.$observe("markers",function(e){return o.markers(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("spline",function(e){return o.spline(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("areaStyle",function(e){return e?o.areaStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("areaVertical",["wkAreaVertical","$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o;return o=e(),o.layout(a.me),n.$observe("markers",function(e){return o.markers(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("spline",function(e){return o.spline(""===e||"true"===e?!0:!1),a.me.lifeCycle().update()}),n.$observe("areaStyle",function(e){return e?o.areaStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("bars",["wkBar","$log","utils","barConfig","dataLabelFactory","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a,o,i){var l;return l=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("labels",function(e){return"false"===e?o.showDataLabels(!1):("true"===e||""===e)&&o.showDataLabels("x"),o.lifeCycle().update()}),n.$observe("labelStyle",function(e){return e&&o.dataLabelStyle(t.$eval(e)),o.lifeCycle().update()}),n.$observe("labelBackgroundStyle",function(e){return e&&o.dataLabelBackgroundStyle(t.$eval(e)),o.lifeCycle().update()}),n.$observe("barStyle",function(e){return e?i.barStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("barClustered",["wkBarClustered","$log","utils","barConfig","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("barStyle",function(e){return e?i.barStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("barStacked",["wkBarStacked","$log","utils","barConfig","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("barStyle",function(e){return e?i.barStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("boxPlot",["wkBoxPlot","$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o,i){var l;return l=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("labels",function(e){return"false"===e?o.showDataLabels(!1):("true"===e||""===e)&&o.showDataLabels("y"),o.lifeCycle().update()}),n.$observe("boxStyle",function(e){return e?i.boxStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("bubble",["wkBubble","$log","utils",function(e,t,r){var n;return n=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o)}}}]),angular.module("wk.chart").directive("column",["wkColumn","$log","utils","barConfig","dataManagerFactory","dataLabelFactory","tooltipHelperFactory",function(e,t,r,n,a,o,i){var l;return l=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("labels",function(e){return"false"===e?o.showDataLabels(!1):("true"===e||""===e)&&o.showDataLabels("y"),o.lifeCycle().update()}),n.$observe("labelStyle",function(e){return e&&o.dataLabelStyle(t.$eval(e)),o.lifeCycle().update()}),n.$observe("columnStyle",function(e){return e?i.columnStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("columnClustered",["wkColumnClustered","$log","utils","barConfig","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("columnStyle",function(e){return e?i.columnStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("columnStacked",["wkColumnStacked","$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o,i){var l;return l=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("columnStyle",function(e){return e?i.columnStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("gauge",["wkGauge","$log","utils",function(e,t,r){return{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o)}}}]),angular.module("wk.chart").directive("geoMap",["wkGeoMap","$log","utils",function(e,t,r){var n;return n=0,{restrict:"A",require:"layout",scope:{geojson:"=",projection:"="},link:function(r,n,a,o){var i,l;return i=o.me,l=e(),l.layout(i),r.$watch("projection",function(e){return void 0!==e?(t.log("setting Projection params",e),l.projection(e),i.lifeCycle().update()):void 0},!0),r.$watch("geojson",function(e){return void 0!==e&&""!==e?(l.geoJson(e),i.lifeCycle().update()):void 0})}}}]),angular.module("wk.chart").directive("columnHistogramOld",["wkHistogram","$log","barConfig","utils","wkChartMargins",function(e,t,r,n,a){var o;return o=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("labels",function(e){return"false"===e?o.showDataLabels(!1):("true"===e||""===e)&&o.showDataLabels("y"),o.lifeCycle().update()})}}}]),angular.module("wk.chart").directive("line",["wkLine","$log","behavior","utils","dataManagerFactory","tooltipHelperFactory","markerFactory","timing",function(e,t,r,n,a,o,i,l){var c;return c=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("markers",function(e){return i.markers(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("spline",function(e){return i.spline(""===e||"true"===e?!0:!1),
o.lifeCycle().update()}),n.$observe("lineStyle",function(e){return e?i.lineStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("lineVertical",["wkLineVertical","$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("markers",function(e){return i.markers(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("spline",function(e){return i.spline(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("lineStyle",function(e){return e?i.lineStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("pie",["wkPie","$log","utils",function(e,t,r){return{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("labels",function(e){return"false"===e?i.labels(!1):("true"===e||""===e)&&i.labels(!0),o.lifeCycle().update()}),n.$observe("donat",function(e){return"false"===e?i.donat(!1):("true"===e||""===e)&&i.donat(!0),o.lifeCycle().update()}),n.$observe("labelStyle",function(e){return e&&o.dataLabelStyle(t.$eval(e)),o.lifeCycle().update()}),n.$observe("pieStyle",function(e){return e?o.pieStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("rangeArea",["wkRangeArea","$log","utils","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("markers",function(e){return i.markers(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("spline",function(e){return i.spline(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("areaStyle",function(e){return e?i.areaStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("rangeAreaVertical",["wkRangeAreaVertical","$log","utils","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i;return i=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("markers",function(e){return i.markers(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("spline",function(e){return i.spline(""===e||"true"===e?!0:!1),o.lifeCycle().update()}),n.$observe("areaStyle",function(e){return e?i.areaStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("rangeBars",["wkRangeBar","$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o,i){var l;return l=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("labels",function(e){return"false"===e?o.showDataLabels(!1):("true"===e||""===e)&&o.showDataLabels("x"),o.lifeCycle().update()}),n.$observe("barStyle",function(e){return e?i.barStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("rangeColumn",["wkRangeColumn","$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o,i){var l;return l=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o),n.$observe("padding",function(e){return i.rangePadding(e),o.lifeCycle().update()}),n.$observe("labels",function(e){return"false"===e?o.showDataLabels(!1):("true"===e||""===e)&&o.showDataLabels("y"),o.lifeCycle().update()}),n.$observe("columnStyle",function(e){return e?i.columnStyle(t.$eval(e)):void 0})}}}]),angular.module("wk.chart").directive("scatter",["wkScatter","$log","utils",function(e,t,r){var n;return n=0,{restrict:"A",require:"^layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o)}}}]),angular.module("wk.chart").directive("spider",["wkSpider","$log","utils",function(e,t,r){var n;return n=0,{restrict:"A",require:"layout",link:function(t,r,n,a){var o,i;return o=a.me,i=e(),i.layout(o)}}}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("wk.chart").factory("behaviorBrush",["$log","$window","d3Animation",function(e,t,r){var n;return n=function(){var n,a,o,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A,D,M,L,P,B,O,K,F,V,z,T,E,N,G,H,j,I,q,R,U,X,Y,W,J,Z,Q,ee,te,re,ne,ae,oe,ie;return b=!1,n=void 0,y=void 0,d=void 0,V=void 0,F=void 0,z=void 0,T=void 0,g=[],k=!0,a=void 0,l="x",i="width",m="y",v="height",h="ew-resize",o=void 0,f=void 0,c=void 0,u=void 0,P=0,L=0,w=[],O=[],B=[],K=void 0,S=void 0,A=void 0,C=void 0,D=void 0,x=void 0,$="",M="",p=!0,s=d3.dispatch("brushStart","brush","brushEnd"),Q={},Q.area=function(e){return 0===arguments.length?n:(n=e,Q)},Q.chart=function(e){return 0===arguments.length?d:(d=e,d.lifeCycle().on("drawAxis.brush",re),Q)},Q.tooltip=function(e){return 0===arguments.length?V:(V=e,Q)},Q.svg=function(e){return 0===arguments.length?F:(F=e,Q)},Q.x=function(e){return 0===arguments.length?z:(z=e,e&&(a=z,k=!0,l="x",i="width",m="y",v="height",h="ew-resize"),Q)},Q.y=function(e){return 0===arguments.length?T:(T=e,e&&(a=T,k=!1,l="y",i="height",m="x",v="width",h="ns-resize"),Q)},Q.brush=function(e){return Q},Q.container=function(e,t,r,n){return 0===arguments.length?y:(y=e,P=r,L=n,a?(o=y.select(".wk-chart-axis.wk-chart-"+a.axisOrient()),f=y.select(".wk-chart-background").node(),c=F.selectAll(".wk-chart-brush"),u=F.selectAll(".wk-chart-brush-vis"),y.selectAll(".wk-chart-brush-line1, .wk-chart-brush-line2").attr(i,3).style("cursor",h),k?(c.attr("y",0).attr("height",L+t.bottom.height+3),y.selectAll(".wk-chart-brush-extent-marker").attr("y",L).attr("height",t.bottom.height+3),y.selectAll(".wk-chart-brush-label-text").attr("dy",".71em")):(c.attr("x",-t.left.width-3).attr("width",t.left.width+P+3),y.selectAll(".wk-chart-brush-extent-marker").attr("x",-t.left.width-3).attr("width",t.left.width+3),y.selectAll(".wk-chart-brush-label-text").attr("dy",".31em")),y.on("mousedown.brush",E),Q):void 0)},Q.data=function(e){return 0===arguments.length?g:g=e},Q.events=function(){return s},Q.clearBrush=function(){return j()},Q.setExtent=function(e){var t,r;return _.isArray(e)&&2===e.length?(t=a.scale()(a.parsedValue(e[0])),r=a.scale()(a.parsedValue(e[1])),S=Math.min(t,r),A=Math.max(t,r),c.style({visibility:null,"pointer-events":"all"}),te()):void 0},U=function(e){return a.value(a.find(a.invert(e)))},ee=function(){var e;return e=k?d3.mouse(n.node())[0]:d3.mouse(n.node())[1],0>e?0:e>Z()?Z(e):e},Z=function(e){return k?P:L},ne=function(e){return S=e,$=U(S)},ae=function(e){return A=e,M=U(A)},oe=function(){var e,t,r,n,o,i,l,c,u,d,f,h,p,v;if(a.isOrdinal()){if(h=a.range(),p=h[0]>h[h.length-1],r=a.getDomain(),e=a.scale().rangeBand(),l=Math.min(S,A),i=Math.max(S,A),p){for(t=0,n=h.length,v=h.length-1;n>t;){if(l>=h[t]+e){v=t-1;break}t++}for(t=h.length,o=0;t>=0;){if(i<=h[t]){o=t+1;break}t--}}else{for(t=0,n=h.length,o=h.length-1;n>t;){if(l<=h[t]+e){o=t;break}t++}for(t=h.length,v=0;t>=0;){if(i>=h[t]){v=t;break}t--}}return v>=o||a.isVertical()&&o>=v?(w=[o,v],O=r.slice(Math.min(o,v),Math.max(o,v)+1),B=g.slice(Math.min(o,v),Math.max(o,v)+1)):(w=[],O=[],B=[]),s.brush(w,O,B),y.selectAll(".wk-chart-selectable").each(function(e){var t,r;return d3.select(this).classed("wk-chart-selected",(r=e.key,indexOf.call(O,r)>=0)).classed("wk-chart-not-selected",(t=e.key,!(indexOf.call(O,t)>=0)))})}return u=a.invert(S),f=a.invert(A),c=a.findIndex(u),d=a.findIndex(f),w=[Math.min(c,d),Math.max(c,d)],B=g.slice(w[0],w[1]+1),s.brush(w,O,B)},I=function(){return e.log("selection cleared"),y.selectAll(".wk-chart-selectable").classed("wk-chart-selected",!1).classed("wk-chart-not-selected",!1),w=[],O=[],B=[],s.brush(w,O,B)},re=function(e){var t,r,n,o,i;if(a){if(a.isOrdinal())return i=_.intersection(O,a.scale().domain()),i.length>0?(i.length>1?(n=i[0],t=i[i.length-1]):n=t=i[0],o=a.scale()(n)+a.scale().rangeBand()/2,r=a.scale()(t)+a.scale().rangeBand()/2,r>o&&A>S||o>r&&S>A?(S=o,$=n,A=r,M=t):(A=o,M=n,S=r,$=t),te(!e)):j();if($&&M)return S=a.scale()($),A=a.scale()(M),te(!e)}},j=function(){return S=0,A=0,u.style({visibility:"hidden","pointer-events":"none"}),F.selectAll(".wk-chart-brush-extent").attr(l,0).attr(i,k?P:L),F.selectAll(".wk-chart-brush-rect1").attr(i,0),F.selectAll(".wk-chart-brush-rect2").attr(l,k?P:L).attr(i,0),d3.select("body").style("cursor",void 0),I(),N(),p=!0},ie=function(e,t){var r,n;return n=y.select(e),r=n.select("text").attr("transform","translate(5,2)").text(t).node().getBBox(),r.width+=10,r.height+=3,n.select("rect").attr(r).node().getBBox()},te=function(e){var t,n,o,c,s,u,d,f,y,h;return 0===S&&A===Z()||0===S&&0===A||S===Z()&&A===Z()?j():(f=function(t){return"string"==typeof t&&(t=F.selectAll(t)),e?t.transition().duration(r.duration):t},c=!1,t=k?P:L,o=Math.max(Math.min(S,A),0),n=Math.min(Math.max(S,A),t),f(".wk-chart-brush-rect1").attr(l,0).attr(i,o),f(".wk-chart-brush-rect2").attr(l,n).attr(i,Math.abs(t-n)),f(".wk-chart-brush-extent").attr(l,o).attr(i,Math.abs(n-o)),f(".wk-chart-brush-extent-marker").attr(l,o).attr(i,Math.abs(n-o)),f(".wk-chart-brush-line1").attr(l,o-3),f(".wk-chart-brush-line2").attr(l,n),y=ie(".wk-chart-brush-label1",a.formatValue(U(o))),h=ie(".wk-chart-brush-label2",a.formatValue(U(n))),k?(d=b?L+4:0,f(".wk-chart-brush-label1").attr("transform","translate("+Math.min(Math.max(o-y.width,0),P-y.width)+", "+d+")"),f(".wk-chart-brush-label2").attr("transform","translate("+Math.min(Math.max(n,0),P-h.width)+", "+d+")")):(s=b?-y.width:P-y.width,u=b?-h.width:P-h.width,f(".wk-chart-brush-label1").attr("transform","translate("+s+", "+Math.min(Math.max(o-y.height/2,y.height/2),L-y.height/2)+")"),f(".wk-chart-brush-label2").attr("transform","translate("+u+", "+Math.min(Math.max(n+y.height/2,h.height/2),L-h.height/2)+")")),oe())},E=function(){var e;return e=ee(),e>S-4&&S>=e?Y():e>S&&A>e?R():e>=A&&A+4>e?J():H(),s.brushStart()},H=function(e){var r;return d3.event.stopPropagation(),u.style({visibility:null,"pointer-events":"all"}),V.hide(!0),K=ee(),ne(K),ae(K),te(),r=d3.select(t),r.on("mousemove.brush",G),r.on("mouseup.brush",N),d3.select("body").style("cursor","crosshair")},R=function(e){var r;return d3.event.stopPropagation(),V.hide(!0),K=ee(),C=S,D=A,r=d3.select(t),r.on("mousemove.brush",q),r.on("mouseup.brush",N),d3.select("body").style("cursor","move")},Y=function(e){var r;return d3.event.stopPropagation(),V.hide(!0),r=d3.select(t),x=ee(),r.on("mousemove.brush",X),r.on("mouseup.brush",N),d3.select("body").style("cursor",h)},J=function(e){var r;return d3.event.stopPropagation(),V.hide(!0),r=d3.select(t),x=ee(),r.on("mousemove.brush",W),r.on("mouseup.brush",N),d3.select("body").style("cursor",h)},G=function(e){var t;return d3.event.stopPropagation(),t=ee(),ne(Math.min(K,t)),ae(Math.max(K,t)),te()},q=function(e){var t,r,n;return d3.event.stopPropagation(),t=ee()-K,C+t>=0&&D+t<=Z()?(r=C+t,n=D+t):0>=t?(r=0,n=D-C):(n=Z(),r=Z()-(D-C)),ne(r),ae(n),te()},X=function(e){var t;return d3.event.stopPropagation(),t=ee(),ne(t),te()},W=function(e){var t;return d3.event.stopPropagation(),t=ee(),ae(t),te()},N=function(e){var r;return V&&_.defer(function(){return V.hide(!1)}),r=d3.select(t),r.on("mousemove.brush",void 0),r.on("mouseup.brush",void 0),d3.select("body").style("cursor",void 0),s.brushEnd(w,O,B)},Q}}]),angular.module("wk.chart").factory("behavior",["$log","$window","behaviorTooltip","behaviorSelect","behaviorBrush",function(e,t,r,n,a){var o;return o=function(){var e,t,o,i,l,c,s;return o=r(),e=a(),t=n(),l=function(r){return e.area(r),o.area(r),t.area(r)},c=function(t,r,n,a){return e.container(t,r,n,a),e.tooltip(o),o.container(t)},i=function(t){return e.chart(t),o.chart(t)},s=function(t){return e.svg(t)},{tooltip:o,selected:t,brush:e,chartArea:l,container:c,chart:i,svg:s}}}]),angular.module("wk.chart").factory("behaviorSelect",["$log",function(e){var t,r;return r=0,t=function(){var t,n,a,o,i,l,c;return a="select"+r++,n=void 0,o=void 0,t=!1,i=d3.dispatch("selected"),l=function(){var e,r,a,l;if(t&&(r=d3.select(this),t))return r.classed("wk-chart-selectable")?(e=r.classed("wk-chart-selected"),r.classed("wk-chart-selected",!e),a=n.selectAll(".wk-chart-selected"),l=a.data().map(function(e){return e.data?e.data:e}),n.classed("wk-chart-has-selected-items",l.length>0),o.lifeCycle().objectsSelected(a),i.selected(l)):void 0},c=function(e){return 0===arguments.length?c:(e.on("click",l),c)},c.id=function(){return a},c.active=function(e){return 0===arguments.length?t:(t=e,c)},c.clearSelection=function(){return e.log("selection Cleared"),n?(n.selectAll(".wk-chart-selected").classed("wk-chart-selected",!1),n.classed("wk-chart-has-selected-items",!1),o.lifeCycle().objectsSelected(n.selectAll(".wk-chart-selected"))):void 0},c.area=function(e){return 0===arguments.length?n:(n=e,c)},c.layout=function(e){return 0===arguments.length?o:(o=e,c)},c.events=function(){return i},c.on=function(e,t){return i.on(e,t),c},c}}]),angular.module("wk.chart").factory("behaviorTooltip",["$log","$document","$rootScope","$compile","$templateCache","wkChartTemplates",function(e,t,r,n,a,o){var i;return i=function(){var r,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A,D,M,L,P,B,O,K,F;return r=!1,p="",f=!1,k=void 0,y=void 0,h=void 0,i=void 0,c=void 0,l=void 0,u=void 0,m=void 0,g=void 0,d=void 0,v=!1,x=d3.dispatch("enter","moveData","moveMarker","leave"),w=o.tooltipTemplate(),b=void 0,s=void 0,S=t.find("body"),C=S[0].getBoundingClientRect(),L=function(){},P=function(){var e,t,r;return r=s[0].getBoundingClientRect(),e=C.right-20>d3.event.clientX+r.width+10?d3.event.clientX+10:d3.event.clientX-r.width-10,t=C.bottom-20>d3.event.clientY+r.height+10?d3.event.clientY+10:d3.event.clientY-r.height-10,_.assign(b.tooltipStyle,{position:"absolute",left:e+"px",top:t+"px","z-index":1500,opacity:1}),b.$apply()},B=function(){return _.assign(b.tooltipStyle,{position:"absolute",left:"0px",top:"0px","z-index":1500,opacity:0}),b.$apply()},O=function(){var e,t,n,a,o,l;if(r&&!f)return b.layers={},k?(t=d3.mouse(this),a=g.invert(g.isHorizontal()?t[0]:t[1]),n=g.find(a),b.ttData=n):(l=d3.select(this).datum(),n=b.ttData=l.data?l.data:l),x.enter.apply(b,[n,n]),o=d3.select(".wk-chart-tooltip"),o.empty()&&(S.append(s),b.tooltipStyle=L.chart().tooltipStyle(),B()),k?(y=u.select(".wk-chart-tooltip-marker"),y.empty()&&(e=i.select(".wk-chart-background").node().getBBox(),y=u.append("g").attr("class","wk-chart-tooltip-marker"),h=y.append("line"),h.attr(g.isHorizontal()?{"class":"wk-chart-marker-line",x0:0,x1:0,y0:0,y1:e.height}:{"class":"wk-chart-marker-line",x0:0,x1:e.width,y0:0,y1:0}),h.style({stroke:"darkgrey","pointer-events":"none"})),x.moveMarker.apply(y,[a,n])):void 0},F=function(){var e,t,n;if(r&&!f){if(e=d3.mouse(l),k){if(!y)return void O.apply(this,arguments);n=g.invert(g.isHorizontal()?e[0]:e[1]),t=g.find(n),x.moveMarker.apply(y,[n,t]),b.ttData=t,x.moveData.apply(b,[n,t])}return P()}},K=function(){return y&&y.remove(),y=void 0,s.remove()},D=function(e){var t,r;return t=u.select(".wk-chart-background").node(),r=document.createEvent("MouseEvents"),r.initMouseEvent("mousedown",!0,!0,d3.event.view,d3.event.detail,d3.event.pageX||d3.event.layerX,d3.event.pageY||d3.event.layerY,d3.event.clientX,d3.event.clientY,d3.event.ctrlKey,d3.event.altKey,d3.event.shiftKey,d3.event.metaKey,d3.event.button,d3.event.relatedTarget),t.dispatchEvent(r)},M=function(t){return e.debug(t,d3.event)},L.hide=function(e){return 0===arguments.length?f:(f=e,y&&y.style("visibility",f?"hidden":"visible"),b&&(b.ttHide=f,b.$apply()),L)},L.chart=function(t){return 0===arguments.length?c:(c=t,c.lifeCycle().on("destroy.tooltip",function(){return b&&(e.log("destroying tooltip scope",b.$id,c.id()),b.map=void 0,b.scale=void 0,b.properties=void 0,b.label=void 0,b.value=void 0,b.$destroy()),s=void 0,l=void 0}),L)},L.active=function(e){return 0===arguments.length?r:(r=e,L)},L.template=function(e){var t;return 0===arguments.length?p:(p=e,p.length>0&&(t=a.get(p),w='<div class="wk-chart-tooltip" ng-style="tooltipStyle" ng-hide="ttHide">'+t+"</div>"),L)},L.area=function(e){return 0===arguments.length?i:(void 0===e?(i=e,l=e):(i=e,l=i.node(),k&&L.tooltip(i)),L)},L.container=function(e){return 0===arguments.length?u:(u=e,L)},L.markerScale=function(e){return 0===arguments.length?g:(e?(k=!0,g=e):k=!1,L)},L.data=function(e){return 0===arguments.length?d:(d=e,L)},L.on=function(e,t){return x.on(e,t)},A=function(e){return function(){return b.ttData?e(b.ttData):void 0}},$=function(t){var r,a,o;if(!b){b=c.scope().$new(!0),e.log("creating tooltip scope",b.$id,c.id()),b.properties={},b.map={},b.scale={},b.label={},b.value={},b.ttHide=!1,a=c.allScales().allKinds();for(r in a)o=a[r],b.map[r]=A(o.map),b.scale[r]=o.scale(),b.properties[r]=A(o.layerKeys),b.label[r]=o.axisLabel(),b.value[r]=A(o.value)}return s?void 0:s=n(w)(b)},L.tooltip=function(e){return 0===arguments.length?L:($(w),!k||e.classed("wk-chart-area")?e.on("mouseenter.tooltip",O).on("mousemove.tooltip",F).on("mouseleave.tooltip",K):void 0)},L}}]),angular.module("wk.chart").factory("chart",["$log","scaleList","container","behavior","d3Animation",function(e,t,r,n,a){var o,i;return i=0,o=function(){var o,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A,D,M;return h="chart"+i++,M=function(){},g=[],d=void 0,o=void 0,v=void 0,f=void 0,k=!1,m=void 0,C="",x=void 0,w=void 0,y=!1,s=n(),l=a.duration,p=d3.dispatch("configure","resize","prepareData","scaleDomains","rescaleDomains","sizeContainer","drawAxis","drawChart","newData","update","updateAttrs","scopeApply","destroy","animationStartState","animationEndState","editSelected"),u=d3.dispatch("draw","change"),M.id=function(e){return h},M.scope=function(e){return 0===arguments.length?m:(m=e,M)},M.showTooltip=function(e){return 0===arguments.length?k:(k=e,s.tooltip.active(k),M)},M.toolTipTemplate=function(e){return 0===arguments.length?C:(C=e,s.tooltip.template(e),M)},$={},M.tooltipStyle=function(e){return 0===arguments.length?$:(_.isObject(e)&&_.assign($,e),M)},M.title=function(e){return 0===arguments.length?x:(x=e,M)},S={"font-size":"1.8em"},M.titleStyle=function(e){return 0===arguments.length?S:(_.isObject(e)&&_.assign(S,e),M)},M.subTitle=function(e){return 0===arguments.length?w:(w=e,M)},b={"font-size":"1.3em"},M.subTitleStyle=function(e){return 0===arguments.length?b:(_.isObject(e)&&_.assign(b,e),M)},c={position:"relative"},M.backgroundStyle=function(e){return 0===arguments.length?c:(_.isObject(e)&&(_.assign(c,e),c.position="relative"),M)},M.addLayout=function(e){return 0===arguments.length?g:(g.push(e),M)},M.addScale=function(e,t){return o.add(e),t?t.scales().add(e):v.add(e),M},M.prepareScaleHierarchy=function(){var e,t,r,n,a;r=o.getOwned(),n=[];for(e in r)a=r[e],!v.hasScale(a)&&(t=v.getKind(a.kind(),a.orientation()))?(a.parentScale(t),a.scaleType(t.scaleType()),a.dataFormat(t.dataFormat()),a.reverse(t.reverse()),a.showAxis(!1),n.push(a.showGrid(!1))):n.push(void 0);return n},M.animationDuration=function(e){return 0===arguments.length?l:(l=e,M)},M.editMode=function(e){return 0===arguments.length?y:(e!==y&&(y=e,y?M.container().registerEditHooks():M.container().deregisterEditHooks()),M)},M.lifeCycle=function(e){return p},M.layouts=function(){return g},M.scales=function(){return v},M.allScales=function(){return o},M.hasScale=function(e){return!!o.has(e)},M.container=function(){return d},M.brush=function(){return u},M.getData=function(){return f},M.behavior=function(){return s},D=function(t,r){return t?(e.log("executing full life cycle"),f=t,m.filteredData=t,m.scales=o,p.prepareData(t,r),p.animationStartState(t),p.scaleDomains(t,r),p.sizeContainer(t,r),p.drawAxis(r),p.animationEndState(t),p.drawChart(t,r),p.scopeApply(),d.registerEditHooks()):void 0},A=_.debounce(D,100),M.execLifeCycleFull=D,M.resizeLifeCycle=function(t){return f?(e.log("executing resize life cycle"),p.sizeContainer(f,t),p.drawAxis(t),p.drawChart(f,t),p.scopeApply()):void 0},M.newDataLifeCycle=function(t,r){return t?(e.log("executing new data life cycle"),f=t,m.filteredData=t,p.prepareData(t,r),p.scaleDomains(t,r),p.drawAxis(r),p.drawChart(t,r)):void 0},M.attributeChange=function(t){return f?(e.log("executing attribute change life cycle"),p.sizeContainer(f,t),p.drawAxis(t),p.drawChart(f,t)):void 0},M.brushExtentChanged=function(){return f?(p.drawAxis(!0),p.drawChart(f,!0)):void 0},M.lifeCycle().on("newData.chart",_.debounce(D,10)),M.lifeCycle().on("resize.chart",M.resizeLifeCycle),M.lifeCycle().on("update.chart",function(e){return M.execLifeCycleFull(f,e)}),M.lifeCycle().on("updateAttrs",M.attributeChange),M.lifeCycle().on("rescaleDomains",p.scaleDomains(f,!0)),s.chart(M),d=r().chart(M),o=t(),v=t(),M}}]),angular.module("wk.chart").factory("container",["$log","$window","wkChartMargins","wkChartTemplates","$templateCache",function(e,t,r,n,a){var o,i;return i=0,o=function(){var t,a,o,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A,D,M,L,P,B,O,K,F,V,z,T,E,_;return z=function(){},s="cntnr"+i++,a=void 0,f=void 0,y=void 0,l=void 0,k=[],w=[],A=void 0,c=void 0,$=void 0,o=void 0,p=void 0,b=angular.copy(r["default"]),m=0,v=0,D=0,u=void 0,x=void 0,t=void 0,d=0,K=0,L=0,M=0,z.id=function(){return s},z.chart=function(e){return 0===arguments.length?a:(a=e,a.lifeCycle().on("sizeContainer."+z.id(),z.drawChartFrame),z)},z.element=function(t){var r,n;return 0===arguments.length?f:(r=function(){return z.chart().lifeCycle().resize(!0)},f=t,f&&(y=d3.select(f),y.empty()?e.error("Error: Element "+f+" does not exist"):(g(),n=y.select(".wk-chart").node(),new ResizeSensor(n,r))),z)},z.addLayout=function(e){return k.push(e),z},z.height=function(){return v},z.width=function(){return m},z.scaleWidth=function(){return m-K},z.scaleHeight=function(){return v-K},z.margins=function(){return b},z.getChartArea=function(){return o},z.getOverlay=function(){return x},z.getContainer=function(){return $},z.registerEditHooks=function(){return a.editMode()?(z.chart().behavior().tooltip.active(!1),c.selectAll(".wk-chart-axis-select").each(function(e){var t,r;return r=this.parentElement.getBBox(),t=d3.select(this).attr(r)}),y.selectAll(".wk-chart-axis-select, .wk-chart-line, .wk-chart-area-path, .wk-chart-marker, .wk-chart-legend").style("pointer-events","all"),y.selectAll(".wk-chart-axis-select, .wk-chart-label-text, .wk-chart-data-label, .wk-chart-layer, .wk-chart-innerArc, .wk-chart-legend, .wk-chart-overlay, .wk-chart-bubble, .wk-chart-shape").style("cursor","pointer").on("click",function(e){return a.lifeCycle().editSelected(d3.select(this).attr("class"),e)})):c.selectAll(".wk-chart-axis-select, .wk-chart-line, .wk-chart-area-path, .wk-chart-legend").style("pointer-events","none").style("cursor","default")},P=function(e,t,r,n,a){var o;return o=e.select("."+r.replace(" ",".")),o.empty()&&(o=e.append("text").attr({"class":r,"text-anchor":"middle",y:a?a:0})),o.text(t).style(n),o.node().getBBox().height},F=function(e,t){var r,n;return n=0,r=c.select(".wk-chart-title-area"),r.empty()&&(r=c.insert("g",".wk-chart-area").attr("class","wk-chart-title-area wk-center-hor")),e&&(D=P(r,e,"wk-chart-title wk-chart-label-text",a.titleStyle())),t&&P(r,t,"wk-chart-subtitle wk-chart-label-text",a.subTitleStyle(),D),r.node().getBBox().height},T=function(e,t,r,n){var a,o,i,l,c;for(l=t.append("g"),o=0,i=e.length;i>o;o++)c=e[o],l.append("text").attr({"class":r}).text(c).style(n);return a=l.node().getBBox(),l.remove(),a},E=function(e){var t;switch(t=e.rotateTickLabels(),e.axisOrient()){case"bottom":return 0>t?"end":"start";case"top":return t>0?"end":"start";case"right":return Math.abs(t)>=90?"end":"start";case"left":return Math.abs(t)<=90?"end":"start"}},_=function(e){var t;switch(t=e.rotateTickLabels(),e.axisOrient()){case"bottom":return"rotate("+t+", 0, 10)";case"top":return"rotate("+t+", 0, -10)";case"right":return"rotate("+t+", 10, 0)";case"left":return"rotate("+t+", -10, 0)"}},V=function(e){var t,r;return t=c.append("g"),e.range([0,500]),t.call(e.axis()),e.rotateTickLabels()&&t.selectAll(".tick > text").attr({dy:"0.35em"}).attr("transform",_(e)).style("text-anchor",E(e)),t.selectAll(".tick > text").style(e.tickLabelStyle()),r=t.node().getBBox(),t.remove(),r},B=function(e){var t,r;return t=c.select(".wk-chart-axis.wk-chart-"+e.axisOrient()),t.empty()?(t=c.insert("g",".wk-chart-area").attr("class","wk-chart-axis wk-chart-"+e.axisOrient()),r=t.append("rect").attr("class","wk-chart-axis-select wk-chart-"+e.axisOrient()).style({opacity:0,"pointer-events":"none"})):r=t.select("rect.wk-chart-axis-select"),t.transition().duration(d).call(e.axis()),e.rotateTickLabels()?t.selectAll(".wk-chart-"+e.axisOrient()+".wk-chart-axis .tick>text").attr({dy:"0.35em"}).attr("transform",function(t){return _(e)}).style("text-anchor",E(e)).style("pointer-events","none").style(e.tickLabelStyle()):t.selectAll(".wk-chart-"+e.axisOrient()+".wk-chart-axis .tick>text").attr("transform",null).style("pointer-events","none").style(e.tickLabelStyle()),t.selectAll("g.tick").each(function(){var t;return t=d3.select(this).select("rect.tick-bg"),t.empty()&&(t=d3.select(this).insert("rect",":first-child").attr("class","tick-bg")),(e.rotateTickLabels()?t.attr("transform",function(t){return _(e)}):t).attr(d3.select(this).select("text").node().getBBox())}).style(e.tickLabelBackgroundStyle())},S=function(e){return c.select(".wk-chart-axis.wk-chart-"+e+", .wk-chart-axis-select.wk-chart-"+e).remove()},C=function(e){return c.select(".wk-chart-label.wk-chart-"+e).remove()},O=function(e,t){var r,n,a,o,i,l;return r=t?0:d,a=e.kind(),i=e.axis().tickValues(),l=i?i:e.isOrdinal()?e.scale().range():e.scale().ticks(),o=e.isOrdinal()?e.scale().rangeBand()/2:0,n=p.selectAll(".wk-chart-grid.wk-chart-"+a).data(l,function(e){return e}),n.enter().append("line").attr("class","wk-chart-grid wk-chart-"+a).style("pointer-events","none").style("opacity",0),n.style(e.gridStyle()),"y"===a?n.transition().duration(r).attr({x1:K,x2:m-2*K,y1:function(t){return e.isOrdinal()?t+o:e.scale()(t)},y2:function(t){return e.isOrdinal()?t+o:e.scale()(t)}}).style("opacity",1):n.transition().duration(r).attr({y1:K,y2:v-2*K,x1:function(t){return e.isOrdinal()?t+o:e.scale()(t)},x2:function(t){return e.isOrdinal()?t+o:e.scale()(t)}}).style("opacity",1),n.exit().transition().duration(r).style("opacity",0).remove()},h=function(){return this.append("rect"),this.append("text").attr("class","wk-chart-brush-label-text").attr("text-anchor","left")},g=function(){var e,t;return l=y.append("div").attr("class","wk-chart"),A=l.append("svg").attr("class","wk-chart"),e=A.append("defs"),e.node().innerHTML=n.svgDefTemplate(),e.append("clipPath").attr("id","wk-chart-clip-"+s).append("rect"),t=e.append("mask").attr("id","wk-chart-brush-mask-"+s),t.append("rect").attr("class","wk-chart-brush wk-chart-brush-rect1").style("fill","rgba(255,255,255,0.5)"),t.append("rect").attr("class","wk-chart-brush wk-chart-brush-extent").style("fill","#ffffff").attr("width",2e3).attr("height",2e3),t.append("rect").attr("class","wk-chart-brush wk-chart-brush-rect2").style("fill","rgba(255,255,255,0.5)"),c=A.append("g").attr("class","wk-chart-container"),p=c.append("g").attr("class","wk-chart-grid-lines"),o=c.append("g").attr("class","wk-chart-area"),o.append("rect").style("visibility","hidden").attr("class","wk-chart-background").style("pointer-events","all").datum({name:"background"}),o.append("rect").attr("class","wk-chart-brush wk-chart-brush-vis wk-chart-brush-extent-marker").style({visibility:"hidden","pointer-events":"none"}),c.append("g").attr("class","wk-chart-marker-area"),c.append("rect").attr("class","wk-chart-brush wk-chart-brush-vis wk-chart-brush-line1").style({visibility:"hidden","pointer-events":"none"}),c.append("rect").attr("class","wk-chart-brush wk-chart-brush-vis wk-chart-brush-line2").style({visibility:"hidden","pointer-events":"none"}),c.append("g").attr("class","wk-chart-brush wk-chart-brush-vis wk-chart-brush-label1").call(h).style({visibility:"hidden","pointer-events":"none"}),c.append("g").attr("class","wk-chart-brush wk-chart-brush-vis wk-chart-brush-label2").call(h).style({visibility:"hidden","pointer-events":"none"})},z.drawChartFrame=function(t,n){var i,u,h,g,w,x,S,C,E,_,N,G,H,j,I,q,R,U,X,Y,W,J,Z;for(C=y.node().getBoundingClientRect(),d=n?0:z.chart().animationDuration(),h=C.height,w=C.width,J=F(a.title(),a.subTitle()),S={top:{height:0,width:0},bottom:{height:0,width:0},left:{height:0,width:0},right:{height:0,width:0}},I={top:0,bottom:0,left:0,right:0},E={width:0,height:0},_={},N=0,R=k.length;R>N;N++)H=k[N],H.showDataLabels()&&(_[H.showDataLabels()]=!0);U=a.allScales().getOwned();for(G in U)W=U[G],W.parentScale()||(W.showAxis()&&(W.axis().scale(W.scale()).orient(W.axisOrient()),x=c.select(".wk-chart-axis.wk-chart-"+W.axisOrient()),S[W.axisOrient()]=V(W),j=c.select(".wk-chart-label.wk-chart-"+W.axisOrient()),W.showLabel()?(j.empty()&&(j=c.insert("g",".wk-chart-area").attr("class","wk-chart-label wk-chart-"+W.axisOrient())),I[W.axisOrient()]=P(j,W.axisLabel(),"wk-chart-label-text wk-chart-"+W.axisOrient(),W.axisLabelStyle())):j.remove()),_[W.kind()]&&(W.isHorizontal()?L=r.dataLabelPadding.hor+T(W.formattedValue(t),c,"wk-chart-data-label",H.dataLabelStyle()).width:M=r.dataLabelPadding.vert+T(W.formattedValue(t),c,"wk-chart-data-label",H.dataLabelStyle()).height));i=J+S.top.height+I.top+S.bottom.height+I.bottom+b.top+b.bottom,u=S.right.width+I.right+S.left.width+I.left+b.left+b.right,v=h>i?h-i:0,m=w>u?w-u:0,X=a.allScales().getOwned();for(G in X)W=X[G],"x"===W.kind()?W.range(_.x?W.reverse()?[m-K-L,K]:[K,m-K-L]:W.reverse()?[m-K,K]:[K,m-K]):"y"===W.kind()&&W.range(_.y?W.reverse()?[M+K,v-K]:[v-K,M+K]:W.reverse()?[K,v-K]:[v-K,K]),W.showAxis()&&!W.parentScale()&&B(W);q=S.left.width+I.left+b.left,Z=J+S.top.height+I.top+b.top,$=c.attr("transform","translate("+q+", "+Z+")"),A.select("#wk-chart-clip-"+s+" rect").attr("width",m).attr("height",v),g=Math.max(m,v),A.selectAll("defs>mask>rect.wk-chart-pattern-mask").attr({x:-g,y:-g,height:2*g,width:2*g}),$.select(".wk-chart-area>.wk-chart-background").attr("width",m).attr("height",v),$.select(".wk-chart-area"),c.selectAll(".wk-chart-axis.wk-chart-right").attr("transform","translate("+m+", 0)"),c.selectAll(".wk-chart-axis.wk-chart-bottom").attr("transform","translate(0, "+v+")"),c.select(".wk-chart-label.wk-chart-left").attr("transform","translate("+(-S.left.width-I.left/2)+", "+v/2+") rotate(-90)"),c.select(".wk-chart-label.wk-chart-right").attr("transform","translate("+(m+S.right.width+I.right/2)+", "+v/2+") rotate(90)"),c.select(".wk-chart-label.wk-chart-top").attr("transform","translate("+m/2+", "+(-S.top.height-I.top/2)+")"),c.select(".wk-chart-label.wk-chart-bottom").attr("transform","translate("+m/2+", "+(v+S.bottom.height+I.bottom)+")"),c.selectAll(".wk-chart-title-area").attr("transform","translate("+m/2+", "+(-Z+D)+")"),Y=a.allScales().getOwned();for(G in Y)W=Y[G],W.parentScale()||W.showAxis()&&W.showGrid()&&O(W);return l.style(a.backgroundStyle()),a.behavior().svg(A),a.behavior().chartArea(o),a.behavior().container(c,S,z.scaleWidth(),z.scaleHeight()),angular.element(o.node()).on("$destroy",function(){return e.log("removing event listeners from",o.attr("class")),o.on(".tooltip",null),o.on(".brush",null),a.behavior().chartArea(void 0),p=void 0,f=void 0,l=void 0})},z.drawSingleAxis=function(e){var t;return e.showAxis()&&(t=$.select(".wk-chart-axis.wk-chart-"+e.axis().orient()),t.call(e.axis()),e.showGrid()&&O(e,!0)),z},z}}]),angular.module("wk.chart").factory("layout",["$log","scale","scaleList","timing",function(e,t,r,n){var a,o;return o=0,a=function(){var e,n,a,i,l,c,s,u,d,f,y,h;return c="layout"+o++,n=void 0,a=void 0,e=void 0,u=r(),d=!1,s=d3.dispatch("configure","drawChart","prepareData","redraw","drawAxis","update","updateAttrs","destroy","objectsSelected","animationStartState","animationEndState"),h=function(){},h.id=function(e){return c},h.chart=function(t){return 0===arguments.length?e:(e=t,u.parentScales(t.scales()),e.lifeCycle().on("configure."+h.id(),function(){return s.configure.apply(h.scales())}),e.lifeCycle().on("drawChart."+h.id(),h.draw),e.lifeCycle().on("prepareData."+h.id(),h.prepareData),e.lifeCycle().on("animationStartState.."+h.id(),h.animationStartState),
e.lifeCycle().on("animationEndState.."+h.id(),h.animationEndState),e.lifeCycle().on("destroy."+h.id(),function(){return s.destroy(),e.lifeCycle().on("."+h.id(),null)}),h)},h.scales=function(){return u},h.scaleProperties=function(){return h.scales().getScaleProperties()},h.container=function(e){return 0===arguments.length?n:(n=e,h)},h.showDataLabels=function(e){return 0===arguments.length?d:(d=e,h)},l={"font-size":"1.3em"},h.dataLabelStyle=function(e){return 0===arguments.length?l:(_.isObject(e)&&_.assign(l,e),h)},i={},h.dataLabelBackgroundStyle=function(e){return 0===arguments.length?i:(_.isObject(e)&&_.assign(i,e),h)},h.behavior=function(){return h.chart().behavior()},h.prepareData=function(e){var t,r,n,a,o;for(t=[],o=["x","y","color","size","shape","rangeX","rangeY"],r=0,a=o.length;a>r;r++)n=o[r],t.push(u.getKind(n));return s.prepareData.apply(e,t)},h.lifeCycle=function(){return s},y=function(){var e,t;return e=n.getChartArea(),t=e.select("."+h.id()),t.empty()&&(t=e.append("g").attr("class",function(e){return h.id()}).style({mask:"url(#wk-chart-brush-mask-"+n.id()+")","clip-path":"url(#wk-chart-clip-"+n.id()+")"})),t},f=function(e,r){var a,o,i,l,c,s;for(c={height:n.height(),width:n.width(),margins:n.margins(),duration:r?0:h.chart().animationDuration()},a=[e,c],s=["x","y","color","size","shape"],o=0,l=s.length;l>o;o++)i=s[o],t=u.getKind(i),a.push(t);return a},h.draw=function(e,t){return a=e,s.drawChart.apply(y(),f(e,t)),s.on("redraw."+c,h.redraw),s.on("update."+c,h.chart().lifeCycle().update),s.on("drawAxis."+c,h.chart().lifeCycle().drawAxis),s.on("updateAttrs."+c,h.chart().lifeCycle().updateAttrs),s.on("destroy."+c,function(){return s.on("."+c,null)})},h.animationStartState=function(e){return s.animationStartState.apply(y(),f(e,!0))},h.animationEndState=function(e){return s.animationEndState.apply(y(),f(e,!1))},h}}]),angular.module("wk.chart").factory("legend",["$log","$compile","$rootScope","$templateCache","wkChartTemplates",function(e,t,r,n,a){var o,i,l;return i=0,l=function(e){var t,r,n,a;for(a={},r=0,n=e.length;n>r;r++)t=e[r],a[t]=0;return Object.keys(a)},o=function(){var o,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S;return s="legend-"+i++,p="top-right",v=void 0,b=void 0,f=void 0,w=a.legendTemplate(),g=void 0,o=void 0,d=void 0,x=void 0,u=void 0,c=void 0,h=void 0,m=!1,k=!1,S={},S.position=function(e){return 0===arguments.length?p:(p=e,S)},S.show=function(n){return 0===arguments.length?m:n===m?S:(m=n,m?(f=r.$new(!0),e.log("creating legend scope",f.$id),g=t(w)(f)):e.log("destroying legend scope",f.$id),S)},S.showValues=function(e){return 0===arguments.length?k:(k=e,S)},S.div=function(e){return 0===arguments.length?d:(d=e,S)},S.layout=function(e){return 0===arguments.length?u:(u=e,S)},S.scale=function(e){return 0===arguments.length?v:(v=e,S)},S.title=function(e){return 0===arguments.length?x:(x=e,S)},S.template=function(e){return 0===arguments.length?b:(b=e,w=n.get(b),S)},y={},S.legendStyle=function(e){return 0===arguments.length?y:(_.isObject(e)&&_.assign(y,e),S)},S.draw=function(e,t){var r,n,a,i,s,u,y,m,k,w;if(c=e,h=t,o=d||d3.select(S.scale().parent().container().element()).select(".wk-chart"),S.show()){if(o.select(".wk-chart-legend").empty()&&angular.element(o.node()).append(g),s=S.showValues()?l(v.value(e)):v.layerKeys(e),w=v.scale(),(null!=(m=S.layout())?m.scales().layerScale():void 0)&&(w=S.layout().scales().layerScale().scale()),n=v.parent().scales().getKind("color").scale(),f.legendRows=s.map("shape"!==v.kind()?function(e){var t,r;return t=n(e),"string"==typeof t?r={fill:t,stroke:t}:(r=t,r.fill=t.color),{value:e,color:r}}:function(e){return{value:e,path:d3.svg.symbol().type(w(e)).size(80)()}}),f.showLegend=!0,f.legendStyle=S.legendStyle(),f.legendStyle.position=d?"relative":"absolute",!d)for(a=o.node().getBoundingClientRect(),r=o.select(".wk-chart-area .wk-chart-background").node().getBoundingClientRect(),k=p.split("-"),i=0,u=k.length;u>i;i++)y=k[i],f.legendStyle[y]=Math.abs(a[y]-r[y])+"px";f.title=x}else g.remove();return S},S.register=function(e){return e.lifeCycle().on("drawChart."+s,S.draw),e.lifeCycle().on("destroy."+s,function(){return f.$destroy(),g.remove(),g=void 0,o=void 0,d=void 0,e.lifeCycle().on("."+s,null)}),S},S.redraw=function(){return c&&h&&S.draw(c,h),S},S}}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("wk.chart").factory("scale",["$log","legend","formatDefaults","wkChartScales","wkChartLocale","maxTicks",function(e,t,r,n,a,o){var i;return i=function(){var i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A,D,M,L,P,B,O,K,F,V,z,T,E,N,G,H,j,I,q,R,U,X,Y,W,J,Z,Q,ee,te,re,ne,ae,oe,ie,le,ce,se,ue,de,fe,ye,he;return k="",O=void 0,U=d3.scale.linear(),X="linear",v=1,S=!1,y=void 0,h=void 0,d=void 0,I=!1,T=d3.set(),M="",D=[],B="",oe="",E=void 0,H=.1,j=.1,N=0,G=0,b=void 0,w=function(e){return isNaN(+e)||_.isDate(e)?e:+e},Y=!1,s=void 0,u=void 0,i=void 0,ne=void 0,Z=void 0,Q=void 0,re=void 0,R=void 0,J=!1,l=void 0,W=!1,q=!1,x=!1,$=!1,A=void 0,V=void 0,z=void 0,f=void 0,L=void 0,P=t(),F=void 0,K=void 0,ae=a.timeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!==e.getDate()}],["%b %d",function(e){return 1!==e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",function(){return!0}]]),fe=function(){},ce=function(e){return _.isArray(e)?_.reject(_.keys(e[0]),function(e){return"$$hashKey"===e}):_.reject(_.keys(e),function(e){return"$$hashKey"===e})},de=function(e,t){return t.reduce(function(t,r){return+t+ +fe.layerValue(e,r)},0)},se=function(e,t){return d3.max(e,function(e){return d3.max(t,function(t){return fe.layerValue(e,t)})})},ue=function(e,t){return d3.min(e,function(e){return d3.min(t,function(t){return fe.layerValue(e,t)})})},ye=function(e){return w.parse?w.parse(e):w(e)},ie={extent:function(e){var t;return t=fe.layerKeys(e),[ue(e,t),se(e,t)]},max:function(e){var t;return t=fe.layerKeys(e),[0,se(e,t)]},min:function(e){var t;return t=fe.layerKeys(e),[0,ue(e,t)]},totalExtent:function(e){var t;return e[0].hasOwnProperty("total")?d3.extent(e.map(function(e){return e.total})):(t=fe.layerKeys(e),d3.extent(e.map(function(e){return de(e,t)})))},total:function(e){var t;return e[0].hasOwnProperty("total")?[0,d3.max(e.map(function(e){return e.total}))]:(t=fe.layerKeys(e),[0,d3.max(e.map(function(e){return de(e,t)}))])},rangeExtent:function(e){var t,r;return fe.upperProperty()?[d3.min(fe.lowerValue(e)),d3.max(fe.upperValue(e))]:e.length>1?(t=fe.lowerValue(e[0]),r=fe.lowerValue(e[1])-t,[fe.lowerValue(e[0]),t+r*e.length]):void 0},rangeMin:function(e){return[0,d3.min(fe.lowerValue(e))]},rangeMax:function(e){var t,r;return fe.upperProperty()?[0,d3.max(fe.upperValue(e))]:(t=fe.lowerValue(e[0]),r=fe.lowerValue(e[1])-t,[0,t+r*e.length])}},he=function(e,t){var r,n,a,i,l,c;for(c=[1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6],i=["seconds","minutes","hours","days","weeks","months","years"],a=i.indexOf(e),-1===a&&(a=3),r=+fe.domainMax()-fe.domainMin();;){if(n=r/c[a],l=n/t,a>=i.length||o>=l)break;a++}return i[a]!==e?d3.time[i[a]](fe.domainMin(),fe.domainMax()):d3.time[i[a]](fe.domainMin(),fe.domainMax(),t)},le=function(){var e,t,r,n,a;if(!S&&fe.tickInterval()&&void 0!==fe.domainMax()&&void 0!==fe.domainMin()){if("time"===X)t=fe.tickInterval().split(":"),n=2===t.length&&d3.time.hasOwnProperty(t[0])?he(t[0],t[1]):void 0;else for(a=Math.abs(Math.floor((fe.domainMax()-fe.domainMin())/fe.tickInterval())),a>o&&fe.tickInterval(Math.floor(fe.domainMax()-fe.domainMin())/o),r=Math.ceil(1+fe.domainMin()/fe.tickInterval())*fe.tickInterval(),n=[],e=0;r<fe.domainMax();)n[e]=r,e++,r+=fe.tickInterval();return fe.tickValues(n)}},fe.id=function(){return A+"."+O+"."+V.id()},fe.orientation=function(e){return 0===arguments.length?O:(O=e,fe)},fe.kind=function(e){return 0===arguments.length?A:(A=e,fe)},fe.parent=function(e){return 0===arguments.length?V:(V=e,fe)},fe.chart=function(e){return 0===arguments.length?f:(f=e,fe)},fe.layout=function(e){return 0===arguments.length?L:(L=e,fe)},C=!1,fe.isParentScale=function(e){return 0===arguments.length?C:(C=e,fe)},fe.parentScale=function(e){return 0===arguments.length?z:(z=e,z.isParentScale(!0),fe)},fe.scale=function(){return U},fe.legend=function(){return P},fe.isOrdinal=function(){return S},fe.isHorizontal=function(e){return 0===arguments.length?x:(x=e,e&&(fe.axisOrient()||fe.axisOrient("bottom"),$=!1),fe)},fe.isVertical=function(e){return 0===arguments.length?$:($=e,e&&(fe.axisOrient()||fe.axisOrient("left"),x=!1),fe)},fe.scaleType=function(t){var a;if(0===arguments.length)return X;if(a=t!==X,d3.scale.hasOwnProperty(t))U=d3.scale[t](),X=t,fe.format(r.number);else if("time"===t)U=d3.time.scale(),X="time",b&&fe.dataFormat(b),fe.format(r.date);else{if(!n.hasOwnProperty(t))return void e.error("Error: illegal scale type:",t);X=t,U=n[t](),"ordinalPadding"===t&&(U.padding(H,j),U.outerPadding(N,G))}return a&&fe.chart().prepareScaleHierarchy(),S=_.has(U,"rangeBand"),E&&fe.range(E),Y&&i.scale(U),v&&"pow"===X&&U.exponent(v),fe},fe.exponent=function(e){return 0===arguments.length?v:(v=e,"pow"===X&&U.exponent(v),fe)},fe.scaleMapFn=function(e){return 0===arguments.length?U.mapFn?U.mapFn():void 0:(_.isFunction(e)&&U.mapFn&&U.mapFn(e),fe)},fe.domain=function(e){return 0===arguments.length?y:(y=e,_.isArray(y)&&U.domain(y),fe)},fe.domainCalc=function(t){return 0===arguments.length?S?void 0:h:(ie.hasOwnProperty(t)?h=t:e.error("illegal domain calculation rule:",t," expected",_.keys(ie)),fe)},p=void 0,fe.domainMin=function(e){return 0===arguments.length?p||d[0]:(p=ye(e),fe)},g=void 0,g=void 0,fe.domainMax=function(e){return 0===arguments.length?g||d[1]:(g=ye(e),fe)},fe.getDomain=function(e){return 0===arguments.length?U.domain():!y&&fe.domainCalc()?(p&&(d[0]=p),g&&(d[1]=g),le(),d):y?y:fe.value(e)},fe.resetOnNewData=function(e){return 0===arguments.length?I:(I=e,fe)},fe.range=function(e){var t;return 0===arguments.length?U.range():(E=e,!S||"x"!==(t=fe.kind())&&"y"!==t?"category10"!==X&&"category20"!==X&&"category20b"!==X&&"category20c"!==X&&U.range(e):"ordinalPadding"!==X?U.rangeBands(e,H,N):U.rangeBands(e),fe)},fe.rangePadding=function(e){return 0===arguments.length?{paddingLeft:H,paddingRight:j,outerPaddingLeft:N,outerPaddingRight:G}:(H=e.paddingLeft,j=e.paddingRight,N=e.outerPaddingLeft,G=e.outerPaddingRight,"ordinalPadding"===X&&(U.padding(H,j),U.outerPadding(N,G)),fe)},fe.property=function(e){return 0===arguments.length?T.values():(e&&fe.addProperty(e),fe)},fe.addProperty=function(e){var t,r,n,a;if(_.isArray(e)){for(a=[],t=0,r=e.length;r>t;t++)n=e[t],a.push(T.add(n));return a}return T.add(e)},fe.layerProperty=function(e){return 0===arguments.length?M:(M=e,fe)},fe.layerExclude=function(e){return 0===arguments.length?D:(D=e,fe)},fe.layerKeys=function(e){return T.size()>0?_.intersection(T.values(),ce(e)):_.reject(ce(e),function(e){return indexOf.call(D,e)>=0})},fe.lowerProperty=function(e){return 0===arguments.length?B:(B=e,fe)},fe.upperProperty=function(e){return 0===arguments.length?oe:(oe=e,fe)},fe.dataFormat=function(e){return 0===arguments.length?b:(b=e,w="time"===X?a.timeFormat(e):function(e){return e},fe)},fe.value=function(e){var t;return t=T.values()[0],e?M?_.isArray(e)?e.map(function(e){return ye(e[t][M])}):ye(e[t][M]):_.isArray(e)?e.map(function(e){return ye(e[t])}):ye(e[t]):void 0},fe.layerValue=function(e,t){return e?ye(M?e[t][M]:e[t]):void 0},fe.formattedValue=function(e){return _.isArray(e)?e.map(function(e){return fe.formatValue(fe.value(e))}):fe.formatValue(fe.value(e))},fe.formattedLayerValue=function(e,t){return _.isArray(e)?e.map(function(e){return fe.formatValue(fe.layerValue(e,t))}):fe.formatValue(fe.layerValue(e,t))},fe.formatValue=function(e){return F&&e&&(_.isDate(e)||_.isFinite(e))?K(e):e},fe.parsedValue=function(e){return ye(e)},fe.map=function(e,t){return t?Array.isArray(e)?e.map(function(r){return U(fe.layerValue(e,t))}):U(fe.layerValue(e,t)):Array.isArray(e)?e.map(function(t){return U(fe.value(e))}):U(fe.value(e))},fe.invert=function(e){var t,r,n,a,o;return _.has(fe.scale(),"invert")?(n=(U.range()[1]-U.range()[0])/f.getData().length,U.invert(e-n/2)):_.has(fe.scale(),"invertExtent")?fe.scale().invertExtent(e):fe.isOrdinal()&&fe.resetOnNewData()?(t=U.domain(),o=U.range(),o[0]>o[1]?(a=o[0]-o[1],r=o.length-Math.floor(e/a)-1,0>r&&(r=0)):(a=o[1]-o[0],r=Math.floor(e/a),r>=o.length&&(r=o.length-1)),t[r]):void 0},fe.findIndex=function(e){var t,r,n;return t=fe.chart().getData(),S?_.findIndex(t,function(t){return e===fe.value(t)}):_.isArray(e)&&2===e.length?void 0:(r=d3.bisector(fe.value).left,n=r(t,e),n=0>n?0:n>=t.length?t.length-1:n)},fe.find=function(e){return fe.chart().getData()[fe.findIndex(e)]},fe.showAxis=function(e){return 0===arguments.length?Y:(Y=e,e?(i=d3.svg.axis(),"time"===fe.scaleType()&&i.tickFormat(ae)):i=void 0,fe)},fe.axisOrient=function(e){return 0===arguments.length?s:(u=s,s=e,fe)},fe.axisOrientOld=function(e){return 0===arguments.length?u:(u=e,fe)},fe.axis=function(){return i},fe.ticks=function(e){return 0===arguments.length?ne:(ne=e,fe.axis()&&fe.axis().ticks(ne),fe)},fe.tickInterval=function(e){return 0===arguments.length?Q:(S||("time"!==X?Q=ye(e):/\w+:\d+/.test(e)&&(Q=e)),fe)},fe.tickFormat=function(e){return 0===arguments.length?Z:(Z=e,fe.axis()&&fe.axis().tickFormat(e),fe)},fe.tickValues=function(e){return 0===arguments.length?re:(re=e,fe.axis()&&fe.axis().tickValues(e),fe)},te={"font-size":"1em"},fe.tickLabelStyle=function(e){return 0===arguments.length?te:(_.isObject(e)&&_.assign(te,e),fe)},ee={},fe.tickLabelBackgroundStyle=function(e){return 0===arguments.length?ee:(_.isObject(e)&&_.assign(ee,e),fe)},fe.showLabel=function(e){return 0===arguments.length?J:(J=e,fe)},fe.axisLabel=function(e){return 0===arguments.length?l?l:fe.property()[0]:(l=e,fe)},c={"font-size":"1.5em"},fe.axisLabelStyle=function(e){return 0===arguments.length?c:(_.isObject(e)&&_.assign(c,e),fe)},fe.rotateTickLabels=function(e){return 0===arguments.length?R:(R=e,fe)},fe.format=function(e){return 0===arguments.length?F:(F=e.length>0?e:"time"===fe.scaleType()?r.date:r.number,K="time"===fe.scaleType()?a.timeFormat(F):a.numberFormat(F),fe)},fe.showGrid=function(e){return 0===arguments.length?W:(W=e,fe)},m={stroke:"lightgrey","stroke-width":1},fe.gridStyle=function(e){return 0===arguments.length?m:(_.isObject(e)&&_.assign(m,e),fe)},fe.reverse=function(e){return 0===arguments.length?q:(q=e,fe)},fe.register=function(){return fe.chart().lifeCycle().on("scaleDomains."+fe.id(),function(t){var r;return fe.parentScale()?U.domain(fe.parentScale().scale().domain()):fe.resetOnNewData()?(r=fe.getDomain(t),"linear"===X&&_.some(r,isNaN)?e.error("Scale "+fe.kind()+", Type '"+X+"': cannot compute domain for property '"+T+"' . Possible reasons: property not set, data not compatible with defined type. Domain:"+r):U.domain(r)):void 0}),fe.chart().lifeCycle().on("prepareData."+fe.id(),function(e){var t,r,n,a,o,i,l,c,s,u;l=fe.chart().allScales().getOwned();for(n in l)u=l[n],u.parentScale()&&u.parentScale().addProperty(u.property());r=d3.set(),c=fe.chart().allScales().getOwned();for(n in c)if(u=c[n],u!==fe&&u.parentScale()!==fe)for(s=u.property(),a=0,o=s.length;o>a;a++)i=s[a],r.add(i);return fe.layerExclude(r.values()),t=fe.domainCalc(),t&&ie[t]?d=ie[t](e):void 0}),fe.chart().lifeCycle().on("destroy."+fe.id(),function(){return fe.chart().lifeCycle().on("."+fe.id(),null)})},fe.update=function(e){return fe.parent().lifeCycle().update(e),fe},fe.updateAttrs=function(){return fe.parent().lifeCycle().updateAttrs()},fe.drawAxis=function(){return fe.parent().lifeCycle().drawAxis(),fe},fe}}]),angular.module("wk.chart").factory("scaleList",["$log",function(e){var t;return t=function(){var t,r,n,a,o,i,l;return n={},t={},o={},a=void 0,i=[],r=void 0,l=function(){},l.owner=function(e){return 0===arguments.length?a:(a=e,l)},l.add=function(r){return n[r.id()]&&e.error("scaleList.add: scale "+r.id()+" already defined in scaleList of "+a.id()+". Duplicate scales are not allowed"),n[r.id()]=r,t[r.kind()]=r,l},l.hasScale=function(e){return n.hasOwnProperty(e.id())},l.getKind=function(e,r){var a,i;if(r){for(a in n)if(i=n[a],i.kind()===e&&i.orientation()===r)return i;return void 0}return t[e]?t[e]:o.getKind?o.getKind(e):void 0},l.hasKind=function(e,t){var r,a;if(t){for(r in n)if(a=n[r],a.kind()===e&&a.orientation()===t)return!0;return!1}return!!l.getKind(e)},l.remove=function(t){return n[t.id()]?(delete n[t.id()],delete l[t.id],l):(e.warn("scaleList.delete: scale "+t.id()+" not defined in scaleList of "+a.id()+". Ignoring"),l)},l.parentScales=function(e){return 0===arguments.length?o:(o=e,l)},l.getOwned=function(){return n},l.allKinds=function(){var e,r,n,a;if(n={},o.allKinds){r=o.allKinds();for(e in r)a=r[e],n[e]=a}for(e in t)a=t[e],n[e]=a;return n},l.requiredScales=function(e){var t,r,n;if(0===arguments.length)return i;for(i=e,t=0,n=e.length;n>t;t++)if(r=e[t],!l.hasKind(r))throw"Fatal Error: scale '"+r+"' required but not defined";return l},l.getScales=function(e){var t,r,n,a;for(n={},t=0,a=e.length;a>t;t++){if(r=e[t],!l.hasKind(r))throw"Fatal Error: scale '"+r+"' required but not defined";n[r]=l.getKind(r)}return n},l.getScaleProperties=function(){var e,t,r,n,a;t=[],n=l.allKinds();for(e in n)a=n[e],r=a.property(),r.length>0&&t.concat(r);return t},l.layerScale=function(e){return 0===arguments.length?r?l.getKind(r):void 0:(r=e,l)},l}}]),angular.module("wk.chart").factory("wkArea",["$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x;return v=function(){},l=void 0,f=void 0,c={},s=!1,e=!1,d=!1,m=0,t="area"+o++,y=void 0,g=void 0,i=0,u=.5,x=n(),p=a(),b=r(),w=function(e,t,r,n,a){return x.keyScale(r).valueScale(n).data(e),x.isInitial()?void 0:(g=x.animationStartLayers(),h.apply(this,[!1,g,t,r,n,a]))},k=function(e,t,r,n,a){return p.active(s),g=x.animationEndLayers(),h.apply(this,[!0,g,t,r,n,a])},h=function(t,r,n,a,o,l){var c,s,h,g;return g=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=l.scale()(t.layerKey),"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a))},m=a.isOrdinal()?a.scale().rangeBand()/2:0,f&&(f.data(r),b.layout(r)),y=d3.svg.area().x(function(e){return a.scale()(e.targetKey)}).y(function(e){return o.scale()(e.layerAdded||e.layerDeleted?0:e.value)}).y1(function(e){return o.scale()(0)}),d&&y.interpolate("cardinal"),s=this.selectAll(".wk-chart-layer").data(r,function(e){return e.layerKey}),c=s.enter().append("g").attr("class","wk-chart-layer"),c.append("path").attr("class","wk-chart-area-path").attr("d",function(e){return y(e.values)}).style("opacity",i).style("pointer-events","none"),h=s.select(".wk-chart-area-path").attr("transform","translate("+m+")").each(g),h=t?h.transition().duration(n.duration):h,h.attr("d",function(e){return y(e.values)}).style("opacity",function(e){return e.added||e.deleted?0:u}),s.exit().remove(),p.x(function(e){return a.scale()(e.targetKey)+(a.isOrdinal()?a.scale().rangeBand()/2:0)}).y(function(e){return o.scale()(e.layerAdded||e.layerDeleted?0:e.value)}).color(function(e){var t;return t=l.scale()(e.layerKey),"string"==typeof t?t:t.color}).keyScale(a.scale()),s.call(p,t)},v.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return c=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),f=l.behavior().tooltip,b.keyScale(c.x).valueScale(c.y).colorScale(c.color).value(function(e){return e.value}),f.markerScale(c.x),f.on("enter."+t,b.enter),f.on("moveData."+t,b.moveData),f.on("moveMarker."+t,b.moveMarkers)}),l.lifeCycle().on("animationStartState."+t,w),l.lifeCycle().on("animationEndState."+t,k),l.lifeCycle().on("destroy."+t,function(){return l.lifeCycle().on("."+t,null),f.on("."+t,null)}),v)},v.markers=function(e){return 0===arguments.length?s:(s=e,v)},v.spline=function(e){return 0===arguments.length?d:(d=e,v)},v.areaStyle=function(t){return 0===arguments.length?e:(e=t,v)},v}}]),angular.module("wk.chart").factory("wkAreaStacked",["$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A;return v=function(){},i=void 0,S=d3.layout.stack(),k="zero",h=null,c=!1,u=!1,C=[],f=void 0,e=void 0,d=void 0,l={},w=void 0,m=0,t="areaStacked"+o++,s=.5,A=n(),p=a(),g=void 0,$=r(),S.values(function(e){return e.values}).y(function(e){return e.layerAdded||e.layerDeleted?0:e.value}).x(function(e){return e.targetKey}),x=function(e,t,r,n,a){return A.keyScale(r).valueScale(n).data(e),A.isInitial()?void 0:(g=A.animationStartLayers(),y.apply(this,[!1,g,t,r,n,a]))},b=function(e,t,r,n,a){return p.active(c),g=A.animationEndLayers(),y.apply(this,[!0,g,t,r,n,a])},y=function(t,r,n,a,o,i){var l,c,y,g;return y=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a))},C=S(r),m=a.isOrdinal()?a.scale().rangeBand()/2:0,d&&(d.data(r),$.layout(r)),h||(h=this.selectAll(".wk-chart-layer")),"expand"===k?(w=o.scale().copy(),w.domain([0,1])):w=o.scale(),f=d3.svg.area().x(function(e){return a.scale()(e.targetKey)}).y0(function(e){return w(e.y0+e.y)}).y1(function(e){return w(e.y0)}),u&&f.interpolate("cardinal"),h=h.data(C,function(e){return e.layerKey}),l=h.enter().append("g").attr("class","wk-chart-layer"),l.append("path").attr("class","wk-chart-area-path").style("pointer-events","none").style("opacity",0),c=h.select(".wk-chart-area-path").attr("transform","translate("+m+")").each(y),g=t?c.transition().duration(n.duration):c,g.attr("d",function(e){return f(e.values)}).style("opacity",s),h.exit().remove(),p.x(function(e){return a.scale()(e.targetKey)+(a.isOrdinal()?a.scale().rangeBand()/2:0)}).y(function(e){return w(e.y+e.y0)}).color(function(e){var t;return t=i.scale()(e.layerKey),"string"==typeof t?t:t.color}).keyScale(a.scale()),h.call(p,t)},v.layout=function(e){return 0===arguments.length?i:(i=e,i.lifeCycle().on("configure",function(){return l=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("y").domainCalc("total").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),d=i.behavior().tooltip,$.keyScale(l.x).valueScale(l.y).isStacked(!0).colorScale(l.color).value(function(e){return e.y+e.y0}),d.markerScale(l.x),d.on("enter."+t,$.enter),d.on("moveData."+t,$.moveData),d.on("moveMarker."+t,$.moveMarkers)}),i.lifeCycle().on("animationStartState."+t,x),i.lifeCycle().on("animationEndState."+t,b),i.lifeCycle().on("destroy."+t,function(){return i.lifeCycle().on("."+t,null),d.on("."+t,null)}),v)},v.offset=function(e){return 0===arguments.length?S.offset():(S.offset(e),v)},v.markers=function(e){return 0===arguments.length?c:(c=e,v)},v.spline=function(e){return 0===arguments.length?u:(u=e,v)},v.areaStyle=function(t){return 0===arguments.length?e:(e=t,v)},v}}]),angular.module("wk.chart").factory("wkAreaStackedVertical",["$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$;return v=function(){},i=void 0,x=d3.layout.stack(),k="zero",h=null,c=!1,e={},u=!1,S=[],f=void 0,d=void 0,l={},m=0,t="areaStackedVert"+o++,s=.5,$=n(),p=a(),C=r(),g=void 0,x.values(function(e){return e.values}).y(function(e){return e.layerAdded||e.layerDeleted?0:e.value}).x(function(e){return e.targetKey}),b=function(e,t,r,n,a){return $.keyScale(n).valueScale(r).data(e),$.isInitial()?void 0:(g=$.animationStartLayers(),y.apply(this,[!1,g,t,r,n,a]))},w=function(e,t,r,n,a){return p.active(c),g=$.animationEndLayers(),y.apply(this,[!0,g,t,r,n,a])},y=function(t,r,n,a,o,i){var l,c,y,g,v;return g=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a))},S=x(r),m=o.isOrdinal()?o.scale().rangeBand()/2:0,d&&(d.data(r),C.layout(r)),h||(h=this.selectAll(".wk-chart-layer")),"expand"===k?(y=a.scale().copy(),y.domain([0,1])):y=a.scale(),f=d3.svg.area().x(function(e){return-o.scale()(e.targetKey)}).y0(function(e){return y(e.y0+e.y)}).y1(function(e){return y(e.y0)}),u&&f.interpolate("cardinal"),h=h.data(S,function(e){return e.layerKey}),l=h.enter().append("g").attr("class","wk-chart-layer"),l.append("path").attr("class","wk-chart-area-path").style("pointer-events","none").style("opacity",0),c=h.select(".wk-chart-area-path").attr("transform","translate("+m+")rotate(-90)").each(g),v=t?c.transition().duration(n.duration):c,v.attr("d",function(e){return f(e.values)}).style("opacity",s),h.exit().remove(),p.x(function(e){return y(e.y+e.y0)}).y(function(e){return o.scale()(e.targetKey)+(o.isOrdinal()?o.scale().rangeBand()/2:0)}).color(function(e){var t;return t=i.scale()(e.layerKey),"string"==typeof t?t:t.color}).keyScale(o.scale()).isVertical(!0),h.call(p,t)},v.layout=function(e){return 0===arguments.length?i:(i=e,i.lifeCycle().on("configure",function(){return l=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("x").domainCalc("total").resetOnNewData(!0),this.getKind("y").resetOnNewData(!0).domainCalc("extent"),d=i.behavior().tooltip,C.keyScale(l.y).valueScale(l.x).isStacked(!0).colorScale(l.color).value(function(e){return e.y+e.y0}),d.markerScale(l.y),d.on("enter."+t,C.enter),d.on("moveData."+t,C.moveData),d.on("moveMarker."+t,C.moveMarkers)}),i.lifeCycle().on("animationStartState."+t,b),i.lifeCycle().on("animationEndState."+t,w),i.lifeCycle().on("destroy."+t,function(){return i.lifeCycle().on("."+t,null),d.on("."+t,null)}),v)},v.offset=function(e){return 0===arguments.length?x.offset():(x.offset(e),v)},v.markers=function(e){return 0===arguments.length?c:(c=e,v)},v.spline=function(e){return 0===arguments.length?u:(u=e,v)},v.areaStyle=function(t){return 0===arguments.length?e:(e=t,v)},v}}]),angular.module("wk.chart").factory("wkAreaVertical",["$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C;return k=function(){},c=void 0,y=void 0,h=void 0,t=void 0,s={},f=!1,u=!1,e={},w=0,g=void 0,i="areaVertical"+o++,d=.5,v=void 0,l=0,C=n(),m=a(),S=r(),x=function(e,t,r,n,a){return C.keyScale(n).valueScale(r).data(e),C.isInitial()?void 0:(v=C.animationStartLayers(),p.apply(this,[!1,v,t,r,n,a]))},b=function(e,t,r,n,a){return m.active(u),v=C.animationEndLayers(),p.apply(this,[!0,v,t,r,n,a])},p=function(t,r,n,a,o,i){var c,s,u,h;return h=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a))},w=o.isOrdinal()?o.scale().rangeBand()/2:0,y&&(y.data(r),S.layout(r)),g=d3.svg.area().y(function(e){return o.scale()(e.targetKey)}).x(function(e){return a.scale()(e.layerAdded||e.layerDeleted?0:e.value)}).x1(function(e){return a.scale()(0)}),f&&g.interpolate("cardinal"),s=this.selectAll(".wk-chart-layer").data(r,function(e){return e.layerKey}),c=s.enter().append("g").attr("class","wk-chart-layer"),c.append("path").attr("class","wk-chart-area-path").attr("d",function(e){return g(e.values)}).style("opacity",l).style("pointer-events","none"),u=s.select(".wk-chart-area-path").attr("transform","translate(0,"+w+")").style("pointer-events","none"),u.each(h),u=t?u.transition().duration(n.duration):u,u.attr("d",function(e){return g(e.values)}).style("opacity",function(e){return e.added||e.deleted?0:d}),s.exit().remove(),m.isVertical(!0).x(function(e){return a.scale()(e.layerAdded||e.layerDeleted?0:e.value)}).y(function(e){return o.scale()(e.targetKey)+(o.isOrdinal()?o.scale().rangeBand()/2:0)}).color(function(e){var t;return t=i.scale()(e.layerKey),"string"==typeof t?t:t.color}).keyScale(o.scale()),s.call(m,t)},k.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),y=c.behavior().tooltip,S.keyScale(s.y).valueScale(s.x).colorScale(s.color).value(function(e){return e.value}),y.markerScale(s.y),y.on("enter."+i,S.enter),y.on("moveData."+i,S.moveData),y.on("moveMarker."+i,S.moveMarkers)}),c.lifeCycle().on("animationStartState."+i,x),c.lifeCycle().on("animationEndState."+i,b),c.lifeCycle().on("destroy."+i,function(){return c.lifeCycle().on("."+i,null),y.on("."+i,null)}),k)},k.markers=function(e){return 0===arguments.length?u:(u=e,k)},k.spline=function(e){return 0===arguments.length?f:(f=e,k)},k.areaStyle=function(t){return 0===arguments.length?e:(e=t,k)},k}}]),angular.module("wk.chart").factory("wkBar",["$log","utils","barConfig","dataLabelFactory","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i,l;return i=0,l=function(){var e,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x;return m=function(){},l="bars"+i++,c=void 0,h=null,y=0,f=0,s={},u=void 0,e={},g=_.clone(r,!0),x=a(),b=o(),p=n(),d=void 0,w=function(e,t,r,n,a){var o;return x.keyScale(n).valueScale(r).data(e,!0),x.isInitial()?void 0:(o=x.animationStartLayers(),v.apply(this,[!1,o,t,r,n,a]))},k=function(e,t,r,n,a){var o;return o=x.animationEndLayers(),p.duration(t.duration).active(c.showDataLabels()),v.apply(this,[!0,o,t,r,n,a])},v=function(t,r,n,a,o,i){var l,s,f,y,v,m,k,w;return w=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=0===i.property().length?i.scale()(t.layerKey):i.map(t.data),"string"==typeof a?n.style({fill:a}):(r=a.color,a.fill=r,n.style(a))},l=!i.property()&&i.isOrdinal(),b.colorByKey(l),h||(h=this.selectAll(".wk-chart-layer")),s=o.scale().rangeBand(),y=s/(1-g.paddingLeft)*g.paddingLeft,f=s/(1-g.outerPaddingLeft)*g.outerPaddingLeft,m=function(e){if(o.reverse()){if(e.deleted&&e.highBorder)return s+y/2;if(e.deleted)return-y/2;if(e.added&&e.atBorder)return s+y/2;if(e.added)return-y/2}else{if(e.deleted&&e.highBorder)return-y/2;if(e.deleted)return s+y/2;if(e.added&&e.atBorder)return-y/2;if(e.added)return s+y/2}return 0},h=h.data(r[0].values,function(e,t){return e.key}),v=h.enter().append("g").attr("class","wk-chart-layer").attr("transform",function(e){return"translate(0, "+(o.scale()(e.targetKey)+m(e))+")"}),v.append("rect").attr("class","wk-chart-rect wk-chart-selectable").attr("height",function(e){return e.added||e.deleted?0:s}).style("opacity",0).call(d.tooltip).call(u),(t?h.transition().duration(n.duration):h).attr("transform",function(e){return"translate(0, "+(o.scale()(e.targetKey)+m(e))+") scale(1,1)"}),k=h.select("rect.wk-chart-rect").each(w),(t?k.transition().duration(n.duration):k).attr("height",function(e){return e.added||e.deleted?0:s}).attr("width",function(e){return Math.abs(a.scale()(0)-a.scale()(e.targetValue))}).attr("x",function(e){return Math.min(a.scale()(0),a.scale()(e.targetValue))}).style("opacity",1),h.exit().remove(),h.call(p,t,c.dataLabelStyle(),c.dataLabelBackgroundStyle())},m.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.getKind("x").domainCalc("max").resetOnNewData(!0),this.getKind("y").resetOnNewData(!0).rangePadding(g).scaleType("ordinal"),d=c.behavior().tooltip,u=c.behavior().selected,b.keyScale(s.y).valueScale(s.x).colorScale(s.color).value(function(e){return e.value}),d.on("enter."+l,b.enter),p.keyScale(s.y).valueScale(s.x)}),c.lifeCycle().on("animationStartState."+l,w),c.lifeCycle().on("animationEndState."+l,k),c.lifeCycle().on("destroy."+l,function(){return c.lifeCycle().on("."+l,null),d.on("."+l,null)}),m)},m.rangePadding=function(e){return g=t.parsePadding(e,g,r),0===arguments.length?s.y.rangePadding():(s.y.rangePadding(g),m)},m.barStyle=function(t){
return 0===arguments.length?e:(e=t,m)},m}}]),angular.module("wk.chart").factory("wkBarClustered",["$log","utils","barConfig","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$;return w=function(){},c=void 0,l="clusteredBar"+o++,k=null,i={},g=void 0,h=0,y=0,f=0,p=_.clone(r,!0),$=n(),C=a(),m=!0,S=d3.layout.stack(),S.values(function(e){return e.values}).y(function(e){return e.layerDeleted||e.layerAdded||e.deleted||e.added?0:f}).x(function(e){return e.layerKey}),d=void 0,u=void 0,s={},x=function(e,t,r,n,a){var o;return $.keyScale(n).valueScale(r).data(e,!0),$.isInitial()?void 0:(o=$.animationStartLayers(),v.apply(this,[!1,o,t,r,n,a]))},b=function(e,t,r,n,a){var o;return o=$.animationEndLayers(),v.apply(this,[!0,o,t,r,n,a])},v=function(t,r,n,a,o,l){var c,s,v,w,b,x,C,$;return C=function(e){var t,r,n;return r=d3.select(this),r.style(i),n=l.scale()(e.layerKey),"string"==typeof n?r.style({fill:n}):(t=n.color,n.fill=t,r.style(n))},b=r.filter(function(e){return!e.added&&!e.deleted}).map(function(e){return e.layerKey}),v=o.scale().rangeBand(),g=d3.scale.ordinal().domain(b).rangeBands([0,v],0,0),f=g.rangeBand(),w=v/(1-p.paddingLeft)*p.paddingLeft,c=v/(1-p.outerPaddingLeft)*p.outerPaddingLeft,x=function(e){if(o.reverse()){if(e.deleted&&e.highBorder)return v+w/2;if(e.deleted)return-w/2;if(e.added&&e.atBorder)return v+w/2;if(e.added)return-w/2}else{if(e.deleted&&e.highBorder)return-w/2;if(e.deleted)return v+w/2;if(e.added&&e.atBorder)return-w/2;if(e.added)return v+w/2}return 0},$=S(r),e.log($),k||(k=this.selectAll(".wk-chart-layer")),k=k.data($,function(e){return e.layerKey}),k.enter().append("g").attr("class","wk-chart-layer"),k.exit().remove(),s=k.selectAll(".wk-chart-rect").data(function(e){return e.values},function(e){return e.layerKey+"|"+e.key}),s.enter().append("rect").attr("class","wk-chart-rect wk-chart-selectable").style("opacity",0).call(d.tooltip).call(u),s.each(C),(t?s.transition().duration(n.duration):s).attr("y",function(e){return o.scale()(e.targetKey)+e.y0+x(e)}).attr("height",function(e){return e.y}).attr("width",function(e){return Math.abs(a.scale()(e.targetValue)||0)}).attr("x",function(e){return Math.min(a.scale()(0),a.scale()(e.targetValue))}).style("opacity",1),s.exit().remove(),m=!1,h=w,y=c},w.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.getKind("x").domainCalc("max").resetOnNewData(!0),this.getKind("y").resetOnNewData(!0).rangePadding(p).scaleType("ordinal"),this.layerScale("color"),d=c.behavior().tooltip,d.on("enter."+l,C.enter),u=c.behavior().selected,C.keyScale(s.y).valueScale(s.x).colorScale(s.color).value(function(e){return e.value})}),c.lifeCycle().on("animationStartState."+l,x),c.lifeCycle().on("animationEndState."+l,b),c.lifeCycle().on("destroy."+l,function(){return c.lifeCycle().on("."+l,null),d.on("."+l,null)}),w)},w.rangePadding=function(e){return 0===arguments.length?s.y.rangePadding():(p=t.parsePadding(e,p,r),s.y.rangePadding(p),w)},w.barStyle=function(e){return 0===arguments.length?i:(i=e,w)},w}}]),angular.module("wk.chart").factory("wkBarStacked",["$log","utils","barConfig","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,i,l,c,s,u,d,f,y,h,g,p,v,m,k;return h=function(){},l=void 0,i="stackedBar"+o++,y=null,u=void 0,c={},s=void 0,e={},d=_.clone(r,!0),k=n(),m=a(),v=d3.layout.stack(),v.values(function(e){return e.values}).y(function(e){return e.layerAdded||e.layerDeleted?0:e.targetValue}).x(function(e){return e.targetKey}),p=function(e,t,r,n,a){var o;return k.keyScale(n).valueScale(r).data(e,!0),k.isInitial()?void 0:(o=k.animationStartLayers(),f.apply(this,[!1,o,t,r,n,a]))},g=function(e,t,r,n,a){var o;return o=k.animationEndLayers(),f.apply(this,[!0,o,t,r,n,a])},f=function(t,r,n,a,o,i){var l,c,f,h,g,p;return g=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a}):(r=a.color,a.fill=r,n.style(a))},y||(y=this.selectAll(".wk-chart-layer")),c=o.scale().rangeBand()/(1-d.paddingLeft)*d.paddingLeft,p=v(r),y=y.data(p,function(e){return e.layerKey}),l=o.scale().rangeBand(),h=function(e){if(o.reverse()){if(e.deleted&&e.highBorder)return l+c/2;if(e.deleted)return-c/2;if(e.added&&e.atBorder)return l+c/2;if(e.added)return-c/2}else{if(e.deleted&&e.highBorder)return-c/2;if(e.deleted)return l+c/2;if(e.added&&e.atBorder)return-c/2;if(e.added)return l+c/2}return 0},y.enter().append("g").attr("class","wk-chart-layer"),y.exit().remove(),f=y.selectAll(".wk-chart-rect"),f=f.data(function(e){return e.values},function(e){return e.key.toString()+"|"+e.layerKey.toString()}),f.enter().append("rect").attr("class","wk-chart-rect wk-chart-selectable").style("opacity",0).style("opacity",0).call(u.tooltip).call(s),f.each(g),(t?f.transition().duration(n.duration):f).attr("x",function(e){return a.scale()(e.y0)}).attr("width",function(e){return a.scale()(e.y)}).attr("height",function(e){return e.added||e.deleted?0:l}).attr("y",function(e){return o.scale()(e.targetKey)+h(e)}).style("opacity",1),f.exit().remove()},h.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return c=this.getScales(["x","y","color"]),this.getKind("x").domainCalc("total").resetOnNewData(!0),this.getKind("y").resetOnNewData(!0).rangePadding(d).scaleType("ordinal"),this.layerScale("color"),u=l.behavior().tooltip,s=l.behavior().selected,u.on("enter."+i,m.enter),m.keyScale(c.y).valueScale(c.x).colorScale(c.color).value(function(e){return e.value})}),l.lifeCycle().on("animationStartState."+i,p),l.lifeCycle().on("animationEndState."+i,g),l.lifeCycle().on("destroy."+i,function(){return l.lifeCycle().on("."+i,null),u.on("."+i,null)}),h)},h.rangePadding=function(e){return 0===arguments.length?c.y.rangePadding():(d=t.parsePadding(e,d,r),c.y.rangePadding(d),h)},h.barStyle=function(t){return 0===arguments.length?e:(e=t,h)},h}}]),angular.module("wk.chart").factory("wkBoxPlot",["$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i,l;return i=0,l=function(){var e,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x;return v=function(){},c=void 0,l="boxPlot"+i++,e={},f=void 0,u=void 0,s={},d=!1,m=0,g=void 0,y=_.clone(r,!0),x=n(),p=a(),b=o(),w=function(e,t,r,n,a,o){return x.keyScale(r).valueScale(n).data(e,!0),x.isInitial()?void 0:(g=x.animationStartLayers(),h.apply(this,[!1,g,t,r,n,a]))},k=function(e,t,r,n,a,o){return p.active(d),g=x.animationEndLayers(),h.apply(this,[!0,g,t,r,n,a])},h=function(t,r,n,a,o,i){var l,c,s,d,h,g,p,v,k,w,x,S,C,$,A,D,M,L,P,B,O,K,F;for(L=function(t,r,n){return t.each(function(t){var a,o,l;return o=d3.select(this),o.style(e),l=i.scale()(t[r].property),"string"==typeof l?o.style(n?{fill:l}:{fill:l,stroke:l}):(a=l.color,l.fill=a,o.style(l))})},c=a.scale().rangeBand(),l=c/(1-y.paddingLeft)*y.paddingLeft,m=o.isOrdinal()?c/2:0,f&&(f.data(r),b.layout(r)),m=function(e){return e.deleted&&e.atBorder?c:e.deleted?-l/2:e.added&&e.atBorder?c+l/2:e.added?-l/2:0},M=[],h=0,B=!1,P=!1,3===r.length?A=["lq","med","uq"]:5===r.length&&(A=["min","lq","med","uq","max"],B=P=!0),k=o.property();h<r[0].values.length;){for(D={},D.key=r[0].values[h].key,D.targetKey=r[0].values[h].targetKey,D.data=r[0].values[h].data,D.added=r[0].values[h].added,D.deleted=r[0].values[h].deleted,g=p=0,w=A.length;w>p;g=++p)$=A[g],D[$]={},D[$].val=r[g].values[h].targetValue,D[$].property=k[g];M.push(D),h++}return s=this.selectAll(".wk-chart-box").data(M,function(e){return e.key}),d=s.enter().append("g").attr("class","wk-chart-box wk-chart-selectable").attr("transform",function(e){return"translate("+(a.scale()(e.targetKey)+m(e))+")"}).classed("wk-chart-hidden",!0).style("opacity",0).call(u),d.append("rect").attr("class","wk-chart-box-uq wk-chart-selectable").classed("wk-chart-hidden",!0).style("opacity",0).call(f.tooltip),d.append("rect").attr("class","wk-chart-box-lq  wk-chart-selectable").classed("wk-chart-hidden",!0).style("opacity",0).call(f.tooltip),d.append("line").attr("class","wk-chart-box-med").classed("wk-chart-hidden",!0).style({opacity:0}),d.append("line").attr("class","wk-chart-box-lw").classed("wk-chart-hidden",!0).style({opacity:0}),d.append("line").attr("class","wk-chart-box-lw-conn").classed("wk-chart-hidden",!0).style({opacity:0,"stroke-dasharray":"2.2","stroke-width":3}),d.append("line").attr("class","wk-chart-box-uw").classed("wk-chart-hidden",!0).style({stroke:"black",opacity:0}),d.append("line").attr("class","wk-chart-box-uw-conn").classed("wk-chart-hidden",!0).style({opacity:0,"stroke-dasharray":"2.2","stroke-width":3}),(t?s.transition().duration(n.duration):s).attr("transform",function(e){return"translate("+(a.scale()(e.targetKey)+m(e))+")"}).style("opacity",function(e){return e.deleted?0:1}),K=s.select(".wk-chart-box-uq").call(L,"uq",!0),(t?K.transition().duration(n.duration):K).attr("y",function(e){return o.scale()(e.uq.val)}).attr("height",function(e){return Math.abs(o.scale()(e.uq.val)-o.scale()(e.med.val))}).attr("width",function(e){return e.added||e.deleted?0:c}).style("opacity",1),x=s.select(".wk-chart-box-lq").call(L,"lq",!0),(t?x.transition().duration(n.duration):x).attr("y",function(e){return o.scale()(e.med.val)}).attr("height",function(e){return Math.abs(o.scale()(e.med.val)-o.scale()(e.lq.val))}).attr("width",function(e){return e.added||e.deleted?0:c}).style("opacity",1),C=s.select(".wk-chart-box-med").call(L,"med"),(t?C.transition().duration(n.duration):C).attr("x1",.2*-c).attr("x2",function(e){return e.added||e.deleted?0:1.3*c}).attr("y1",function(e){return o.scale()(e.med.val)}).attr("y2",function(e){return o.scale()(e.med.val)}).style({opacity:1,"stroke-width":3}),v=s.select(".wk-chart-box-lw").call(L,"min"),(t?v.transition().duration(n.duration):v).attr("x1",0).attr("x2",function(e){return e.added||e.deleted?0:c}).attr("y1",function(e){return B?o.scale()(e.min.val):0}).attr("y2",function(e){return B?o.scale()(e.min.val):0}).style({opacity:1,"stroke-width":3}).style("visibility",B?"visible":"none"),S=s.select(".wk-chart-box-lw-conn"),(t?S.transition().duration(n.duration):S).attr("x1",function(e){return e.added||e.deleted?0:c/2}).attr("x2",function(e){return e.added||e.deleted?0:c/2}).attr("y1",function(e){return B?o.scale()(e.lq.val):0}).attr("y2",function(e){return B?o.scale()(e.min.val):0}).style("opacity",1).style("stroke","black").style("visibility",B?"visible":"none"),O=s.select(".wk-chart-box-uw").call(L,"max"),(t?O.transition().duration(n.duration):O).attr("x1",0).attr("x2",function(e){return e.added||e.deleted?0:c}).attr("y1",function(e){return P?o.scale()(e.max.val):0}).attr("y2",function(e){return P?o.scale()(e.max.val):0}).style({opacity:1,"stroke-width":3}).style("visibility",P?"visible":"none"),F=s.select(".wk-chart-box-uw-conn"),(t?F.transition().duration(n.duration):F).attr("x1",function(e){return e.added||e.deleted?0:c/2}).attr("x2",function(e){return e.added||e.deleted?0:c/2}).attr("y1",function(e){return P?o.scale()(e.uq.val):0}).attr("y2",function(e){return P?o.scale()(e.max.val):0}).style("opacity",1).style("stroke","black").style("visibility",P?"visible":"none"),s.exit().remove()},v.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).rangePadding(y).scaleType("ordinal"),f=c.behavior().tooltip,b.keyScale(s.x).valueScale(s.y).colorScale(s.color).value(function(e){return e.value}),u=c.behavior().selected,f.on("enter."+l,b.enter)}),c.lifeCycle().on("animationStartState."+l,w),c.lifeCycle().on("animationEndState."+l,k),c.lifeCycle().on("destroy."+l,function(){return c.lifeCycle().on("."+l,null),f.on("."+l,null)}),v)},v.rangePadding=function(e){return 0===arguments.length?s.y.rangePadding():(y=t.parsePadding(e,y,r),s.x.rangePadding(y),v)},v.boxStyle=function(t){return 0===arguments.length?e:(e=t,v)},v}}]),angular.module("wk.chart").factory("wkBubble",["$log","utils",function(e,t){var r,n;return r=0,n=function(){var e,t,n,a,o,i,l,c;return l=function(){},t=void 0,o=void 0,n={},e="bubble"+r++,a=void 0,c=function(e){var t,r,a;t=[];for(r in n)a=n[r],t.push(this.layers[a.axisLabel()]={value:a.formattedValue(e),color:"color"===r?{fill:"string"==typeof a.map(e)?a.map(e):a.map(e).color}:{fill:"none"}});return t},i=function(e,t,r,n,i,l){var c,s;return s=function(e){var t,r,n;return r=d3.select(this),n=i.map(e),"string"==typeof n?r.style({fill:n,stroke:n}):(t=n.color,n.fill=t,r.style(n))},c=this.selectAll(".wk-chart-bubble").data(e,function(e){return i.value(e)}),c.enter().append("circle").attr("class","wk-chart-bubble wk-chart-selectable").style("opacity",0).call(o.tooltip).call(a),c.each(s).transition().duration(t.duration).attr({r:function(e){return l.map(e)},cx:function(e){return r.map(e)},cy:function(e){return n.map(e)}}).style("opacity",1),c.exit().transition().duration(t.duration).style("opacity",0).remove()},l.layout=function(r){return 0===arguments.length?t:(t=r,t.lifeCycle().on("configure",function(){return n=this.getScales(["x","y","color","size"]),this.getKind("y").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0),o=t.behavior().tooltip,a=t.behavior().selected,o.on("enter."+e,c)}),t.lifeCycle().on("drawChart."+e,i),t.lifeCycle().on("destroy."+e,function(){return t.lifeCycle().on("."+e,null),o.on("."+e,null)}),l)},l}}]),angular.module("wk.chart").factory("wkColumn",["$log","utils","barConfig","dataManagerFactory","dataLabelFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i,l;return i=0,l=function(){var e,l,c,s,u,d,f,y,h,g,p,v,m,k,w;return p=function(){},c=void 0,l="column"+i++,f=null,s={},u=void 0,y=_.clone(r,!0),w=n(),k=o(),h=a(),d=void 0,e={},m=function(e,t,r,n,a){var o;return w.keyScale(r).valueScale(n).data(e,!0),w.isInitial()?void 0:(o=w.animationStartLayers(),g.apply(this,[!1,o,t,r,n,a]))},v=function(e,t,r,n,a){var o;return o=w.animationEndLayers(),h.duration(t.duration).active(c.showDataLabels()),g.apply(this,[!0,o,t,r,n,a])},g=function(t,r,n,a,o,i){var l,s,g,p,v,m,w;return w=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=0===i.property().length?i.scale()(t.layerKey):i.map(t.data),"string"==typeof a?n.style({fill:a}):(r=a.color,a.fill=r,n.style(a))},l=!i.property()&&i.isOrdinal(),k.colorByKey(l),f||(f=this.selectAll(".wk-chart-layer")),g=a.scale().rangeBand(),s=g/(1-y.paddingLeft)*y.paddingLeft,v=function(e){if(a.reverse()){if(e.deleted&&e.highBorder)return-s/2;if(e.deleted)return g+s/2;if(e.added&&e.atBorder)return-s/2;if(e.added)return g+s/2}else{if(e.deleted&&e.highBorder)return g;if(e.deleted)return-s/2;if(e.added&&e.atBorder)return g+s/2;if(e.added)return-s/2}return 0},f=f.data(r[0].values,function(e){return e.key}),p=f.enter().append("g").attr("class","wk-chart-layer").attr("transform",function(e){return"translate("+a.scale()(e.targetKey)+")"}),p.append("rect").attr("class","wk-chart-rect wk-chart-selectable").attr("width",function(e){return e.added||e.deleted?0:g}).style("opacity",0).call(d.tooltip).call(u),(t?f.transition().duration(n.duration):f).attr("transform",function(e){return"translate("+(a.scale()(e.targetKey)+v(e))+")"}),m=f.select("rect").each(w),(t?m.transition().duration(n.duration):m).attr("width",function(e){return e.added||e.deleted?0:g}).attr("height",function(e){return Math.abs(o.scale()(0)-o.scale()(e.targetValue))}).attr("y",function(e){return Math.min(o.scale()(0),o.scale()(e.targetValue))}).style("opacity",1),f.call(h,t,c.dataLabelStyle()),f.exit().remove()},p.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.getKind("y").domainCalc("max").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).rangePadding(y).scaleType("ordinal"),d=c.behavior().tooltip,u=c.behavior().selected,k.keyScale(s.x).valueScale(s.y).colorScale(s.color).value(function(e){return e.value}),h.keyScale(s.x).valueScale(s.y),d.on("enter."+l,k.enter)}),c.lifeCycle().on("animationStartState."+l,m),c.lifeCycle().on("animationEndState."+l,v),c.lifeCycle().on("destroy."+l,function(){return c.lifeCycle().on("."+l,null),d.on("."+l,null)}),p)},p.rangePadding=function(e){return 0===arguments.length?s.y.rangePadding():(y=t.parsePadding(e,y,r),s.x.rangePadding(y),p)},p.columnStyle=function(t){return 0===arguments.length?e:(e=t,p)},p}}]),angular.module("wk.chart").factory("wkColumnClustered",["$log","utils","barConfig","dataManagerFactory","tooltipHelperFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$;return w=function(){},c=void 0,l="clusteredColumn"+o++,i={},k=null,g=void 0,y=0,f=0,h=0,p=_.clone(r,!0),$=n(),C=a(),m=!0,S=d3.layout.stack(),S.values(function(e){return e.values}).y(function(e){return e.layerDeleted||e.layerAdded||e.deleted||e.added?0:h}).x(function(e){return e.layerKey}),d=void 0,u=void 0,s={},x=function(e,t,r,n,a){var o;return $.keyScale(r).valueScale(n).data(e,!0),$.isInitial()?void 0:(o=$.animationStartLayers(),v.apply(this,[!1,o,t,r,n,a]))},b=function(e,t,r,n,a){var o;return o=$.animationEndLayers(),v.apply(this,[!0,o,t,r,n,a])},v=function(t,r,n,a,o,l){var c,s,v,w,b,x,C,$;return C=function(e){var t,r,n;return r=d3.select(this),r.style(i),n=l.scale()(e.layerKey),"string"==typeof n?r.style({fill:n}):(t=n.color,n.fill=t,r.style(n))},b=r.filter(function(e){return!e.added&&!e.deleted}).map(function(e){return e.layerKey}),w=a.scale().rangeBand(),g=d3.scale.ordinal().domain(b).rangeBands([0,w],0,0),h=g.rangeBand(),v=w/(1-p.paddingLeft)*p.paddingLeft,c=w/(1-p.outerPaddingLeft)*p.outerPaddingLeft,x=function(e){if(a.reverse()){if(e.deleted&&e.highBorder)return v/2;if(e.deleted)return w+v/2;if(e.added&&e.atBorder)return v/2;if(e.added)return w+v/2}else{if(e.deleted&&e.highBorder)return w;if(e.deleted)return 0-v/2;if(e.added&&e.atBorder)return w+v/2;if(e.added)return 0-v/2}return 0},$=S(r),e.log($),k||(k=this.selectAll(".wk-chart-layer")),k=k.data($,function(e){return e.layerKey}),k.enter().append("g").attr("class","wk-chart-layer"),k.exit().remove(),s=k.selectAll(".wk-chart-rect").data(function(e){return e.values},function(e){return e.layerKey+"|"+e.key}),s.enter().append("rect").attr("class","wk-chart-rect wk-chart-selectable").style("opacity",0).call(d.tooltip).call(u),s.each(C),(t?s.transition().duration(n.duration):s).attr("x",function(e){return a.scale()(e.targetKey)+e.y0+x(e)}).attr("width",function(e){return e.y}).attr("height",function(e){return Math.abs(o.scale()(0)-o.scale()(e.targetValue))}).attr("y",function(e){return Math.min(o.scale()(0),o.scale()(e.targetValue))}).style("opacity",1),s.exit().remove(),m=!1,y=v,f=c},w.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.getKind("y").domainCalc("max").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).rangePadding(p).scaleType("ordinal"),this.layerScale("color"),d=c.behavior().tooltip,d.on("enter."+l,C.enter),u=c.behavior().selected,C.keyScale(s.x).valueScale(s.y).colorScale(s.color).value(function(e){return e.value})}),c.lifeCycle().on("animationStartState."+l,x),c.lifeCycle().on("animationEndState."+l,b),c.lifeCycle().on("destroy."+l,function(){return c.lifeCycle().on("."+l,null),d.on("."+l,null)}),w)},w.rangePadding=function(e){return 0===arguments.length?s.y.rangePadding():(p=t.parsePadding(e,p,r),s.x.rangePadding(p),w)},w.columnStyle=function(e){return 0===arguments.length?i:(i=e,w)},w}}]),angular.module("wk.chart").factory("wkColumnStacked",["$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i,l;return i=0,l=function(){var e,a,l,c,s,u,d,f,y,h,g,p,v,m,k;return h=function(){},l=void 0,a="stackedColumn"+i++,y=null,e={},u=void 0,c={},s=void 0,d=_.clone(r,!0),k=n(),m=o(),v=d3.layout.stack(),v.values(function(e){return e.values}).y(function(e){return e.layerAdded||e.layerDeleted?0:e.targetValue}).x(function(e){return e.targetKey}),p=function(e,t,r,n,a){var o;return k.keyScale(r).valueScale(n).data(e,!0),k.isInitial()?void 0:(o=k.animationStartLayers(),f.apply(this,[!1,o,t,r,n,a]))},g=function(e,t,r,n,a){var o;return o=k.animationEndLayers(),f.apply(this,[!0,o,t,r,n,a])},f=function(t,r,n,a,o,i){var l,c,f,h,g,p;return g=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a}):(r=a.color,a.fill=r,n.style(a))},c=a.scale().rangeBand(),l=c/(1-d.paddingLeft)*d.paddingLeft,h=function(e){if(a.reverse()){if(e.deleted&&e.highBorder)return-l/2;if(e.deleted)return c+l/2;if(e.added&&e.atBorder)return-l/2;if(e.added)return c+l/2}else{if(e.deleted&&e.highBorder)return c;if(e.deleted)return-l/2;if(e.added&&e.atBorder)return c+l/2;if(e.added)return-l/2}return 0},y||(y=this.selectAll(".wk-chart-layer")),p=v(r),y=y.data(p,function(e){return e.layerKey}),y.enter().append("g").attr("class","wk-chart-layer"),y.exit().remove(),f=y.selectAll(".wk-chart-rect"),f=f.data(function(e){return e.values},function(e){return e.key.toString()+"|"+e.layerKey.toString()}),f.enter().append("rect").attr("class","wk-chart-rect wk-chart-selectable").style("opacity",0).call(u.tooltip).call(s),f.each(g),(t?f.transition().duration(n.duration):f).attr("y",function(e){return o.scale()(e.y0+e.y)}).attr("height",function(e){return o.scale()(0)-o.scale()(e.y)}).attr("width",function(e){return e.added||e.deleted?0:c}).attr("x",function(e){return a.scale()(e.targetKey)+h(e)}).style("opacity",1),f.exit().remove()},h.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return c=this.getScales(["x","y","color"]),this.getKind("y").domainCalc("total").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).rangePadding(d).scaleType("ordinal"),this.layerScale("color"),u=l.behavior().tooltip,s=l.behavior().selected,u.on("enter."+a,m.enter),m.keyScale(c.x).valueScale(c.y).colorScale(c.color).value(function(e){return e.value})}),l.lifeCycle().on("animationStartState."+a,p),l.lifeCycle().on("animationEndState."+a,g),l.lifeCycle().on("destroy."+a,function(){return l.lifeCycle().on("."+a,null),u.on("."+a,null)}),h)},h.rangePadding=function(e){return 0===arguments.length?c.y.rangePadding():(d=t.parsePadding(e,d,r),c.x.rangePadding(d),h)},h.columnStyle=function(t){return 0===arguments.length?e:(e=t,h)},h.offset=function(e){return 0===arguments.length?v.offset():(v.offset(e),h)},h}}]),angular.module("wk.chart").factory("wkGauge",["$log","utils",function(e,t){var r;return r=function(){var t,r,n,a;return a=function(){},t=void 0,n=!0,r=function(t,r,a,o,i){var l,c,s,u,d,f,y,h,g,p;for(e.info("drawing Gauge Chart"),u=[t],p=o.scale().domain(),s=angular.copy(i.scale().domain()),s.unshift(p[0]),s.push(p[1]),h=[],d=f=1,g=s.length-1;g>=1?g>=f:f>=g;d=g>=1?++f:--f)h.push({from:+s[d-1],to:+s[d]});return c=this.selectAll(".wk-chart-bar"),c=c.data(h,function(e,t){return t}),n?c.enter().append("rect").attr("class","wk-chart-bar").attr("x",0).attr("width",50).style("opacity",0):c.enter().append("rect").attr("class","wk-chart-bar").attr("x",0).attr("width",50),c.transition().duration(r.duration).attr("height",function(e){return o.scale()(0)-o.scale()(e.to-e.from)}).attr("y",function(e){return o.scale()(e.to)}).style("fill",function(e){return i.scale()(e.from)}).style("opacity",1),c.exit().remove(),l=function(e){return e.append("rect").attr("width",55).attr("height",4).style("fill","black"),e.append("circle").attr("r",10).attr("cx",65).attr("cy",2).style("stroke","black")},y=this.selectAll(".wk-chart-marker"),y=y.data(u,function(e){return"wk-chart-marker"}),y.enter().append("g").attr("class","wk-chart-marker").call(l),n&&y.attr("transform",function(e){return"translate(0,"+o.scale()(e.value)+")"}).style("opacity",0),y.transition().duration(r.duration).attr("transform",function(e){return"translate(0,"+o.scale()(e.value)+")"}).style("fill",function(e){return i.scale()(e.value)}).style("opacity",1),n=!1},a.layout=function(e){return 0===arguments.length?t:(t=e,t.lifeCycle().on("configure",function(){return this.requiredScales(["y","color"]),this.getKind("color").resetOnNewData(!0)}),t.lifeCycle().on("drawChart",r),a)},a}}]),angular.module("wk.chart").factory("wkGeoMap",["$log","utils",function(e,t){var r,n,a;return r=0,n=function(e){var t;return e?(t=e.trim().replace(/^\[|\]$/g,"").split(",").map(function(e){return e.replace(/^[\"|']|[\"|']$/g,"")}),t=t.map(function(e){return isNaN(e)?e:+e}),1===t.length?t[0]:t):void 0},a=function(){var t,n,a,o,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w;return m=function(){},l=void 0,h=void 0,y=void 0,f={},o="geoMap"+r++,t=d3.map(),d=1,u=[0,0],i="",w=function(e){var r,n;return n=t.get(e.properties[i[0]]),r=f.color.map(n),this.layers[n.RS]={value:n.DES,color:{fill:"string"==typeof r?r:r.color}}},k=[],s=d3.geo.orthographic(),g=0,a=0,c=void 0,p=d3.geo.zoom().projection(s).on("zoom.redraw",function(){return d3.event.sourceEvent.preventDefault(),k.attr("d",c)}),n=void 0,v=function(e,r,o,l,u){var d,f,v,m;if(m=function(e){var r,n,a,o;return n=d3.select(this),o=t.get(e.properties[i[0]]),a=u.map(o),a?"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a)):void 0},g=r.width,a=r.height,e&&e[0].hasOwnProperty(i[1]))for(f=0,v=e.length;v>f;f++)d=e[f],t.set(d[i[1]],d);return n?(s.translate([g/2,a/2]),k=this.selectAll("path").data(n.features,function(e){return e.properties[i[0]]}),k.enter().append("svg:path").style("fill","lightgrey").style("stroke","darkgrey").call(h.tooltip).call(y).call(p),k.attr("d",c).each(m),k.exit().remove()):void 0},m.projection=function(t){return e.log("setting Projection params",t),d3.geo.hasOwnProperty(t.projection)&&(s=d3.geo[t.projection](),s.center(t.center).scale(t.scale).rotate(t.rotate).clipAngle(t.clipAngle),i=t.idMap,s.parallels&&s.parallels(t.parallels),d=s.scale(),u=s.rotate(),c=d3.geo.path().projection(s),p.projection(s)),m},m.geoJson=function(e){return n=e,m},m.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return f=this.getScales(["color"]),f.color.resetOnNewData(!0)}),l.lifeCycle().on("drawChart",v),h=l.behavior().tooltip,y=l.behavior().selected,h.on("enter."+o,w),l.lifeCycle().on("destroy."+o,function(){return l.lifeCycle().on("."+o,null),h.on("."+o,null),scope.$destroy()}),m)},m}}]),angular.module("wk.chart").factory("wkHistogram",["$log","barConfig","utils","wkChartMargins",function(e,t,r,n){var a,o;return a=0,o=function(){var e,o,i,l,c,s,u,d,f,y,h,g,p,v;return p=function(){},o=void 0,e="histogram"+a++,l={},d=void 0,g=void 0,f={},s=void 0,c=void 0,f=_.clone(t,!0),i=r.mergeData().key(function(e){return e.xVal}),h=!0,s=void 0,v=function(e){var t,r,n;return this.headerName=l.rangeX.axisLabel(),this.headerValue=l.y.axisLabel(),t=l.rangeX.formatValue(l.rangeX.lowerValue(e.data)),l.rangeX.upperProperty()?(n=l.rangeX.formatValue(l.rangeX.upperValue(e.data)),r=t+" - "+n):r=l.rangeX.formatValue(l.rangeX.lowerValue(e.data)),this.layers.push({name:r,value:l.y.formattedValue(e.data),color:{"background-color":l.color.map(e.data)}})},y=function(e,t,r,a,o,l,u,f){var y,g,p,v,m;return f.upperProperty()?g=e.map(function(e){return{x:f.scale()(f.lowerValue(e)),xVal:f.lowerValue(e),width:f.scale()(f.upperValue(e))-f.scale()(f.lowerValue(e)),y:a.map(e),height:t.height-a.map(e),color:o.map(e),data:e}}):e.length>0&&(p=f.lowerValue(e[0]),v=f.lowerValue(e[1])-p,m=t.width/e.length,g=e.map(function(e,r){return{x:f.scale()(p+v*r),xVal:f.lowerValue(e),width:m,y:a.map(e),height:t.height-a.map(e),color:o.map(e),data:e}})),i(g).first({x:0,width:0}).last({x:t.width,width:0}),d||(d=this.selectAll(".wk-chart-bucket")),d=d.data(g,function(e){return e.xVal}),y=d.enter().append("g").attr("class","wk-chart-bucket").attr("transform",function(e){return"translate("+(h?e.x:i.addedPred(e).x+i.addedPred(e).width)+","+e.y+") scale("+(h?1:0)+",1)"}),y.append("rect").attr("class","wk-chart-selectable").attr("height",function(e){return e.height}).attr("width",function(e){return e.width}).style("fill",function(e){return e.color}).style("opacity",h?0:1).call(s.tooltip).call(c),y.append("text").attr("class","wk-chart-data-label").attr("x",function(e){return e.width/2}).attr("y",-n.dataLabelPadding.vert).attr({"text-anchor":"middle"}).style({opacity:0}),d.transition().duration(t.duration).attr("transform",function(e){return"translate("+e.x+", "+e.y+") scale(1,1)"}),d.select("rect").transition().duration(t.duration).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).style("fill",function(e){return e.color}).style("opacity",1),d.select("text").text(function(e){return a.formattedValue(e.data)}).transition().duration(t.duration).attr("x",function(e){return e.width/2}).style("opacity",host.showDataLabels()?1:0),d.exit().transition().duration(t.duration).attr("transform",function(e){return"translate("+i.deletedSucc(e).x+","+e.y+") scale(0,1)"}).remove(),h=!1},u=function(e,t,r,n){var a;return a=function(e,n){return e.upperProperty()?e.scale()(e.upperValue(n.data))-e.scale()(e.lowerValue(n.data)):r/Math.max(t[1]-t[0]+1,1)},d.attr("transform",function(t){var r;return"translate("+((r=e.scale()(t.xVal))>=0?r:-1e3)+", "+t.y+")"}),d.select("rect").attr("width",function(t){return a(e,t)}),d.selectAll("text").attr("x",function(t){return a(e,t)/2})},p.layout=function(t){return 0===arguments.length?o:(o=t,o.lifeCycle().on("configure",function(){return l=this.getScales(["rangeX","y","color"]),this.getKind("y").domainCalc("max").resetOnNewData(!0),this.getKind("rangeX").resetOnNewData(!0).scaleType("linear").domainCalc("rangeExtent"),this.getKind("color").resetOnNewData(!0),s=o.behavior().tooltip,c=o.behavior().selected,s.on("enter."+e,v)}),o.lifeCycle().on("drawChart",y),p)},p}}]),angular.module("wk.chart").factory("wkLine",["$log","utils","barConfig","dataLabelFactory","markerFactory","dataManagerFactory","tooltipHelperFactory","timing",function(e,t,r,n,a,o,i,l){var c,s;return c=0,s=function(){var e,t,r,n,s,u,d,f,y,h,g,p,v,m,k,w,b;return p=function(){},t=void 0,d=void 0,s=!1,u=!1,r={"stroke-width":1},n={},v=0,e="line"+c++,h=void 0,g=void 0,y=void 0,b=o(),g=a(),w=i(),k=function(e,t,r,n,a){return l.init(),l.start("chart"),b.keyScale(r).valueScale(n).data(e),b.isInitial()?void 0:(y=b.animationStartLayers(),f.apply(this,[!1,y,t,r,n,a]))},m=function(e,t,r,n,a){return g.active(s),y=b.animationEndLayers(),f.apply(this,[!0,y,t,r,n,a]),l.stop("chart"),l.report()},f=function(e,t,n,a,o,i){var l,c,s,f,y;return y=function(e){var t,n,a;return n=d3.select(this),n.style(r),a=i.scale()(e.layerKey),"string"==typeof a?n.style({stroke:a}):(t=a.color,a.stroke=t,n.style(a))},v=a.isOrdinal()?a.scale().rangeBand()/2:0,d&&(d.data(t),w.layout(t)),s=n.width/t[0].values.length*2,h=d3.svg.line().y(function(e){return o.scale()(e.layerAdded||e.layerDeleted?0:e.value)}),u&&h.interpolate("cardinal"),h.x(a.isOrdinal()?function(e){return(e.highBorder?n.width+s:e.lowBorder?-s:a.scale()(e.targetKey))+v}:function(e){return a.scale()(e.targetKey)}),c=this.selectAll(".wk-chart-layer").data(t,function(e){return e.layerKey}),l=c.enter().append("g").attr("class","wk-chart-layer"),l.append("path").attr("class","wk-chart-line").attr("d",function(e){return h(e.values)}).style("opacity",0).style("pointer-events","none"),f=c.select(".wk-chart-line"),f.each(y),(e?f.transition().duration(n.duration):f).attr("d",function(e){return h(e.values)}).style("opacity",function(e){return e.added||e.deleted?0:1}).style("pointer-events","none"),c.exit().remove(),g.y(function(e){return o.scale()(e.layerAdded||e.layerDeleted?0:e.value)}).color(function(e){var t;return t=i.scale()(e.layerKey),"string"==typeof t?t:t.color}).keyScale(a.scale()),g.x(a.isOrdinal()?function(e){return e.highBorder?n.width+s:e.lowBorder?-s:a.scale()(e.targetKey)+a.scale().rangeBand()/2}:function(e){return a.scale()(e.targetKey)}),c.call(g,e)},p.layout=function(r){
return 0===arguments.length?t:(t=r,t.lifeCycle().on("configure",function(){return n=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),d=t.behavior().tooltip,w.keyScale(n.x).valueScale(n.y).colorScale(n.color).value(function(e){return e.value}),d.markerScale(n.x),d.on("enter."+e,w.enter),d.on("moveData."+e,w.moveData),d.on("moveMarker."+e,w.moveMarkers)}),t.lifeCycle().on("animationStartState."+e,k),t.lifeCycle().on("animationEndState."+e,m),t.lifeCycle().on("destroy."+e,function(){return t.lifeCycle().on("."+e,null),d.on("."+e,null)}))},p.markers=function(e){return 0===arguments.length?s:(s=e,p)},p.spline=function(e){return 0===arguments.length?u:(u=e,p)},p.lineStyle=function(e){return 0===arguments.length?r:(r=e,p)},p}}]),angular.module("wk.chart").factory("wkLineVertical",["$log","utils","tooltipHelperFactory","dataManagerFactory","markerFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b;return p=function(){},t=void 0,d=0,u=void 0,c=!1,s=!1,l={},v=0,e="lineVertical"+o++,y=void 0,h=void 0,i={},b=n(),g=a(),w=r(),k=function(e,t,r,n,a){return b.keyScale(n).valueScale(r).data(e),b.isInitial()?void 0:(y=b.animationStartLayers(),f.apply(this,[!1,y,t,r,n,a]))},m=function(e,t,r,n,a){return g.active(c),y=b.animationEndLayers(),f.apply(this,[!0,y,t,r,n,a])},f=function(e,t,r,n,a,o){var l,c,d,f,y;return y=function(e){var t,r,n;return r=d3.select(this),r.style(i),n=o.scale()(e.layerKey),"string"==typeof n?r.style({stroke:n}):(t=n.color,n.stroke=t,r.style(n))},v=a.isOrdinal()?a.scale().rangeBand()/2:0,u&&(u.data(t),w.layout(t)),d=r.height/t[0].values.length*2,h=d3.svg.line().x(function(e){return n.scale()(e.layerAdded||e.layerDeleted?0:e.value)}),s&&h.interpolate("cardinal"),h.y(a.isOrdinal()?function(e){return e.lowBorder?r.height+d:e.highBorder?-d:a.scale()(e.targetKey)}:function(e){return a.scale()(e.targetKey)}),c=this.selectAll(".wk-chart-layer").data(t,function(e){return e.layerKey}),l=c.enter().append("g").attr("class","wk-chart-layer"),l.append("path").attr("class","wk-chart-line").attr("d",function(e){return h(e.values)}).style("opacity",0).style("pointer-events","none").style("stroke",function(e){return o.scale()(e.layerKey)}),f=c.select(".wk-chart-line").attr("transform","translate(0,"+v+")"),f.each(y),(e?f.transition().duration(r.duration):f).attr("d",function(e){return h(e.values)}).style("opacity",function(e){return e.added||e.deleted?0:1}).style("pointer-events","none"),c.exit().remove(),g.isVertical(!0).x(function(e){return n.scale()(e.layerAdded||e.layerDeleted?0:e.value)}).color(function(e){var t;return t=o.scale()(e.layerKey),"string"==typeof t?t:t.color}).keyScale(a.scale()),g.y(a.isOrdinal()?function(e){return e.lowBorder?r.height+d:e.highBorder?-d:a.scale()(e.targetKey)+a.scale().rangeBand()/2}:function(e){return a.scale()(e.targetKey)}),c.call(g,e)},p.layout=function(r){return 0===arguments.length?t:(t=r,t.lifeCycle().on("configure",function(){return l=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),u=t.behavior().tooltip,w.keyScale(l.y).valueScale(l.x).colorScale(l.color).value(function(e){return e.value}),u.markerScale(l.y),u.on("enter."+e,w.enter),u.on("moveData."+e,w.moveData),u.on("moveMarker."+e,w.moveMarkers)}),t.lifeCycle().on("animationStartState."+e,k),t.lifeCycle().on("animationEndState."+e,m),t.lifeCycle().on("destroy."+e,function(){return t.lifeCycle().on("."+e,null),u.on("."+e,null)}),p)},p.markers=function(e){return 0===arguments.length?c:(c=e,p)},p.spline=function(e){return 0===arguments.length?s:(s=e,p)},p.lineStyle=function(e){return 0===arguments.length?i:(i=e,p)},p}}]),angular.module("wk.chart").factory("wkPie",["$log","utils",function(e,t){var r,n;return r=0,n=function(){var e,n,a,o,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C;return m=function(){},o=void 0,n="pie"+r++,p=void 0,k=void 0,v=void 0,a=void 0,l=void 0,w=void 0,b=void 0,c=[],s=void 0,d=void 0,u=!1,e=!1,S=0,f=0,i=t.mergeData(),C=function(e){var t,r;return this.headerName=c.y.axisLabel(),this.headerValue=c.size.axisLabel(),r={},r.value=c.size.formattedValue(e),t=c.color.map(e),r.color="string"==typeof t?{fill:t,stroke:t}:t,this.layers[r.value]=r},g=!0,y=function(t,r,n,a,o,y){var h,m,k,x,C,$,A,D,M,L,P;return P=function(e){var t,r,n;return r=d3.select(this),r.style(l),n=o.map(e.data),"string"==typeof n?r.style({fill:n,stroke:n}):(t=n.color,n.fill=t,r.style(n))},f=r.duration,M=Math.min(r.width,r.height)/2,S=.06*M,w||(w=this.append("g").attr("class","wk-chart-pieBox")),w.attr("transform","translate("+r.width/2+","+r.height/2+")"),A=M*(u?.8:.9),k=A*(e?.6:0),m=d3.svg.arc().outerRadius(A).innerRadius(k),$=d3.svg.arc().outerRadius(.9*M).innerRadius(.9*M),x=function(e){return c.y.value(e.data)},D=d3.layout.pie().sort(null).value(y.value),h=function(e){var t;return t=d3.interpolate(this._current,e),this._current=t(0),function(e){return m(t(e))}},L=D(t),i.key(x),i(L).first({startAngle:0,endAngle:0}).last({startAngle:2*Math.PI,endAngle:2*Math.PI}),p||(p=w.selectAll(".wk-chart-innerArc")),p=p.data(L,x),p.enter().append("path").each(function(e){return this._current=g?e:{startAngle:i.addedPred(e).endAngle,endAngle:i.addedPred(e).endAngle}}).attr("class","wk-chart-innerArc wk-chart-selectable").call(d.tooltip).call(s),p.each(P).transition().duration(r.duration).attrTween("d",h),p.exit().datum(function(e){return{startAngle:i.deletedSucc(e).startAngle,endAngle:i.deletedSucc(e).startAngle}}).transition().duration(r.duration).attrTween("d",h).remove(),C=function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},u?(v=w.selectAll(".wk-chart-data-label").data(L,x),v.enter().append("text").attr("class","wk-chart-data-label").each(function(e){return this._current=e}).attr("dy",".35em").style(layout.dataLabelStyle()).style("opacity",0).text(function(e){return y.formattedValue(e.data)}),v.transition().duration(r.duration).style("opacity",1).text(function(e){return y.formattedValue(e.data)}).attrTween("transform",function(e){var t,r;return t=this,r=d3.interpolate(t._current,e),function(e){var n,a;return n=r(e),t._current=n,a=$.centroid(n),a[0]+=15*(C(n)<Math.PI?1:-1),"translate("+a+")"}}).styleTween("text-anchor",function(e){var t;return t=d3.interpolate(this._current,e),function(e){var r;return r=t(e),C(r)<Math.PI?"start":"end"}}),v.exit().transition().duration(r.duration).style("opacity",0).remove(),b=w.selectAll(".wk-chart-polyline").data(L,x),b.enter().append("polyline").attr("class","wk-chart-polyline").style("opacity",0).style("pointer-events","none").each(function(e){return this._current=e}),b.transition().duration(r.duration).style("opacity",function(e){return 0===e.data.value?0:.5}).attrTween("points",function(e){var t,r;return this._current=this._current,r=d3.interpolate(this._current,e),t=this,function(e){var n,a;return n=r(e),t._current=n,a=$.centroid(n),a[0]+=10*(C(n)<Math.PI?1:-1),[m.centroid(n),$.centroid(n),a]}}),b.exit().transition().duration(r.duration).style("opacity",0).remove()):(w.selectAll(".wk-chart-polyline").remove(),w.selectAll(".wk-chart-data-label").remove()),g=!1},h=function(e){var t,r,n,a;return r=d3.select(this),r.classed("wk-chart-selected")?(t=(e.startAngle+e.endAngle)/2,n=Math.sin(t)*S,a=-Math.cos(t)*S,r.transition().duration(f).attr("transform","translate("+n+","+a+")")):r.transition().duration(f).attr("transform","translate(0,0)")},x=function(e){return w.selectAll(".wk-chart-innerArc").each(h)},m.layout=function(e){return 0===arguments.length?o:(o=e,o.lifeCycle().on("configure",function(){return c=this.getScales(["size","y","color"]),c.color.scaleType("category20"),c.y.scaleType("ordinal"),d=o.behavior().tooltip,s=o.behavior().selected,d.on("enter."+n,C)}),o.lifeCycle().on("drawChart."+n,y),o.lifeCycle().on("objectsSelected."+n,x),o.lifeCycle().on("destroy."+n,function(){return o.lifeCycle().on("."+n,null),d.on("."+n,null)}),m)},m.labels=function(e){return 0===arguments.length?u:(u=e,m)},m.donat=function(t){return 0===arguments.length?e:(e=t,m)},m.pieStyle=function(e){return 0===arguments.length?l:(l=e,m)},m}}]),angular.module("wk.chart").factory("wkRangeArea",["$log","utils","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b;return p=function(){},l=void 0,d=void 0,c={},s=!1,u=!1,v=0,t="rangearea"+o++,f=void 0,h=void 0,i=0,e={},b=r(),g=n(),w=a(),k=function(e,t,r,n,a,o,i,l,c){return b.keyScale(r).valueScale(n).data(e),b.isInitial()?void 0:(h=b.animationStartLayers(),y.apply(this,[!1,h,t,r,n,a,o,i,l,c]))},m=function(e,t,r,n,a,o,i,l,c){return g.active(s),h=b.animationEndLayers(),y.apply(this,[!0,h,t,r,n,a,o,i,l,c])},y=function(t,r,n,a,o,l,c,s,y,h){var p,m,k,b,x;for(x=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=l.scale()(t.layerKey),"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a))},v=a.isOrdinal()?a.scale().rangeBand()/2:0,d&&(d.data(r),w.layout(r)),f=d3.svg.area().x(function(e){return a.scale()(e.targetKey)}).y(function(e){return o.scale()(e.value)}).y1(function(e){return o.scale()(e.value1)}),u&&f.interpolate("cardinal"),p=0,b=[{values:r[1].values,layerKey:r[1].layerKey}];p<b[0].values.length;)b[0].values[p].value1=r[0].values[p].value,p++;return m=this.selectAll(".wk-chart-layer").data(r,function(e){return e.layerKey}),m.enter().append("g").attr("class","wk-chart-layer"),k=this.selectAll(".wk-chart-area-path").data(b,function(e){return e.layerKey}),k.enter().append("path").attr("class","wk-chart-area-path wk-chart-edit-selectable").attr("d",function(e){return f(e.values)}).style("opacity",i).style("pointer-events","none").attr("transform","translate("+v+")"),k.style("stroke",function(e){return l.scale()(e.layerKey)}).style("pointer-events","none").each(x),(t?k.transition().duration(n.duration):k).attr("d",function(e){return f(e.values)}).style("opacity",function(e){return e.added||e.deleted?0:1}),k.exit().remove(),m.exit().remove(),g.x(function(e){return a.scale()(e.targetKey)+(a.isOrdinal()?a.scale().rangeBand()/2:0)}).y(function(e){return o.scale()(e.value)}).color(function(e){return l.scale()(e.layerKey)}),m.call(g,t)},p.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return c=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),d=l.behavior().tooltip,w.keyScale(c.x).valueScale(c.y).colorScale(c.color).value(function(e){return e.value}),d.markerScale(c.x),d.on("enter."+t,w.moveData),d.on("moveData."+t,w.moveData),d.on("moveMarker."+t,w.moveMarkers)}),l.lifeCycle().on("animationStartState."+t,k),l.lifeCycle().on("animationEndState."+t,m),l.lifeCycle().on("destroy."+t,function(){return l.lifeCycle().on("."+t,null),d.on("."+t,null)}),p)},p.spline=function(e){return 0===arguments.length?u:(u=e,p)},p.markers=function(e){return 0===arguments.length?s:(s=e,p)},p.areaStyle=function(t){return 0===arguments.length?e:(e=t,p)},p}}]),angular.module("wk.chart").factory("wkRangeAreaVertical",["$log","utils","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a){var o,i;return o=0,i=function(){var e,t,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b;return p=function(){},l=void 0,d=void 0,c={},s=!1,u=!1,v=0,t="rangeareavertical"+o++,f=void 0,h=void 0,i=0,e={},b=r(),g=n(),w=a(),k=function(e,t,r,n,a,o){return b.keyScale(n).valueScale(r).data(e),b.isInitial()?void 0:(h=b.animationStartLayers(),y.apply(this,[!1,h,t,r,n,a]))},m=function(e,t,r,n,a,o){return g.active(s),h=b.animationEndLayers(),y.apply(this,[!0,h,t,r,n,a])},y=function(t,r,n,a,o,l){var c,s,y,h,p;for(p=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=l.scale()(t.layerKey),"string"==typeof a?n.style({fill:a,stroke:a}):(r=a.color,a.fill=r,n.style(a))},v=o.isOrdinal()?o.scale().rangeBand()/2:0,d&&(d.data(r),w.layout(r)),f=d3.svg.area().x(function(e){return-o.scale()(e.targetKey)}).y(function(e){return a.scale()(e.value)}).y1(function(e){return a.scale()(e.value1)}),u&&f.interpolate("cardinal"),c=0,h=[{values:r[1].values,layerKey:r[1].layerKey}];c<h[0].values.length;)h[0].values[c].value1=r[0].values[c].value,c++;return s=this.selectAll(".wk-chart-layer").data(r,function(e){return e.layerKey}),s.enter().append("g").attr("class","wk-chart-layer"),y=this.selectAll(".wk-chart-area-path").data(h,function(e){return e.layerKey}),y.enter().append("path").attr("class","wk-chart-area-path").attr("d",function(e){return f(e.values)}).style("opacity",i).style("pointer-events","none").attr("transform","translate(0,"+v+")rotate(-90)"),y.style("stroke",function(e){return l.scale()(e.layerKey)}).style("pointer-events","none").each(p),(t?y.transition().duration(n.duration):y).attr("d",function(e){return f(e.values)}).style("opacity",function(e){return e.added||e.deleted?0:1}),y.exit().remove(),s.exit().remove(),g.y(function(e){return o.scale()(e.targetKey)+(o.isOrdinal()?o.scale().rangeBand()/2:0)}).x(function(e){return a.scale()(e.value)}).color(function(e){return l.scale()(e.layerKey)}),s.call(g,t)},p.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return c=this.getScales(["x","y","color"]),this.layerScale("color"),this.getKind("x").domainCalc("extent").resetOnNewData(!0),this.getKind("y").resetOnNewData(!0).domainCalc("extent"),d=l.behavior().tooltip,w.keyScale(c.y).valueScale(c.x).colorScale(c.color).value(function(e){return e.value}),d.markerScale(c.y),d.on("enter."+t,w.moveData),d.on("moveData."+t,w.moveData),d.on("moveMarker."+t,w.moveMarkers)}),l.lifeCycle().on("animationStartState."+t,k),l.lifeCycle().on("animationEndState."+t,m),l.lifeCycle().on("destroy."+t,function(){return l.lifeCycle().on("."+t,null),d.on("."+t,null)}),p)},p}}]),angular.module("wk.chart").factory("wkRangeBar",["$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i,l;return i=0,l=function(){var e,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x;return v=function(){},c=void 0,l="rangebars"+i++,e={},f=void 0,u=void 0,s={},d=!1,m=0,g=void 0,y=_.clone(r,!0),x=n(),p=a(),b=o(),w=function(e,t,r,n,a,o){return x.keyScale(n).valueScale(r).data(e,!0),x.isInitial()?void 0:(g=x.animationStartLayers(),h.apply(this,[!1,g,t,r,n,a]))},k=function(e,t,r,n,a,o){return p.active(d),g=x.animationEndLayers(),h.apply(this,[!0,g,t,r,n,a])},h=function(t,r,n,a,o,i){var l,c,s,d,h,g,p;for(p=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a}):(r=a.color,a.fill=r,n.style(a))},l=o.scale().rangeBand(),c=l/(1-y.paddingLeft)*y.paddingLeft,m=o.isOrdinal()?l/2:0,f&&(f.data(r),b.layout(r)),m=function(e){return e.deleted&&e.atBorder?-c/2:e.deleted?l+c/2:e.added&&e.atBorder?-c/2:e.added?l+c/2:0},s=0,g=[{values:r[1].values,layerKey:r[1].layerKey}];s<g[0].values.length;)g[0].values[s].value1=r[0].values[s].targetValue,s++;return d=this.selectAll(".wk-chart-layer").data(r,function(e){return e.layerKey}),d.enter().append("g").attr("class","wk-chart-layer"),h=this.selectAll(".wk-chart-rect").data(g[0].values,function(e){return e.key}),h.enter().append("rect").attr("class","wk-chart-rect wk-chart-selectable").style("opacity",0).call(f.tooltip).call(u).attr("transform",function(e){return"translate(0, "+o.scale()(e.targetKey)+")"}),h.each(p),(t?h.transition().duration(n.duration):h).attr("transform",function(e){return"translate(0, "+(o.scale()(e.targetKey)+m(e))+")"}).attr("height",function(e){return e.added||e.deleted?0:l}).attr("width",function(e){return Math.abs(a.scale()(e.targetValue)-a.scale()(e.value1))}).attr("x",function(e){return a.scale()(e.value1)}).style("stroke",function(e){return i.scale()(e.layerKey)}).style("opacity",1),h.exit().remove(),d.exit().remove()},v.layout=function(e){return 0===arguments.length?c:(c=e,c.lifeCycle().on("configure",function(){return s=this.getScales(["x","y","color"]),this.getKind("x").domainCalc("extent").resetOnNewData(!0),this.getKind("y").resetOnNewData(!0).rangePadding(y).scaleType("ordinal"),f=c.behavior().tooltip,b.keyScale(s.y).valueScale(s.x).colorScale(s.color).value(function(e){return e.value}),u=c.behavior().selected,f.on("enter."+l,b.enter)}),c.lifeCycle().on("animationStartState."+l,w),c.lifeCycle().on("animationEndState."+l,k),c.lifeCycle().on("destroy."+l,function(){return c.lifeCycle().on("."+l,null),f.on("."+l,null)}),v)},v.rangePadding=function(e){return 0===arguments.length?s.y.rangePadding():(y=t.parsePadding(e,y,r),s.y.rangePadding(e),v)},v.barStyle=function(t){return 0===arguments.length?e:(e=t,v)},v}}]),angular.module("wk.chart").factory("wkRangeColumn",["$log","utils","barConfig","dataManagerFactory","markerFactory","tooltipHelperFactory",function(e,t,r,n,a,o){var i,l;return i=0,l=function(){var e,t,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b;return p=function(){},l=void 0,t="rangeColumn"+i++,e={},d=void 0,s=void 0,c={},u=!1,v=0,h=void 0,f=_.clone(r,!0),b=n(),g=a(),w=o(),k=function(e,t,r,n,a,o){return b.keyScale(r).valueScale(n).data(e,!0),b.isInitial()?void 0:(h=b.animationStartLayers(),y.apply(this,[!1,h,t,r,n,a]))},m=function(e,t,r,n,a,o){return g.active(u),h=b.animationEndLayers(),y.apply(this,[!0,h,t,r,n,a])},y=function(t,r,n,a,o,i){var l,c,u,y,h,g,p;for(p=function(t){var r,n,a;return n=d3.select(this),n.style(e),a=i.scale()(t.layerKey),"string"==typeof a?n.style({fill:a}):(r=a.color,a.fill=r,n.style(a))},l=a.scale().rangeBand(),c=l/(1-f.paddingLeft)*f.paddingLeft,v=o.isOrdinal()?l/2:0,d&&(d.data(r),w.layout(r)),v=function(e){return e.deleted&&e.atBorder?l:e.deleted?-c/2:e.added&&e.atBorder?l+c/2:e.added?-c/2:0},u=0,g=[{values:r[1].values,layerKey:r[1].layerKey}];u<g[0].values.length;)g[0].values[u].value1=r[0].values[u].targetValue,u++;return y=this.selectAll(".wk-chart-layer").data(r,function(e){return e.layerKey}),y.enter().append("g").attr("class","wk-chart-layer"),h=this.selectAll(".wk-chart-rect").data(g[0].values,function(e){return e.key}),h.enter().append("rect").attr("class","wk-chart-rect wk-chart-selectable").style("opacity",0).call(d.tooltip).call(s).attr("transform",function(e){return"translate("+a.scale()(e.targetKey)+")"}),h.each(p),(t?h.transition().duration(n.duration):h).attr("transform",function(e){return"translate("+(a.scale()(e.targetKey)+v(e))+")"}).attr("width",function(e){return e.added||e.deleted?0:l}).attr("height",function(e){return Math.abs(o.scale()(e.targetValue)-o.scale()(e.value1))}).attr("y",function(e){return o.scale()(e.targetValue)}).style("stroke",function(e){return i.scale()(e.layerKey)}).style("opacity",1),h.exit().remove(),y.exit().remove()},p.layout=function(e){return 0===arguments.length?l:(l=e,l.lifeCycle().on("configure",function(){return c=this.getScales(["x","y","color"]),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).rangePadding(f).scaleType("ordinal"),d=l.behavior().tooltip,w.keyScale(c.x).valueScale(c.y).colorScale(c.color).value(function(e){return e.value}),s=l.behavior().selected,d.on("enter."+t,w.enter)}),l.lifeCycle().on("animationStartState."+t,k),l.lifeCycle().on("animationEndState."+t,m),l.lifeCycle().on("destroy."+t,function(){return l.lifeCycle().on("."+t,null),d.on("."+t,null)}),p)},p}}]),angular.module("wk.chart").factory("wkScatter",["$log","utils",function(e,t){var r,n;return r=0,n=function(){var e,t,n,a,o,i,l,c,s;return c=function(){},t=void 0,o=void 0,a=void 0,e="scatter"+r++,n=[],s=function(e){var t,r,a;t=[];for(r in n)a=n[r],t.push(this.layers[a.axisLabel()]={value:a.formattedValue(e),color:"color"===r?{fill:"string"==typeof a.map(e)?a.map(e):a.map(e).color}:{fill:"none"},path:"shape"===r?d3.svg.symbol().type(a.map(e)).size(80)():void 0,"class":"shape"===r?"wk-chart-tt-svg-shape":""});return t},l=0,i=function(e,t,r,n,i,c,s){var u;return u=this.selectAll(".wk-chart-shape").data(e,function(e,t){return t}),u.enter().append("path").attr("class","wk-chart-shape wk-chart-selectable").attr("transform",function(e){return"translate("+r.map(e)+","+n.map(e)+")"}).style("opacity",l).call(o.tooltip).call(a),u.style("fill",function(e){return i.map(e)}).attr("d",d3.svg.symbol().type(function(e){return s.map(e)}).size(function(e){return c.map(e)*c.map(e)})).transition().duration(t.duration).attr("transform",function(e){return"translate("+r.map(e)+","+n.map(e)+")"}).style("opacity",1),l=1,u.exit().remove()},c.layout=function(r){return 0===arguments.length?t:(t=r,t.lifeCycle().on("configure",function(){return n=this.getScales(["x","y","color","size","shape"]),this.getKind("y").domainCalc("extent").resetOnNewData(!0),this.getKind("x").resetOnNewData(!0).domainCalc("extent"),o=t.behavior().tooltip,a=t.behavior().selected,o.on("enter."+e,s)}),t.lifeCycle().on("drawChart."+e,i),t.lifeCycle().on("destroy."+e,function(){return t.lifeCycle().on("."+e,null),o.on("."+e,null)}),c)},c}}]),angular.module("wk.chart").factory("wkSpider",["$log","utils",function(e,t){var r,n;return r=0,n=function(){var t,n,a,o,i,l,c,s,u;return s=function(){},a=void 0,i=void 0,o={},n="spider"+r++,l=d3.svg.axis(),t=void 0,u=function(e){var r,n,a,i,l;for(i=[],n=0,a=t.length;a>n;n++)r=t[n],l=o.color.scale()(e),i.push(this.layers[o.x.value(r)]={value:o.y.formatValue(r[e]),color:{fill:"string"==typeof l?l:l.color}});return i},c=function(r,n,a,o,c){var s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C;return w=function(e){var t,r,n;return r=d3.select(this),n=c.scale()(e),"string"==typeof n?r.style({fill:"none",stroke:n,"stroke-width":3}):(t=n.color,n.stroke=t,r.style(n))},t=r,e.log(r),f=n.width/2,y=n.height/2,k=.8*d3.min([f,y]),b=20,m=r.length,s=2*Math.PI/m,p=360/m,u=this.select(".wk-chart-axis"),u.empty()&&(u=this.append("g").attr("class","wk-chart-axis")),C=o.scale().ticks(o.ticks()),o.scale().range([k,0]),l.scale(o.scale()).orient("right").tickValues(C).tickFormat(o.tickFormat()),u.call(l).attr("transform","translate("+f+","+(y-k)+")"),o.scale().range([0,k]),v=this.selectAll(".wk-chart-axis-line").data(r,function(e){return a.value(e)}),v.enter().append("line").attr("class","wk-chart-axis-line").style("stroke","darkgrey"),v.attr({x1:0,y1:0,x2:0,y2:k}).attr("transform",function(e,t){return"translate("+f+", "+y+")rotate("+(p*t+180)+")"}),v.exit().remove(),x=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}),S=this.selectAll(".wk-chart-tickPath").data(C),S.enter().append("path").attr("class","wk-chart-tickPath").style("fill","none").style("stroke","lightgrey"),S.attr("d",function(e){var t;return t=r.map(function(t,r){return{x:Math.sin(s*r+Math.PI)*o.scale()(e),y:Math.cos(s*r+Math.PI)*o.scale()(e)}}),x(t)+"Z"}).attr("transform","translate("+f+", "+y+")"),S.exit().remove(),d=this.selectAll(".wk-chart-axis-text").data(r,function(e){return a.value(e)}),d.enter().append("text").attr("class","wk-chart-axis-text").style("fill","black").attr("dy","0.8em").attr("text-anchor","middle"),d.attr({x:function(e,t){return f+Math.sin(s*t+Math.PI)*(k+b)},y:function(e,t){return y+Math.cos(s*t+Math.PI)*(k+b)}}).text(function(e){return a.value(e)}),d.exit().remove(),g=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}),h=this.selectAll(".wk-chart-data-line").data(o.layerKeys(r)),h.enter().append("path").attr("class","wk-chart-data-line").call(i.tooltip),h.attr("d",function(e){var t;return t=r.map(function(t,r){return{x:Math.sin(s*r+Math.PI)*o.scale()(t[e]),y:Math.cos(s*r+Math.PI)*o.scale()(t[e])}}),g(t)+"Z"}).each(w).attr("transform","translate("+f+", "+y+")")},s.layout=function(e){return 0===arguments.length?a:(a=e,a.lifeCycle().on("configure",function(){return o=this.getScales(["x","y","color"]),o.y.domainCalc("max"),o.x.resetOnNewData(!0).scaleType("ordinal"),i=a.behavior().tooltip,i.on("enter."+n,u)}),a.lifeCycle().on("drawChart."+n,c),a.lifeCycle().on("destroy."+n,function(){return a.lifeCycle().on("."+n,null),i.on("."+n,null)}),s)},s}}]),angular.module("wk.chart").directive("chartGenerator",["$log","chartFactory","modelTypes",function(e,t,r){return{restrict:"E",scope:{markup:"=",properties:"=",error:"&",warning:"&"},link:function(e,r,n){return n.properties&&(e.properties=t.create()),e.$watch("properties",function(r){if(t.verify()){if(n.markup&&(e.markup=t.generateMarkup(e.properties)),n.warning&&t.hasWarnings)return e.warning({warnings:t.warnings})}else if(n.error)return e.error({errors:t.errors})},!0)}}}]),angular.module("wk.chart").service("chartFactory",["$log","modelTypes","dimensionFactory","layoutFactory","modelUtils",function(e,t,r,n,a){var o;return o=function(e){return function(e){var o,i;return o={},o.dimensions={},o.layouts={},o.properties=[],i={},a.addProperties(e.properties,o,i),a.addDecorators(e.decorators,o,i),a.addGetter(i,o,"dimensions"),a.addGetter(i,o,"layouts"),a.addGetter(i,o,"properties"),i.availableDimensions=function(){return _.keys(t.dimension)},i.addDimension=function(e){return o.dimensions[e]=r.create(e),o.dimensions[e]},i.removeDimension=function(e){return void delete o.dimensions[e]},i.availableLayouts=function(){return _.keys(t.layouts)},i.addLayout=function(e,t){var r;return r=n.create(t),o.layouts[e]=r,o.layouts[e].layoutName=e,r},i.removeLayout=function(e){return void delete o.layouts[e]},i.addProperty=function(e,t,r){var n,a,l,c,s;return l=o.dimensions[t]?r+"."+t:r,n=o.layouts[l],n||(n=i.addLayout(l,r)),a=n.dimensions[t],a||(a=n.addDimension(t)),c=a.property,c?(s=c.split(","),s.indexOf(e.trim())<0?(s.push(e.trim()),a.property=s.join(","),o.properties.push({property:e,dimName:t,dimension:a,layoutName:r,layout:n})):void 0):(a.property=e.trim(),o.properties.push({property:e,dimName:t,dimension:a,layoutName:r,layout:n}))},i.removeProperty=function(e,t,r){var n,a,l,c,s,u,d,f;for(l=o.layouts[r],c=l.dimensions[t],u=c.property,d=u.split(","),d.splice(d.indexOf(e),1),d.length>0?c.property=d.join(","):(c.property="",l.removeDimension(t),0===_.keys(l.dimensions).length&&i.removeLayout(r)),f=o.properties.filter(function(n){return n.property===e&&n.dimName===t&&(n.layoutName=r)}),a=0,s=f.length;s>a;a++)n=f[a],o.properties.splice(o.properties.indexOf(n),1)},i.getDescriptor=function(){return e},i}(e)},this.create=function(){return o(t.chart)},this.verify=function(){return!0},this.generateMarkup=function(e){var t,o;return t=e.getDescriptor(),o="<"+t.name,o+=a.generateProperties(t.properties,e),o+=a.generateDecorators(t.decorators,e),o+=">",o+=r.generateMarkup(e.dimensions),o+=n.generateMarkup(e.layouts),o+="\n</"+t.name+">"},this.hasErrors=!1,this.errors=[],this.hasWarnings=!1,this.warnings=[],this}]),angular.module("wk.chart").service("dimensionFactory",["$log","modelUtils","modelTypes",function(e,t,r){var n;return n=function(e){return function(e){var r,n;return r={},n={},t.addProperties(e.properties,r,n),t.addDecorators(e.decorators,r,n),n.getDescriptor=function(){return e},n}(e)},this.create=function(e){return _.has(r.dimension,e)?n(r.dimension[e]):void 0},this.generateMarkup=function(e){var r,n,a,o;a="";for(o in e)n=e[o],r=n.getDescriptor(),a+="\n		<"+r.name,a+=t.generateProperties(r.properties,n),a+=t.generateDecorators(r.decorators,n),a+=" />";return a},this}]),angular.module("wk.chart").service("layoutFactory",["$log","dimensionFactory","modelTypes","modelUtils",function(e,t,r,n){var a;return a=function(e){return function(e){var r,a,o,i,l;r={},r.dimensions={},r.layout=e.name,o={},n.addProperties(e.properties,r,o),n.addDecorators(e.decorators,r,o),l=e.dimensions;for(i in l)a=l[i],r.dimensions[i]=t.create(i);return n.addGetter(o,r,"dimensions"),n.addGetter(o,r,"layout"),o.addDimension=function(e){return r.dimensions[e]=t.create(e),r.dimensions[e]},o.removeDimension=function(e){return void delete r.dimensions[e]},o.getDescriptor=function(){return e},o}(e)},this.create=function(e){return _.has(r.layouts,e)?a(r.layouts[e]):void 0},this.generateMarkup=function(e){var r,a,o,i;o="";for(i in e)a=e[i],r=a.getDescriptor(),o+="\n	<layout",a[n.dashToCamel(r.name)]||(o+=" "+n.camelToDash(r.name)),o+=n.generateProperties(r.properties,a),o+=n.generateDecorators(r.decorators,a),o+=">",o+=t.generateMarkup(a.dimensions),o+="\n	</layout>";return o},this}]),angular.module("wk.chart").service("modelUtils",["$log","$templateCache","modelTypes",function(e,t,r){var n;return this.camelToDash=n=function(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},this.dashToCamel=function(e){return e.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})},this.addProperty=function(e,t,r){return Object.defineProperty(e,r,{get:function(){return t[r].value},set:function(e){return t[r].value=e},enumerable:!0})},this.addGetter=function(e,t,r){return Object.defineProperty(e,r,{get:function(){return t[r]},enumerable:!0})},this.addProperties=function(e,t,n){var a,o;for(o in e)a=e[o],_.has(n,o)||(t[o]={},this.addProperty(n,t,o),_.isString(a)?t[o].validator=r.getValidator(a):"enum"===a.type&&(t[o]["enum"]=a.values,t[o].validator=r.getValidator(a)));return n.validate=function(e,r){return t[e].validator.apply(t[e],[r])},n.acceptedValues=function(e){return t[e]["enum"]}},this.addDecorator=function(e,t,n){return t[e.name]={},t[e.key]={},this.addProperty(n,t,e.key),_.has(e,"value")&&(this.addProperty(n,t,e.name),_.isString(e.value)&&(t[e.name].validator=r.getValidator(e.value)),"enum"===e.value.type&&(t[e.name]["enum"]=e.value.values,t[e.name].validator=r.getValidator(e.value))),this.addProperties(e.properties,t,n)},this.addDecorators=function(e,t,r){var n,a,o,i;if(e){for(i=[],a=0,o=e.length;o>a;a++)n=e[a],i.push(this.addDecorator(n,t,r));return i}},this.generateProperties=function(e,t){var r,a,o;r="";for(a in e)o=e[a],void 0!==t[a]&&null!==t[a]&&""!==t[a]&&(r+=_.has(e[a],"generator")?e[a].generator(t[a]):_.isObject(t[a])?" "+n(a)+'="'+t[a].toString()+'"':" "+n(a)+'="'+t[a]+'"');return r},this.generateDecorators=function(e,t){var r,a,o,i;if(i="",e){for(a=0,o=e.length;o>a;a++)r=e[a],t[r.key]&&(i+=_.has(r,"generator")?r.generator(t[r.name]):t[r.name]?" "+n(r.name)+'="'+t[r.name]+'"':" "+n(r.name),i+=this.generateProperties(r.properties,t));return i}return""},this}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("wk.chart").service("modelTypes",["$log","wkChartScales",function(e,t){var r,n,a,o,i,l,c,s,u,d,f,y,h,g,p,v,m,k,w,b,x,S,C,$,A,D,M,L,P;return h=function(e,t,r,n){var o;return o={name:e,clazz:"layout",layerDimension:t,properties:a(r),decorators:n}},s=function(e,t,r){return{clazz:"dimension",name:e,properties:a(t),decorators:r}},f=function(){return _.keys(d3.scale).concat("time").concat(_.keys(t))},a=function(e){return _.assign.apply(this,[{}].concat(e))},x={string:"string",number:"number",bool:"boolean",list:"list","enum":function(e){return{type:"enum",values:e}},object:"scope variable",event:"scope event",callback:"callback",objArray:"scope variable"},this.getValidator=function(e){switch(e){case x.string:return _.isString;case x.number:return _.isNumber;case x.bool:return _.isBoolean;case x.list:return function(e){return/^\[(.*)\]$|^[^\[](?=[^\]\[]*$)/.test(e)};default:return _.isObject(e)&&"enum"===e.type?function(e){return indexOf.call(this["enum"],e)>=0}:function(){return!0}}},v={markers:x.bool},u={donut:x.bool},k={padding:x.number},m={outerPadding:x.number},r={areaStacked:x["enum"](["zero","silhouette","expand","wiggle"])},n={areaStackedVertical:x["enum"](["zero","silhouette","expand","wiggle"])},d={geojson:x.object},w={projection:x.object},A={spline:x.bool},p={mapFunction:x.string},b={property:x.list},D={rotateTickLabels:x.number},S={lowerProperty:x.string,upperProperty:x.string},i={type:x["enum"](f()),dateFormat:x.string,domain:x.list,domainMin:x.string,domainMax:x.string,reset:x.bool,range:x.list,domainRange:x["enum"](["min","max","extent","total"]),label:x.string,labelStyle:x.object,exponent:x.number,reverse:x.bool},C={name:"right",clazz:"decorator",
key:"right"},L={name:"top",clazz:"decorator",key:"top"},M={name:"tooltips",clazz:"decorator",key:"tooltips",properties:{tooltipsTemplate:x.string}},o={name:"axis",clazz:"decorator",key:"axis",properties:{grid:x.bool,gridStyle:x.object,format:x.string,showLabel:x.bool,ticks:x.number,tickInterval:x.number,tickFormat:x.string,tickLabelStyle:x.object,tickLabelBackgroundStyle:x.object,axisFormatter:x.object}},g={name:"legend",clazz:"decorator",key:"legend$set",value:x["enum"](["top-left","top-right","bottom-left","bottom-right"]),properties:{templateUrl:x.string,legendStyle:x.object}},P={name:"valuesLegend",clazz:"decorator",key:"valuesLegend$set",value:x["enum"](["top-left","top-right","bottom-left","bottom-right"]),properties:{templateUrl:x.string,legendStyle:x.object}},$={name:"selection",clazz:"decorator",key:"selection",properties:{selectedDomain:x.object,clearSelection:x.callback,selectedDomainChange:x.event}},l={name:"brush",key:"brush$set",clazz:"decorator",value:x.string,properties:{selectedDomain:x.object,selectedValues:x.object,brushExtent:x.object,selectedDomainChange:x.event,brushStart:x.event,brushEnd:x.event,clearBrush:x.callback}},c={name:"brushed",clazz:"decorator",key:"brushed$set",value:x.string},y={name:"labels",clazz:"decorator",key:"labels$set",properties:{labelStyle:x.object,labelBackgroundStyle:x.object}},this.chart={name:"chart",clazz:"chart",properties:{data:x.objArray,header:x.string,headerStyle:x.object,subHeader:x.string,subHeaderStyle:x.object,deepWatch:x.bool,filter:x.string,edit:x.bool,editSelected:x.event,animationDuration:x.number,backgroundStyle:x.object},decorators:[M],dimensions:{},layouts:[]},this.layouts={line:h("line","y",[v,A]),lineVertical:h("lineVertical","x",[v,A]),area:h("area","x",[v,A]),areaVertical:h("areaVertical","y",[v,A]),areaStacked:h("areaStacked",!1,"y",[r,v,A]),areaStackedVertical:h("areaStackedVertical",!1,"x",[n,v,A]),bars:h("bars",!1,[k,m],[y,$]),barStacked:h("barStacked","x",[k,m],[$]),barClustered:h("barClustered","x",[k,m],[$]),column:h("column",!1,[k,m],[y,$]),columnStacked:h("columnStacked","y",[k,m],[$]),columnClustered:h("columnClustered","y",[k,m],[$]),rangeArea:h("rangeArea",!1,[],[$]),rangeAreaVertical:h("rangeAreaVertical",!1,[],[$]),rangeBars:h("rangeBars",!1,[],[y,$]),rangeColumn:h("rangeColumn",!1,[],[y,$]),histogram:h("histogram",!1,[],[y,$]),pie:h("pie",!1,[],[y,$]),spider:h("spider",!1,[],[$]),bubble:h("bubble",!1,[],[$,l]),scatter:h("scatter",!1,[],[$,l]),geoMap:h("geo-map",!1,[d,w],[$])},this.dimension={x:s("x",[b,i,D],[o,l,c]),"x top":s("x top",[b,i,D],[o,l,c]),y:s("y",[b,i,D],[o,l,c]),"y right":s("y right",[b,i,D],[o,l,c]),color:s("color",[b,i,p],[g,P]),size:s("size",[b,i],[g,P]),shape:s("shape",[b,i],[g,P])},this}]);